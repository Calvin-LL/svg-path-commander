function cov_25zejja8ca() {
  var path = "D:\\! At Work\\5OpenSource\\svg-path-commander\\src\\util\\segmentQuadFactory.js";
  var hash = "c940b3e36a59a06b6b001285bba4ae80022d475c";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "D:\\! At Work\\5OpenSource\\svg-path-commander\\src\\util\\segmentQuadFactory.js",
    statementMap: {
      "0": {
        start: {
          line: 19,
          column: 13
        },
        end: {
          line: 19,
          column: 18
        }
      },
      "1": {
        start: {
          line: 20,
          column: 2
        },
        end: {
          line: 27,
          column: 4
        }
      },
      "2": {
        start: {
          line: 44,
          column: 27
        },
        end: {
          line: 44,
          column: 55
        }
      },
      "3": {
        start: {
          line: 45,
          column: 23
        },
        end: {
          line: 45,
          column: 28
        }
      },
      "4": {
        start: {
          line: 46,
          column: 10
        },
        end: {
          line: 46,
          column: 12
        }
      },
      "5": {
        start: {
          line: 46,
          column: 22
        },
        end: {
          line: 46,
          column: 24
        }
      },
      "6": {
        start: {
          line: 47,
          column: 20
        },
        end: {
          line: 47,
          column: 21
        }
      },
      "7": {
        start: {
          line: 48,
          column: 13
        },
        end: {
          line: 48,
          column: 34
        }
      },
      "8": {
        start: {
          line: 50,
          column: 12
        },
        end: {
          line: 50,
          column: 20
        }
      },
      "9": {
        start: {
          line: 51,
          column: 10
        },
        end: {
          line: 51,
          column: 11
        }
      },
      "10": {
        start: {
          line: 53,
          column: 2
        },
        end: {
          line: 55,
          column: 3
        }
      },
      "11": {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 54,
          column: 20
        }
      },
      "12": {
        start: {
          line: 57,
          column: 12
        },
        end: {
          line: 57,
          column: 15
        }
      },
      "13": {
        start: {
          line: 58,
          column: 2
        },
        end: {
          line: 74,
          column: 3
        }
      },
      "14": {
        start: {
          line: 58,
          column: 15
        },
        end: {
          line: 58,
          column: 16
        }
      },
      "15": {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 59,
          column: 14
        }
      },
      "16": {
        start: {
          line: 61,
          column: 4
        },
        end: {
          line: 61,
          column: 72
        }
      },
      "17": {
        start: {
          line: 62,
          column: 4
        },
        end: {
          line: 62,
          column: 51
        }
      },
      "18": {
        start: {
          line: 63,
          column: 4
        },
        end: {
          line: 63,
          column: 17
        }
      },
      "19": {
        start: {
          line: 65,
          column: 4
        },
        end: {
          line: 72,
          column: 5
        }
      },
      "20": {
        start: {
          line: 66,
          column: 17
        },
        end: {
          line: 66,
          column: 67
        }
      },
      "21": {
        start: {
          line: 68,
          column: 6
        },
        end: {
          line: 71,
          column: 8
        }
      },
      "22": {
        start: {
          line: 73,
          column: 4
        },
        end: {
          line: 73,
          column: 31
        }
      },
      "23": {
        start: {
          line: 75,
          column: 2
        },
        end: {
          line: 77,
          column: 3
        }
      },
      "24": {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 76,
          column: 28
        }
      },
      "25": {
        start: {
          line: 78,
          column: 2
        },
        end: {
          line: 78,
          column: 21
        }
      }
    },
    fnMap: {
      "0": {
        name: "getPointAtQuadSegmentLength",
        decl: {
          start: {
            line: 18,
            column: 9
          },
          end: {
            line: 18,
            column: 36
          }
        },
        loc: {
          start: {
            line: 18,
            column: 64
          },
          end: {
            line: 28,
            column: 1
          }
        },
        line: 18
      },
      "1": {
        name: "segmentQuadFactory",
        decl: {
          start: {
            line: 43,
            column: 24
          },
          end: {
            line: 43,
            column: 42
          }
        },
        loc: {
          start: {
            line: 43,
            column: 77
          },
          end: {
            line: 79,
            column: 1
          }
        },
        line: 43
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 53,
            column: 2
          },
          end: {
            line: 55,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 53,
            column: 2
          },
          end: {
            line: 55,
            column: 3
          }
        }, {
          start: {
            line: 53,
            column: 2
          },
          end: {
            line: 55,
            column: 3
          }
        }],
        line: 53
      },
      "1": {
        loc: {
          start: {
            line: 53,
            column: 6
          },
          end: {
            line: 53,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 53,
            column: 6
          },
          end: {
            line: 53,
            column: 22
          }
        }, {
          start: {
            line: 53,
            column: 26
          },
          end: {
            line: 53,
            column: 49
          }
        }],
        line: 53
      },
      "2": {
        loc: {
          start: {
            line: 65,
            column: 4
          },
          end: {
            line: 72,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 65,
            column: 4
          },
          end: {
            line: 72,
            column: 5
          }
        }, {
          start: {
            line: 65,
            column: 4
          },
          end: {
            line: 72,
            column: 5
          }
        }],
        line: 65
      },
      "3": {
        loc: {
          start: {
            line: 65,
            column: 8
          },
          end: {
            line: 65,
            column: 51
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 65,
            column: 8
          },
          end: {
            line: 65,
            column: 24
          }
        }, {
          start: {
            line: 65,
            column: 28
          },
          end: {
            line: 65,
            column: 51
          }
        }],
        line: 65
      },
      "4": {
        loc: {
          start: {
            line: 75,
            column: 2
          },
          end: {
            line: 77,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 75,
            column: 2
          },
          end: {
            line: 77,
            column: 3
          }
        }, {
          start: {
            line: 75,
            column: 2
          },
          end: {
            line: 77,
            column: 3
          }
        }],
        line: 75
      },
      "5": {
        loc: {
          start: {
            line: 75,
            column: 6
          },
          end: {
            line: 75,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 75,
            column: 6
          },
          end: {
            line: 75,
            column: 22
          }
        }, {
          start: {
            line: 75,
            column: 26
          },
          end: {
            line: 75,
            column: 49
          }
        }],
        line: 75
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "c940b3e36a59a06b6b001285bba4ae80022d475c"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }

  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_25zejja8ca = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}

cov_25zejja8ca();
import distanceSquareRoot from '../math/distanceSquareRoot';
/**
 * Returns the {x,y} coordinates of a point at a
 * given length of a quad-bezier segment.
 *
 * @see https://github.com/substack/point-at-length
 *
 * @param {number} x1 the starting point X
 * @param {number} y1 the starting point Y
 * @param {number} cx the control point X
 * @param {number} cy the control point Y
 * @param {number} x2 the ending point X
 * @param {number} y2 the ending point Y
 * @param {number} t a [0-1] ratio
 * @returns {{x: number, y: number}} the requested {x,y} coordinates
 */

function getPointAtQuadSegmentLength(x1, y1, cx, cy, x2, y2, t) {
  cov_25zejja8ca().f[0]++;
  const t1 = (cov_25zejja8ca().s[0]++, 1 - t);
  cov_25zejja8ca().s[1]++;
  return {
    x: t1 ** 2 * x1 + 2 * t1 * t * cx + t ** 2 * x2,
    y: t1 ** 2 * y1 + 2 * t1 * t * cy + t ** 2 * y2
  };
}
/**
 * Returns the Q (quadratic-bezier) segment length
 * or an {x,y} point at a given length.
 *
 * @param {number} x1 the starting point X
 * @param {number} y1 the starting point Y
 * @param {number} qx the control point X
 * @param {number} qy the control point Y
 * @param {number} x2 the ending point X
 * @param {number} y2 the ending point Y
 * @param {number=} distance the distance to point
 * @returns {{x: number, y: number} | number} the segment length or point
 */


export default function segmentQuadFactory(x1, y1, qx, qy, x2, y2, distance) {
  cov_25zejja8ca().f[1]++;
  const distanceIsNumber = (cov_25zejja8ca().s[2]++, typeof distance === 'number');
  const lengthMargin = (cov_25zejja8ca().s[3]++, 0.001);
  let x = (cov_25zejja8ca().s[4]++, x1);
  let y = (cov_25zejja8ca().s[5]++, y1);
  let totalLength = (cov_25zejja8ca().s[6]++, 0);
  let prev = (cov_25zejja8ca().s[7]++, [x1, y1, totalLength]);
  /** @type {[number, number]} */

  let cur = (cov_25zejja8ca().s[8]++, [x1, y1]);
  let t = (cov_25zejja8ca().s[9]++, 0);
  cov_25zejja8ca().s[10]++;

  if ((cov_25zejja8ca().b[1][0]++, distanceIsNumber) && (cov_25zejja8ca().b[1][1]++, distance < lengthMargin)) {
    cov_25zejja8ca().b[0][0]++;
    cov_25zejja8ca().s[11]++;
    return {
      x,
      y
    };
  } else {
    cov_25zejja8ca().b[0][1]++;
  }

  const n = (cov_25zejja8ca().s[12]++, 100);
  cov_25zejja8ca().s[13]++;

  for (let j = (cov_25zejja8ca().s[14]++, 0); j <= n; j += 1) {
    cov_25zejja8ca().s[15]++;
    t = j / n;
    cov_25zejja8ca().s[16]++;
    ({
      x,
      y
    } = getPointAtQuadSegmentLength(x1, y1, qx, qy, x2, y2, t));
    cov_25zejja8ca().s[17]++;
    totalLength += distanceSquareRoot(cur, [x, y]);
    cov_25zejja8ca().s[18]++;
    cur = [x, y];
    cov_25zejja8ca().s[19]++;

    if ((cov_25zejja8ca().b[3][0]++, distanceIsNumber) && (cov_25zejja8ca().b[3][1]++, totalLength >= distance)) {
      cov_25zejja8ca().b[2][0]++;
      const dv = (cov_25zejja8ca().s[20]++, (totalLength - distance) / (totalLength - prev[2]));
      cov_25zejja8ca().s[21]++;
      return {
        x: cur[0] * (1 - dv) + prev[0] * dv,
        y: cur[1] * (1 - dv) + prev[1] * dv
      };
    } else {
      cov_25zejja8ca().b[2][1]++;
    }

    cov_25zejja8ca().s[22]++;
    prev = [x, y, totalLength];
  }

  cov_25zejja8ca().s[23]++;

  if ((cov_25zejja8ca().b[5][0]++, distanceIsNumber) && (cov_25zejja8ca().b[5][1]++, distance >= totalLength)) {
    cov_25zejja8ca().b[4][0]++;
    cov_25zejja8ca().s[24]++;
    return {
      x: x2,
      y: y2
    };
  } else {
    cov_25zejja8ca().b[4][1]++;
  }

  cov_25zejja8ca().s[25]++;
  return totalLength;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZ21lbnRRdWFkRmFjdG9yeS5qcyJdLCJuYW1lcyI6WyJkaXN0YW5jZVNxdWFyZVJvb3QiLCJnZXRQb2ludEF0UXVhZFNlZ21lbnRMZW5ndGgiLCJ4MSIsInkxIiwiY3giLCJjeSIsIngyIiwieTIiLCJ0IiwidDEiLCJ4IiwieSIsInNlZ21lbnRRdWFkRmFjdG9yeSIsInF4IiwicXkiLCJkaXN0YW5jZSIsImRpc3RhbmNlSXNOdW1iZXIiLCJsZW5ndGhNYXJnaW4iLCJ0b3RhbExlbmd0aCIsInByZXYiLCJjdXIiLCJuIiwiaiIsImR2Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFlWTs7Ozs7Ozs7O0FBZlosT0FBT0Esa0JBQVAsTUFBK0IsNEJBQS9CO0FB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QUQsQ0FBOUMsQ0FBSCxDQUFSO0FBRCtDO0FBRy9DLGFBQU87QUFDTFQsUUFBQUEsQ0FBQyxFQUFFVSxHQUFHLENBQUMsQ0FBRCxDQUFILElBQVUsSUFBSUcsRUFBZCxJQUFvQkosSUFBSSxDQUFDLENBQUQsQ0FBSixHQUFVSSxFQUQ1QjtBQUVMWixRQUFBQSxDQUFDLEVBQUVTLEdBQUcsQ0FBQyxDQUFELENBQUgsSUFBVSxJQUFJRyxFQUFkLElBQW9CSixJQUFJLENBQUMsQ0FBRCxDQUFKLEdBQVVJO0FBRjVCLE9BQVA7QUFJRCxLQVBEO0FBQUE7QUFBQTs7QUFQOEI7QUFlOUJKLElBQUFBLElBQUksR0FBRyxDQUFDVCxDQUFELEVBQUlDLENBQUosRUFBT08sV0FBUCxDQUFQO0FBQ0Q7O0FBL0IwRTs7QUFnQzNFLE1BQUksNkJBQUFGLGdCQUFnQixrQ0FBSUQsUUFBUSxJQUFJRyxXQUFoQixDQUFwQixFQUFpRDtBQUFBO0FBQUE7QUFDL0MsV0FBTztBQUFFUixNQUFBQSxDQUFDLEVBQUVKLEVBQUw7QUFBU0ssTUFBQUEsQ0FBQyxFQUFFSjtBQUFaLEtBQVA7QUFDRCxHQUZEO0FBQUE7QUFBQTs7QUFoQzJFO0FBbUMzRSxTQUFPVyxXQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGlzdGFuY2VTcXVhcmVSb290IGZyb20gJy4uL21hdGgvZGlzdGFuY2VTcXVhcmVSb290JztcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB7eCx5fSBjb29yZGluYXRlcyBvZiBhIHBvaW50IGF0IGFcbiAqIGdpdmVuIGxlbmd0aCBvZiBhIHF1YWQtYmV6aWVyIHNlZ21lbnQuXG4gKlxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vc3Vic3RhY2svcG9pbnQtYXQtbGVuZ3RoXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHgxIHRoZSBzdGFydGluZyBwb2ludCBYXG4gKiBAcGFyYW0ge251bWJlcn0geTEgdGhlIHN0YXJ0aW5nIHBvaW50IFlcbiAqIEBwYXJhbSB7bnVtYmVyfSBjeCB0aGUgY29udHJvbCBwb2ludCBYXG4gKiBAcGFyYW0ge251bWJlcn0gY3kgdGhlIGNvbnRyb2wgcG9pbnQgWVxuICogQHBhcmFtIHtudW1iZXJ9IHgyIHRoZSBlbmRpbmcgcG9pbnQgWFxuICogQHBhcmFtIHtudW1iZXJ9IHkyIHRoZSBlbmRpbmcgcG9pbnQgWVxuICogQHBhcmFtIHtudW1iZXJ9IHQgYSBbMC0xXSByYXRpb1xuICogQHJldHVybnMge3t4OiBudW1iZXIsIHk6IG51bWJlcn19IHRoZSByZXF1ZXN0ZWQge3gseX0gY29vcmRpbmF0ZXNcbiAqL1xuZnVuY3Rpb24gZ2V0UG9pbnRBdFF1YWRTZWdtZW50TGVuZ3RoKHgxLCB5MSwgY3gsIGN5LCB4MiwgeTIsIHQpIHtcbiAgY29uc3QgdDEgPSAxIC0gdDtcbiAgcmV0dXJuIHtcbiAgICB4OiAodDEgKiogMikgKiB4MVxuICAgICAgKyAyICogdDEgKiB0ICogY3hcbiAgICAgICsgKHQgKiogMikgKiB4MixcbiAgICB5OiAodDEgKiogMikgKiB5MVxuICAgICAgKyAyICogdDEgKiB0ICogY3lcbiAgICAgICsgKHQgKiogMikgKiB5MixcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBRIChxdWFkcmF0aWMtYmV6aWVyKSBzZWdtZW50IGxlbmd0aFxuICogb3IgYW4ge3gseX0gcG9pbnQgYXQgYSBnaXZlbiBsZW5ndGguXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHgxIHRoZSBzdGFydGluZyBwb2ludCBYXG4gKiBAcGFyYW0ge251bWJlcn0geTEgdGhlIHN0YXJ0aW5nIHBvaW50IFlcbiAqIEBwYXJhbSB7bnVtYmVyfSBxeCB0aGUgY29udHJvbCBwb2ludCBYXG4gKiBAcGFyYW0ge251bWJlcn0gcXkgdGhlIGNvbnRyb2wgcG9pbnQgWVxuICogQHBhcmFtIHtudW1iZXJ9IHgyIHRoZSBlbmRpbmcgcG9pbnQgWFxuICogQHBhcmFtIHtudW1iZXJ9IHkyIHRoZSBlbmRpbmcgcG9pbnQgWVxuICogQHBhcmFtIHtudW1iZXI9fSBkaXN0YW5jZSB0aGUgZGlzdGFuY2UgdG8gcG9pbnRcbiAqIEByZXR1cm5zIHt7eDogbnVtYmVyLCB5OiBudW1iZXJ9IHwgbnVtYmVyfSB0aGUgc2VnbWVudCBsZW5ndGggb3IgcG9pbnRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2VnbWVudFF1YWRGYWN0b3J5KHgxLCB5MSwgcXgsIHF5LCB4MiwgeTIsIGRpc3RhbmNlKSB7XG4gIGNvbnN0IGRpc3RhbmNlSXNOdW1iZXIgPSB0eXBlb2YgZGlzdGFuY2UgPT09ICdudW1iZXInO1xuICBjb25zdCBsZW5ndGhNYXJnaW4gPSAwLjAwMTtcbiAgbGV0IHggPSB4MTsgbGV0IHkgPSB5MTtcbiAgbGV0IHRvdGFsTGVuZ3RoID0gMDtcbiAgbGV0IHByZXYgPSBbeDEsIHkxLCB0b3RhbExlbmd0aF07XG4gIC8qKiBAdHlwZSB7W251bWJlciwgbnVtYmVyXX0gKi9cbiAgbGV0IGN1ciA9IFt4MSwgeTFdO1xuICBsZXQgdCA9IDA7XG5cbiAgaWYgKGRpc3RhbmNlSXNOdW1iZXIgJiYgZGlzdGFuY2UgPCBsZW5ndGhNYXJnaW4pIHtcbiAgICByZXR1cm4geyB4LCB5IH07XG4gIH1cblxuICBjb25zdCBuID0gMTAwO1xuICBmb3IgKGxldCBqID0gMDsgaiA8PSBuOyBqICs9IDEpIHtcbiAgICB0ID0gaiAvIG47XG5cbiAgICAoeyB4LCB5IH0gPSBnZXRQb2ludEF0UXVhZFNlZ21lbnRMZW5ndGgoeDEsIHkxLCBxeCwgcXksIHgyLCB5MiwgdCkpO1xuICAgIHRvdGFsTGVuZ3RoICs9IGRpc3RhbmNlU3F1YXJlUm9vdChjdXIsIFt4LCB5XSk7XG4gICAgY3VyID0gW3gsIHldO1xuXG4gICAgaWYgKGRpc3RhbmNlSXNOdW1iZXIgJiYgdG90YWxMZW5ndGggPj0gZGlzdGFuY2UpIHtcbiAgICAgIGNvbnN0IGR2ID0gKHRvdGFsTGVuZ3RoIC0gZGlzdGFuY2UpIC8gKHRvdGFsTGVuZ3RoIC0gcHJldlsyXSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6IGN1clswXSAqICgxIC0gZHYpICsgcHJldlswXSAqIGR2LFxuICAgICAgICB5OiBjdXJbMV0gKiAoMSAtIGR2KSArIHByZXZbMV0gKiBkdixcbiAgICAgIH07XG4gICAgfVxuICAgIHByZXYgPSBbeCwgeSwgdG90YWxMZW5ndGhdO1xuICB9XG4gIGlmIChkaXN0YW5jZUlzTnVtYmVyICYmIGRpc3RhbmNlID49IHRvdGFsTGVuZ3RoKSB7XG4gICAgcmV0dXJuIHsgeDogeDIsIHk6IHkyIH07XG4gIH1cbiAgcmV0dXJuIHRvdGFsTGVuZ3RoO1xufVxuIl19