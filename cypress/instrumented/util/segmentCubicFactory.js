function cov_nrc2ne4k9() {
  var path = "D:\\! At Work\\5OpenSource\\svg-path-commander\\src\\util\\segmentCubicFactory.js";
  var hash = "f4126a284c06b6c87580afdaa262146ab8a8935b";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "D:\\! At Work\\5OpenSource\\svg-path-commander\\src\\util\\segmentCubicFactory.js",
    statementMap: {
      "0": {
        start: {
          line: 18,
          column: 13
        },
        end: {
          line: 18,
          column: 18
        }
      },
      "1": {
        start: {
          line: 19,
          column: 2
        },
        end: {
          line: 28,
          column: 4
        }
      },
      "2": {
        start: {
          line: 47,
          column: 27
        },
        end: {
          line: 47,
          column: 55
        }
      },
      "3": {
        start: {
          line: 48,
          column: 23
        },
        end: {
          line: 48,
          column: 28
        }
      },
      "4": {
        start: {
          line: 49,
          column: 10
        },
        end: {
          line: 49,
          column: 12
        }
      },
      "5": {
        start: {
          line: 49,
          column: 22
        },
        end: {
          line: 49,
          column: 24
        }
      },
      "6": {
        start: {
          line: 50,
          column: 20
        },
        end: {
          line: 50,
          column: 21
        }
      },
      "7": {
        start: {
          line: 51,
          column: 13
        },
        end: {
          line: 51,
          column: 34
        }
      },
      "8": {
        start: {
          line: 53,
          column: 12
        },
        end: {
          line: 53,
          column: 20
        }
      },
      "9": {
        start: {
          line: 54,
          column: 10
        },
        end: {
          line: 54,
          column: 11
        }
      },
      "10": {
        start: {
          line: 56,
          column: 2
        },
        end: {
          line: 58,
          column: 3
        }
      },
      "11": {
        start: {
          line: 57,
          column: 4
        },
        end: {
          line: 57,
          column: 20
        }
      },
      "12": {
        start: {
          line: 60,
          column: 12
        },
        end: {
          line: 60,
          column: 15
        }
      },
      "13": {
        start: {
          line: 61,
          column: 2
        },
        end: {
          line: 77,
          column: 3
        }
      },
      "14": {
        start: {
          line: 61,
          column: 15
        },
        end: {
          line: 61,
          column: 16
        }
      },
      "15": {
        start: {
          line: 62,
          column: 4
        },
        end: {
          line: 62,
          column: 14
        }
      },
      "16": {
        start: {
          line: 64,
          column: 4
        },
        end: {
          line: 64,
          column: 85
        }
      },
      "17": {
        start: {
          line: 65,
          column: 4
        },
        end: {
          line: 65,
          column: 51
        }
      },
      "18": {
        start: {
          line: 66,
          column: 4
        },
        end: {
          line: 66,
          column: 17
        }
      },
      "19": {
        start: {
          line: 68,
          column: 4
        },
        end: {
          line: 75,
          column: 5
        }
      },
      "20": {
        start: {
          line: 69,
          column: 17
        },
        end: {
          line: 69,
          column: 67
        }
      },
      "21": {
        start: {
          line: 71,
          column: 6
        },
        end: {
          line: 74,
          column: 8
        }
      },
      "22": {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 76,
          column: 31
        }
      },
      "23": {
        start: {
          line: 79,
          column: 2
        },
        end: {
          line: 81,
          column: 3
        }
      },
      "24": {
        start: {
          line: 80,
          column: 4
        },
        end: {
          line: 80,
          column: 28
        }
      },
      "25": {
        start: {
          line: 82,
          column: 2
        },
        end: {
          line: 82,
          column: 21
        }
      }
    },
    fnMap: {
      "0": {
        name: "getPointAtCubicSegmentLength",
        decl: {
          start: {
            line: 17,
            column: 9
          },
          end: {
            line: 17,
            column: 37
          }
        },
        loc: {
          start: {
            line: 17,
            column: 77
          },
          end: {
            line: 29,
            column: 1
          }
        },
        line: 17
      },
      "1": {
        name: "segmentCubicFactory",
        decl: {
          start: {
            line: 46,
            column: 24
          },
          end: {
            line: 46,
            column: 43
          }
        },
        loc: {
          start: {
            line: 46,
            column: 90
          },
          end: {
            line: 83,
            column: 1
          }
        },
        line: 46
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 56,
            column: 2
          },
          end: {
            line: 58,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 56,
            column: 2
          },
          end: {
            line: 58,
            column: 3
          }
        }, {
          start: {
            line: 56,
            column: 2
          },
          end: {
            line: 58,
            column: 3
          }
        }],
        line: 56
      },
      "1": {
        loc: {
          start: {
            line: 56,
            column: 6
          },
          end: {
            line: 56,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 56,
            column: 6
          },
          end: {
            line: 56,
            column: 22
          }
        }, {
          start: {
            line: 56,
            column: 26
          },
          end: {
            line: 56,
            column: 49
          }
        }],
        line: 56
      },
      "2": {
        loc: {
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 75,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 75,
            column: 5
          }
        }, {
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 75,
            column: 5
          }
        }],
        line: 68
      },
      "3": {
        loc: {
          start: {
            line: 68,
            column: 8
          },
          end: {
            line: 68,
            column: 51
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 68,
            column: 8
          },
          end: {
            line: 68,
            column: 24
          }
        }, {
          start: {
            line: 68,
            column: 28
          },
          end: {
            line: 68,
            column: 51
          }
        }],
        line: 68
      },
      "4": {
        loc: {
          start: {
            line: 79,
            column: 2
          },
          end: {
            line: 81,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 79,
            column: 2
          },
          end: {
            line: 81,
            column: 3
          }
        }, {
          start: {
            line: 79,
            column: 2
          },
          end: {
            line: 81,
            column: 3
          }
        }],
        line: 79
      },
      "5": {
        loc: {
          start: {
            line: 79,
            column: 6
          },
          end: {
            line: 79,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 79,
            column: 6
          },
          end: {
            line: 79,
            column: 22
          }
        }, {
          start: {
            line: 79,
            column: 26
          },
          end: {
            line: 79,
            column: 49
          }
        }],
        line: 79
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "f4126a284c06b6c87580afdaa262146ab8a8935b"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }

  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_nrc2ne4k9 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}

cov_nrc2ne4k9();
import distanceSquareRoot from '../math/distanceSquareRoot';
/**
 * Returns a point at a given length of a C (cubic-bezier) segment.
 *
 * @param {number} x1 the starting point X
 * @param {number} y1 the starting point Y
 * @param {number} c1x the first control point X
 * @param {number} c1y the first control point Y
 * @param {number} c2x the second control point X
 * @param {number} c2y the second control point Y
 * @param {number} x2 the ending point X
 * @param {number} y2 the ending point Y
 * @param {number} t a [0-1] ratio
 * @returns {{x: number, y: number}} the cubic-bezier segment length
 */

function getPointAtCubicSegmentLength(x1, y1, c1x, c1y, c2x, c2y, x2, y2, t) {
  cov_nrc2ne4k9().f[0]++;
  const t1 = (cov_nrc2ne4k9().s[0]++, 1 - t);
  cov_nrc2ne4k9().s[1]++;
  return {
    x: t1 ** 3 * x1 + 3 * t1 ** 2 * t * c1x + 3 * t1 * t ** 2 * c2x + t ** 3 * x2,
    y: t1 ** 3 * y1 + 3 * t1 ** 2 * t * c1y + 3 * t1 * t ** 2 * c2y + t ** 3 * y2
  };
}
/**
 * Returns the length of a C (cubic-bezier) segment
 * or an {x,y} point at a given length.
 *
 * @param {number} x1 the starting point X
 * @param {number} y1 the starting point Y
 * @param {number} c1x the first control point X
 * @param {number} c1y the first control point Y
 * @param {number} c2x the second control point X
 * @param {number} c2y the second control point Y
 * @param {number} x2 the ending point X
 * @param {number} y2 the ending point Y
 * @param {number=} distance the point distance
 * @returns {{x: number, y: number} | number} the segment length or point
 */


export default function segmentCubicFactory(x1, y1, c1x, c1y, c2x, c2y, x2, y2, distance) {
  cov_nrc2ne4k9().f[1]++;
  const distanceIsNumber = (cov_nrc2ne4k9().s[2]++, typeof distance === 'number');
  const lengthMargin = (cov_nrc2ne4k9().s[3]++, 0.001);
  let x = (cov_nrc2ne4k9().s[4]++, x1);
  let y = (cov_nrc2ne4k9().s[5]++, y1);
  let totalLength = (cov_nrc2ne4k9().s[6]++, 0);
  let prev = (cov_nrc2ne4k9().s[7]++, [x1, y1, totalLength]);
  /** @type {[number, number]} */

  let cur = (cov_nrc2ne4k9().s[8]++, [x1, y1]);
  let t = (cov_nrc2ne4k9().s[9]++, 0);
  cov_nrc2ne4k9().s[10]++;

  if ((cov_nrc2ne4k9().b[1][0]++, distanceIsNumber) && (cov_nrc2ne4k9().b[1][1]++, distance < lengthMargin)) {
    cov_nrc2ne4k9().b[0][0]++;
    cov_nrc2ne4k9().s[11]++;
    return {
      x,
      y
    };
  } else {
    cov_nrc2ne4k9().b[0][1]++;
  }

  const n = (cov_nrc2ne4k9().s[12]++, 100);
  cov_nrc2ne4k9().s[13]++;

  for (let j = (cov_nrc2ne4k9().s[14]++, 0); j <= n; j += 1) {
    cov_nrc2ne4k9().s[15]++;
    t = j / n;
    cov_nrc2ne4k9().s[16]++;
    ({
      x,
      y
    } = getPointAtCubicSegmentLength(x1, y1, c1x, c1y, c2x, c2y, x2, y2, t));
    cov_nrc2ne4k9().s[17]++;
    totalLength += distanceSquareRoot(cur, [x, y]);
    cov_nrc2ne4k9().s[18]++;
    cur = [x, y];
    cov_nrc2ne4k9().s[19]++;

    if ((cov_nrc2ne4k9().b[3][0]++, distanceIsNumber) && (cov_nrc2ne4k9().b[3][1]++, totalLength >= distance)) {
      cov_nrc2ne4k9().b[2][0]++;
      const dv = (cov_nrc2ne4k9().s[20]++, (totalLength - distance) / (totalLength - prev[2]));
      cov_nrc2ne4k9().s[21]++;
      return {
        x: cur[0] * (1 - dv) + prev[0] * dv,
        y: cur[1] * (1 - dv) + prev[1] * dv
      };
    } else {
      cov_nrc2ne4k9().b[2][1]++;
    }

    cov_nrc2ne4k9().s[22]++;
    prev = [x, y, totalLength];
  }

  cov_nrc2ne4k9().s[23]++;

  if ((cov_nrc2ne4k9().b[5][0]++, distanceIsNumber) && (cov_nrc2ne4k9().b[5][1]++, distance >= totalLength)) {
    cov_nrc2ne4k9().b[4][0]++;
    cov_nrc2ne4k9().s[24]++;
    return {
      x: x2,
      y: y2
    };
  } else {
    cov_nrc2ne4k9().b[4][1]++;
  }

  cov_nrc2ne4k9().s[25]++;
  return totalLength;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZ21lbnRDdWJpY0ZhY3RvcnkuanMiXSwibmFtZXMiOlsiZGlzdGFuY2VTcXVhcmVSb290IiwiZ2V0UG9pbnRBdEN1YmljU2VnbWVudExlbmd0aCIsIngxIiwieTEiLCJjMXgiLCJjMXkiLCJjMngiLCJjMnkiLCJ4MiIsInkyIiwidCIsInQxIiwieCIsInkiLCJzZWdtZW50Q3ViaWNGYWN0b3J5IiwiZGlzdGFuY2UiLCJkaXN0YW5jZUlzTnVtYmVyIiwibGVuZ3RoTWFyZ2luIiwidG90YWxMZW5ndGgiLCJwcmV2IiwiY3VyIiwibiIsImoiLCJkdiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZVk7Ozs7Ozs7OztBQWZaLE9BQU9BLGtCQUFQLE1BQStCLDRCQUEvQjtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsU0FBU0MsNEJBQVQsQ0FBc0NDLEVBQXRDLEVBQTBDQyxFQUExQyxFQUE4Q0MsR0FBOUMsRUFBbURDLEdBQW5ELEVBQXdEQyxHQUF4RCxFQUE2REMsR0FBN0QsRUFBa0VDLEVBQWxFLEVBQXNFQyxFQUF0RSxFQUEwRUMsQ0FBMUUsRUFBNkU7QUFBQTtBQUMzRSxRQUFNQyxFQUFFLDRCQUFHLElBQUlELENBQVAsQ0FBUjtBQUQyRTtBQUUzRSxTQUFPO0FBQ0xFLElBQUFBLENBQUMsRUFBR0QsRUFBRSxJQUFJLENBQVAsR0FBWVQsRUFBWixHQUNDLElBQUtTLEVBQUUsSUFBSSxDQUFYLEdBQWdCRCxDQUFoQixHQUFvQk4sR0FEckIsR0FFQyxJQUFJTyxFQUFKLEdBQVVELENBQUMsSUFBSSxDQUFmLEdBQW9CSixHQUZyQixHQUdFSSxDQUFDLElBQUksQ0FBTixHQUFXRixFQUpWO0FBS0xLLElBQUFBLENBQUMsRUFBR0YsRUFBRSxJQUFJLENBQVAsR0FBWVIsRUFBWixHQUNDLElBQUtRLEVBQUUsSUFBSSxDQUFYLEdBQWdCRCxDQUFoQixHQUFvQkwsR0FEckIsR0FFQyxJQUFJTSxFQUFKLEdBQVVELENBQUMsSUFBSSxDQUFmLEdBQW9CSCxHQUZyQixHQUdFRyxDQUFDLElBQUksQ0FBTixHQUFXRDtBQVJWLEdBQVA7QUFVRDtBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0EsZUFBZSxTQUFTSyxtQkFBVCxDQUE2QlosRUFBN0IsRUFBaUNDLEVBQWpDLEVBQXFDQyxHQUFyQyxFQUEwQ0MsR0FBMUMsRUFBK0NDLEdBQS9DLEVBQW9EQyxHQUFwRCxFQUF5REMsRUFBekQsRUFBNkRDLEVBQTdELEVBQWlFTSxRQUFqRSxFQUEyRTtBQUFBO0FBQ3hGLFFBQU1DLGdCQUFnQiw0QkFBRyxPQUFPRCxRQUFQLEtBQW9CLFFBQXZCLENBQXRCO0FBQ0EsUUFBTUUsWUFBWSw0QkFBRyxLQUFILENBQWxCO0FBQ0EsTUFBSUwsQ0FBQyw0QkFBR1YsRUFBSCxDQUFMO0FBQVksTUFBSVcsQ0FBQyw0QkFBR1YsRUFBSCxDQUFMO0FBQ1osTUFBSWUsV0FBVyw0QkFBRyxDQUFILENBQWY7QUFDQSxNQUFJQyxJQUFJLDRCQUFHLENBQUNqQixFQUFELEVBQUtDLEVBQUwsRUFBU2UsV0FBVCxDQUFILENBQVI7QUFDQTs7QUFDQSxNQUFJRSxHQUFHLDRCQUFHLENBQUNsQixFQUFELEVBQUtDLEVBQUwsQ0FBSCxDQUFQO0FBQ0EsTUFBSU8sQ0FBQyw0QkFBRyxDQUFILENBQUw7QUFSd0Y7O0FBVXhGLE1BQUksNEJBQUFNLGdCQUFnQixpQ0FBSUQsUUFBUSxHQUFHRSxZQUFmLENBQXBCLEVBQWlEO0FBQUE7QUFBQTtBQUMvQyxXQUFPO0FBQUVMLE1BQUFBLENBQUY7QUFBS0MsTUFBQUE7QUFBTCxLQUFQO0FBQ0QsR0FGRDtBQUFBO0FBQUE7O0FBSUEsUUFBTVEsQ0FBQyw2QkFBRyxHQUFILENBQVA7QUFkd0Y7O0FBZXhGLE9BQUssSUFBSUMsQ0FBQyw2QkFBRyxDQUFILENBQVYsRUFBZ0JBLENBQUMsSUFBSUQsQ0FBckIsRUFBd0JDLENBQUMsSUFBSSxDQUE3QixFQUFnQztBQUFBO0FBQzlCWixJQUFBQSxDQUFDLEdBQUdZLENBQUMsR0FBR0QsQ0FBUjtBQUQ4QjtBQUc5QixLQUFDO0FBQUVULE1BQUFBLENBQUY7QUFBS0MsTUFBQUE7QUFBTCxRQUFXWiw0QkFBNEIsQ0FBQ0MsRUFBRCxFQUFLQyxFQUFMLEVBQVNDLEdBQVQsRUFBY0MsR0FBZCxFQUFtQkMsR0FBbkIsRUFBd0JDLEdBQXhCLEVBQTZCQyxFQUE3QixFQUFpQ0MsRUFBakMsRUFBcUNDLENBQXJDLENBQXhDO0FBSDhCO0FBSTlCUSxJQUFBQSxXQUFXLElBQUlsQixrQkFBa0IsQ0FBQ29CLEdBQUQsRUFBTSxDQUFDUixDQUFELEVBQUlDLENBQUosQ0FBTixDQUFqQztBQUo4QjtBQUs5Qk8sSUFBQUEsR0FBRyxHQUFHLENBQUNSLENBQUQsRUFBSUMsQ0FBSixDQUFOO0FBTDhCOztBQU85QixRQUFJLDRCQUFBRyxnQkFBZ0IsaUNBQUlFLFdBQVcsSUFBSUgsUUFBbkIsQ0FBcEIsRUFBaUQ7QUFBQTtBQUMvQyxZQUFNUSxFQUFFLDZCQUFHLENBQUNMLFdBQVcsR0FBR0gsUUFBZixLQUE0QkcsV0FBVyxHQUFHQyxJQUFJLENBQUMsQ0FBRCxDQUE5QyxDQUFILENBQVI7QUFEK0M7QUFHL0MsYUFBTztBQUNMUCxRQUFBQSxDQUFDLEVBQUVRLEdBQUcsQ0FBQyxDQUFELENBQUgsSUFBVSxJQUFJRyxFQUFkLElBQW9CSixJQUFJLENBQUMsQ0FBRCxDQUFKLEdBQVVJLEVBRDVCO0FBRUxWLFFBQUFBLENBQUMsRUFBRU8sR0FBRyxDQUFDLENBQUQsQ0FBSCxJQUFVLElBQUlHLEVBQWQsSUFBb0JKLElBQUksQ0FBQyxDQUFELENBQUosR0FBVUk7QUFGNUIsT0FBUDtBQUlELEtBUEQ7QUFBQTtBQUFBOztBQVA4QjtBQWU5QkosSUFBQUEsSUFBSSxHQUFHLENBQUNQLENBQUQsRUFBSUMsQ0FBSixFQUFPSyxXQUFQLENBQVA7QUFDRDs7QUEvQnVGOztBQWlDeEYsTUFBSSw0QkFBQUYsZ0JBQWdCLGlDQUFJRCxRQUFRLElBQUlHLFdBQWhCLENBQXBCLEVBQWlEO0FBQUE7QUFBQTtBQUMvQyxXQUFPO0FBQUVOLE1BQUFBLENBQUMsRUFBRUosRUFBTDtBQUFTSyxNQUFBQSxDQUFDLEVBQUVKO0FBQVosS0FBUDtBQUNELEdBRkQ7QUFBQTtBQUFBOztBQWpDd0Y7QUFvQ3hGLFNBQU9TLFdBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkaXN0YW5jZVNxdWFyZVJvb3QgZnJvbSAnLi4vbWF0aC9kaXN0YW5jZVNxdWFyZVJvb3QnO1xuXG4vKipcbiAqIFJldHVybnMgYSBwb2ludCBhdCBhIGdpdmVuIGxlbmd0aCBvZiBhIEMgKGN1YmljLWJlemllcikgc2VnbWVudC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0geDEgdGhlIHN0YXJ0aW5nIHBvaW50IFhcbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSB0aGUgc3RhcnRpbmcgcG9pbnQgWVxuICogQHBhcmFtIHtudW1iZXJ9IGMxeCB0aGUgZmlyc3QgY29udHJvbCBwb2ludCBYXG4gKiBAcGFyYW0ge251bWJlcn0gYzF5IHRoZSBmaXJzdCBjb250cm9sIHBvaW50IFlcbiAqIEBwYXJhbSB7bnVtYmVyfSBjMnggdGhlIHNlY29uZCBjb250cm9sIHBvaW50IFhcbiAqIEBwYXJhbSB7bnVtYmVyfSBjMnkgdGhlIHNlY29uZCBjb250cm9sIHBvaW50IFlcbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiB0aGUgZW5kaW5nIHBvaW50IFhcbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiB0aGUgZW5kaW5nIHBvaW50IFlcbiAqIEBwYXJhbSB7bnVtYmVyfSB0IGEgWzAtMV0gcmF0aW9cbiAqIEByZXR1cm5zIHt7eDogbnVtYmVyLCB5OiBudW1iZXJ9fSB0aGUgY3ViaWMtYmV6aWVyIHNlZ21lbnQgbGVuZ3RoXG4gKi9cbmZ1bmN0aW9uIGdldFBvaW50QXRDdWJpY1NlZ21lbnRMZW5ndGgoeDEsIHkxLCBjMXgsIGMxeSwgYzJ4LCBjMnksIHgyLCB5MiwgdCkge1xuICBjb25zdCB0MSA9IDEgLSB0O1xuICByZXR1cm4ge1xuICAgIHg6ICh0MSAqKiAzKSAqIHgxXG4gICAgICArIDMgKiAodDEgKiogMikgKiB0ICogYzF4XG4gICAgICArIDMgKiB0MSAqICh0ICoqIDIpICogYzJ4XG4gICAgICArICh0ICoqIDMpICogeDIsXG4gICAgeTogKHQxICoqIDMpICogeTFcbiAgICAgICsgMyAqICh0MSAqKiAyKSAqIHQgKiBjMXlcbiAgICAgICsgMyAqIHQxICogKHQgKiogMikgKiBjMnlcbiAgICAgICsgKHQgKiogMykgKiB5MixcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsZW5ndGggb2YgYSBDIChjdWJpYy1iZXppZXIpIHNlZ21lbnRcbiAqIG9yIGFuIHt4LHl9IHBvaW50IGF0IGEgZ2l2ZW4gbGVuZ3RoLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSB0aGUgc3RhcnRpbmcgcG9pbnQgWFxuICogQHBhcmFtIHtudW1iZXJ9IHkxIHRoZSBzdGFydGluZyBwb2ludCBZXG4gKiBAcGFyYW0ge251bWJlcn0gYzF4IHRoZSBmaXJzdCBjb250cm9sIHBvaW50IFhcbiAqIEBwYXJhbSB7bnVtYmVyfSBjMXkgdGhlIGZpcnN0IGNvbnRyb2wgcG9pbnQgWVxuICogQHBhcmFtIHtudW1iZXJ9IGMyeCB0aGUgc2Vjb25kIGNvbnRyb2wgcG9pbnQgWFxuICogQHBhcmFtIHtudW1iZXJ9IGMyeSB0aGUgc2Vjb25kIGNvbnRyb2wgcG9pbnQgWVxuICogQHBhcmFtIHtudW1iZXJ9IHgyIHRoZSBlbmRpbmcgcG9pbnQgWFxuICogQHBhcmFtIHtudW1iZXJ9IHkyIHRoZSBlbmRpbmcgcG9pbnQgWVxuICogQHBhcmFtIHtudW1iZXI9fSBkaXN0YW5jZSB0aGUgcG9pbnQgZGlzdGFuY2VcbiAqIEByZXR1cm5zIHt7eDogbnVtYmVyLCB5OiBudW1iZXJ9IHwgbnVtYmVyfSB0aGUgc2VnbWVudCBsZW5ndGggb3IgcG9pbnRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2VnbWVudEN1YmljRmFjdG9yeSh4MSwgeTEsIGMxeCwgYzF5LCBjMngsIGMyeSwgeDIsIHkyLCBkaXN0YW5jZSkge1xuICBjb25zdCBkaXN0YW5jZUlzTnVtYmVyID0gdHlwZW9mIGRpc3RhbmNlID09PSAnbnVtYmVyJztcbiAgY29uc3QgbGVuZ3RoTWFyZ2luID0gMC4wMDE7XG4gIGxldCB4ID0geDE7IGxldCB5ID0geTE7XG4gIGxldCB0b3RhbExlbmd0aCA9IDA7XG4gIGxldCBwcmV2ID0gW3gxLCB5MSwgdG90YWxMZW5ndGhdO1xuICAvKiogQHR5cGUge1tudW1iZXIsIG51bWJlcl19ICovXG4gIGxldCBjdXIgPSBbeDEsIHkxXTtcbiAgbGV0IHQgPSAwO1xuXG4gIGlmIChkaXN0YW5jZUlzTnVtYmVyICYmIGRpc3RhbmNlIDwgbGVuZ3RoTWFyZ2luKSB7XG4gICAgcmV0dXJuIHsgeCwgeSB9O1xuICB9XG5cbiAgY29uc3QgbiA9IDEwMDtcbiAgZm9yIChsZXQgaiA9IDA7IGogPD0gbjsgaiArPSAxKSB7XG4gICAgdCA9IGogLyBuO1xuXG4gICAgKHsgeCwgeSB9ID0gZ2V0UG9pbnRBdEN1YmljU2VnbWVudExlbmd0aCh4MSwgeTEsIGMxeCwgYzF5LCBjMngsIGMyeSwgeDIsIHkyLCB0KSk7XG4gICAgdG90YWxMZW5ndGggKz0gZGlzdGFuY2VTcXVhcmVSb290KGN1ciwgW3gsIHldKTtcbiAgICBjdXIgPSBbeCwgeV07XG5cbiAgICBpZiAoZGlzdGFuY2VJc051bWJlciAmJiB0b3RhbExlbmd0aCA+PSBkaXN0YW5jZSkge1xuICAgICAgY29uc3QgZHYgPSAodG90YWxMZW5ndGggLSBkaXN0YW5jZSkgLyAodG90YWxMZW5ndGggLSBwcmV2WzJdKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgeDogY3VyWzBdICogKDEgLSBkdikgKyBwcmV2WzBdICogZHYsXG4gICAgICAgIHk6IGN1clsxXSAqICgxIC0gZHYpICsgcHJldlsxXSAqIGR2LFxuICAgICAgfTtcbiAgICB9XG4gICAgcHJldiA9IFt4LCB5LCB0b3RhbExlbmd0aF07XG4gIH1cblxuICBpZiAoZGlzdGFuY2VJc051bWJlciAmJiBkaXN0YW5jZSA+PSB0b3RhbExlbmd0aCkge1xuICAgIHJldHVybiB7IHg6IHgyLCB5OiB5MiB9O1xuICB9XG4gIHJldHVybiB0b3RhbExlbmd0aDtcbn1cbiJdfQ==