// SVGPathCommander v0.1.10alpha1 | thednp Â© 2021 | MIT-License
function t(t){if(!t.every(t=>!Number.isNaN(t)))throw TypeError(`CSSMatrix: "${t}" must only have numbers.`);const e=new l,n=Array.from(t);if(16===n.length){const[t,r,s,a,i,c,o,m,l,h,u,f,y,p,x,g]=n;e.m11=t,e.a=t,e.m21=i,e.c=i,e.m31=l,e.m41=y,e.e=y,e.m12=r,e.b=r,e.m22=c,e.d=c,e.m32=h,e.m42=p,e.f=p,e.m13=s,e.m23=o,e.m33=u,e.m43=x,e.m14=a,e.m24=m,e.m34=f,e.m44=g}else{if(6!==n.length)throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");{const[t,r,s,a,i,c]=n;e.m11=t,e.a=t,e.m12=r,e.b=r,e.m21=s,e.c=s,e.m22=a,e.d=a,e.m41=i,e.e=i,e.m42=c,e.f=c}}return e}function e(e){if(![l,DOMMatrix,Object].some(t=>e instanceof t))throw TypeError(`CSSMatrix: "${e}" is not a DOMMatrix / CSSMatrix compatible object.`);return t([e.m11,e.m12,e.m13,e.m14,e.m21,e.m22,e.m23,e.m24,e.m31,e.m32,e.m33,e.m34,e.m41,e.m42,e.m43,e.m44])}function n(e){if("string"!=typeof e)throw TypeError(`CSSMatrix: "${e}" is not a string.`);const n=String(e).replace(/\s/g,"");let r=new l;return n.split(")").filter(t=>t).map(t=>{const[e,n]=t.split("(");return{prop:e,components:n.split(",").map(t=>t.includes("rad")?parseFloat(t)*(180/Math.PI):parseFloat(t))}}).forEach(e=>{const{prop:n,components:s}=e,[a,i,c,o]=s,m=[a,i,c],l=[a,i,c,o];if(n.includes("matrix")){const e=s.map(t=>Math.abs(t)<1e-6?0:t);[6,16].includes(e.length)&&(r=r.multiply(t(e)))}else if(["translate","translate3d"].some(t=>n===t)&&a)r=r.translate(a,i||0,c||0);else if("rotate3d"===n&&l.every(t=>!Number.isNaN(+t))&&o)r=r.rotateAxisAngle(a,i,c,o);else if("scale3d"===n&&m.every(t=>!Number.isNaN(+t))&&m.some(t=>1!==t))r=r.scale(a,i,c);else if("rotate"===n&&a)r=r.rotate(0,0,a);else if("scale"!==n||Number.isNaN(a)||1===a){if("skew"===n&&(a||i))r=a?r.skewX(a):r,r=i?r.skewY(i):r;else if(/[XYZ]/.test(n)&&a)if(n.includes("skew"))r=r[n](a);else{const t=n.replace(/[XYZ]/,""),e=n.replace(t,""),s=["X","Y","Z"].indexOf(e),i=[0===s?a:0,1===s?a:0,2===s?a:0];r=r[t](...i)}}else{const t=Number.isNaN(+i)?a:i;r=r.scale(a,t,1)}}),r}function r(t,e,n){const r=new l;return r.m41=t,r.e=t,r.m42=e,r.f=e,r.m43=n,r}function s(t,e,n){const r=new l,s=Math.PI/180,a=t*s,i=e*s,c=n*s,o=Math.cos(a),m=-Math.sin(a),h=Math.cos(i),u=-Math.sin(i),f=Math.cos(c),y=-Math.sin(c),p=h*f,x=-h*y;r.m11=p,r.a=p,r.m12=x,r.b=x,r.m13=u;const g=m*u*f+o*y;r.m21=g,r.c=g;const d=o*f-m*u*y;return r.m22=d,r.d=d,r.m23=-m*h,r.m31=m*y-o*u*f,r.m32=m*f+o*u*y,r.m33=o*h,r}function a(t,e,n,r){const s=new l,a=r*(Math.PI/360),i=Math.sin(a),c=Math.cos(a),o=i*i,m=Math.sqrt(t*t+e*e+n*n);let h=t,u=e,f=n;0===m?(h=0,u=0,f=1):(h/=m,u/=m,f/=m);const y=h*h,p=u*u,x=f*f,g=1-2*(p+x)*o;s.m11=g,s.a=g;const d=2*(h*u*o+f*i*c);s.m12=d,s.b=d,s.m13=2*(h*f*o-u*i*c);const M=2*(u*h*o-f*i*c);s.m21=M,s.c=M;const b=1-2*(x+y)*o;return s.m22=b,s.d=b,s.m23=2*(u*f*o+h*i*c),s.m31=2*(f*h*o+u*i*c),s.m32=2*(f*u*o-h*i*c),s.m33=1-2*(y+p)*o,s}function i(t,e,n){const r=new l;return r.m11=t,r.a=t,r.m22=e,r.d=e,r.m33=n,r}function c(t){const e=new l,n=t*Math.PI/180,r=Math.tan(n);return e.m21=r,e.c=r,e}function o(t){const e=new l,n=t*Math.PI/180,r=Math.tan(n);return e.m12=r,e.b=r,e}function m(e,n){return t([n.m11*e.m11+n.m12*e.m21+n.m13*e.m31+n.m14*e.m41,n.m11*e.m12+n.m12*e.m22+n.m13*e.m32+n.m14*e.m42,n.m11*e.m13+n.m12*e.m23+n.m13*e.m33+n.m14*e.m43,n.m11*e.m14+n.m12*e.m24+n.m13*e.m34+n.m14*e.m44,n.m21*e.m11+n.m22*e.m21+n.m23*e.m31+n.m24*e.m41,n.m21*e.m12+n.m22*e.m22+n.m23*e.m32+n.m24*e.m42,n.m21*e.m13+n.m22*e.m23+n.m23*e.m33+n.m24*e.m43,n.m21*e.m14+n.m22*e.m24+n.m23*e.m34+n.m24*e.m44,n.m31*e.m11+n.m32*e.m21+n.m33*e.m31+n.m34*e.m41,n.m31*e.m12+n.m32*e.m22+n.m33*e.m32+n.m34*e.m42,n.m31*e.m13+n.m32*e.m23+n.m33*e.m33+n.m34*e.m43,n.m31*e.m14+n.m32*e.m24+n.m33*e.m34+n.m34*e.m44,n.m41*e.m11+n.m42*e.m21+n.m43*e.m31+n.m44*e.m41,n.m41*e.m12+n.m42*e.m22+n.m43*e.m32+n.m44*e.m42,n.m41*e.m13+n.m42*e.m23+n.m43*e.m33+n.m44*e.m43,n.m41*e.m14+n.m42*e.m24+n.m43*e.m34+n.m44*e.m44])}class l{constructor(...t){const e=this;if(e.a=1,e.b=0,e.c=0,e.d=1,e.e=0,e.f=0,e.m11=1,e.m12=0,e.m13=0,e.m14=0,e.m21=0,e.m22=1,e.m23=0,e.m24=0,e.m31=0,e.m32=0,e.m33=1,e.m34=0,e.m41=0,e.m42=0,e.m43=0,e.m44=1,t&&t.length){let n=t;return t instanceof Array&&(t[0]instanceof Array&&[16,6].includes(t[0].length)||"string"==typeof t[0]||[l,DOMMatrix].some(e=>t[0]instanceof e))&&([n]=t),e.setMatrixValue(n)}return e}set isIdentity(t){this.isIdentity=t}get isIdentity(){const t=this;return 1===t.m11&&0===t.m12&&0===t.m13&&0===t.m14&&0===t.m21&&1===t.m22&&0===t.m23&&0===t.m24&&0===t.m31&&0===t.m32&&1===t.m33&&0===t.m34&&0===t.m41&&0===t.m42&&0===t.m43&&1===t.m44}get is2D(){const t=this;return 0===t.m31&&0===t.m32&&1===t.m33&&0===t.m34&&0===t.m43&&1===t.m44}set is2D(t){this.is2D=t}setMatrixValue(r){return[DOMMatrix,l].some(t=>r instanceof t)?e(r):"string"==typeof r&&r.length&&"none"!==r?n(r):Array.isArray(r)?t(r):this}toString(){const t=this.toArray().join(",");return`${this.is2D?"matrix":"matrix3d"}(${t})`}toArray(){const t=this;let e;return e=t.is2D?[t.a,t.b,t.c,t.d,t.e,t.f]:[t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44],e.map(t=>Math.abs(t)<1e-6?0:(t*10**6>>0)/10**6)}toJSON(){return JSON.parse(JSON.stringify(this))}multiply(t){return m(this,t)}translate(t,e,n){let s=e,a=n;return null==a&&(a=0),null==s&&(s=0),m(this,r(t,s,a))}scale(t,e,n){let r=e,s=n;return null==r&&(r=t),null==s&&(s=t),m(this,i(t,r,s))}rotate(t,e,n){let r=t,a=e,i=n;return null==a&&(a=0),null==i&&(i=r,r=0),m(this,s(r,a,i))}rotateAxisAngle(t,e,n,r){if([t,e,n,r].some(t=>Number.isNaN(t)))throw new TypeError("CSSMatrix: expecting 4 values");return m(this,a(t,e,n,r))}skewX(t){return m(this,c(t))}skewY(t){return m(this,o(t))}transformPoint(t){let e=r(t.x,t.y,t.z);return e.m44=t.w||1,e=this.multiply(e),{x:e.m41,y:e.m42,z:e.m43,w:e.m44}}transform(t){const e=this,n=e.m11*t.x+e.m12*t.y+e.m13*t.z+e.m14*t.w,r=e.m21*t.x+e.m22*t.y+e.m23*t.z+e.m24*t.w,s=e.m31*t.x+e.m32*t.y+e.m33*t.z+e.m34*t.w,a=e.m41*t.x+e.m42*t.y+e.m43*t.z+e.m44*t.w;return{x:n/a,y:r/a,z:s/a,w:a}}}l.Translate=r,l.Rotate=s,l.RotateAxisAngle=a,l.Scale=i,l.SkewX=c,l.SkewY=o,l.Multiply=m,l.fromArray=t,l.fromMatrix=e,l.fromString=n;const h={origin:null,decimals:4,round:1};function u(t,e,n){if(t[n].length>7){t[n].shift();const r=t[n];let s=n;for(;r.length;)e[n]="A",t.splice(s+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}const f={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function y(t){return Array.isArray(t)&&t.every(t=>{const e=t[0].toLowerCase();return f[e]===t.length-1&&/[achlmqstvz]/gi.test(e)})}function p(t){return y(t)&&t.slice(1).every(t=>"C"===t[0])}function x(t){return t.map(t=>Array.isArray(t)?x(t):Number.isNaN(+t)?t:+t)}function g(t){let e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;if("m"===n&&r.length>2&&(t.segments.push([e,r[0],r[1]]),r=r.slice(2),n="l",e="m"===e?"l":"L"),"r"===n)t.segments.push([e].concat(r));else for(;r.length>=f[n]&&(t.segments.push([e].concat(r.splice(0,f[n]))),f[n]););}function d(t){const{index:e}=t,n=t.pathValue.charCodeAt(e);return 48===n?(t.param=0,void(t.index+=1)):49===n?(t.param=1,void(t.index+=1)):void(t.err=`Invalid path value: invalid Arc flag ${n}, expecting 0 or 1 at index ${e}`)}function M(t){return t>=48&&t<=57}function b(t){const{max:e,pathValue:n,index:r}=t;let s,a=r,i=!1,c=!1,o=!1,m=!1;if(a>=e)t.err=`Invalid path value at ${a}: missing param ${n[a]}`;else if(s=n.charCodeAt(a),43!==s&&45!==s||(a+=1,s=a<e?n.charCodeAt(a):0),M(s)||46===s){if(46!==s){if(i=48===s,a+=1,s=a<e?n.charCodeAt(a):0,i&&a<e&&s&&M(s))return void(t.err=`Invalid path value at index ${r}: ${n[r]} illegal number`);for(;a<e&&M(n.charCodeAt(a));)a+=1,c=!0;s=a<e?n.charCodeAt(a):0}if(46===s){for(m=!0,a+=1;M(n.charCodeAt(a));)a+=1,o=!0;s=a<e?n.charCodeAt(a):0}if(101===s||69===s){if(m&&!c&&!o)return void(t.err=`Invalid path value at index ${a}: ${n[a]} invalid float exponent`);if(a+=1,s=a<e?n.charCodeAt(a):0,43!==s&&45!==s||(a+=1),!(a<e&&M(n.charCodeAt(a))))return void(t.err=`Invalid path value at index ${a}: ${n[a]} invalid float exponent`);for(;a<e&&M(n.charCodeAt(a));)a+=1}t.index=a,t.param=+t.pathValue.slice(r,a)}else t.err=`Invalid path value at index ${a}: ${n[a]} is not a number`}function A(t){const{pathValue:e,max:n}=t;for(;t.index<n&&(10===(r=e.charCodeAt(t.index))||13===r||8232===r||8233===r||32===r||9===r||11===r||12===r||160===r||r>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(r)>=0);)t.index+=1;var r}function w(t){return t>=48&&t<=57||43===t||45===t||46===t}function v(t){const{max:e,pathValue:n,index:r}=t,s=n.charCodeAt(r),a=f[n[r].toLowerCase()];if(t.segmentStart=r,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0;default:return!1}}(s))if(t.index+=1,A(t),t.data=[],a){for(;;){for(let r=a;r>0;r-=1){if(97!=(32|s)||3!==r&&4!==r?b(t):d(t),t.err.length)return;t.data.push(t.param),A(t),t.index<e&&44===n.charCodeAt(t.index)&&(t.index+=1,A(t))}if(t.index>=t.max)break;if(!w(n.charCodeAt(t.index)))break}g(t)}else g(t);else t.err=`Invalid path value: ${n[r]} not a path command`}function C(t){this.segments=[],this.pathValue=t,this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}function N(t){if(y(t))return x(t);const e=new C(t);for(A(e);e.index<e.max&&!e.err.length;)v(e);return e.err.length?e.segments=[]:e.segments.length&&("mM".indexOf(e.segments[0][0])<0?(e.err="Invalid path value: missing M/m",e.segments=[]):e.segments[0][0]="M"),e.segments}function k(t){return y(t)&&t.every(t=>t[0]===t[0].toUpperCase())}function S(t){if(k(t))return x(t);const e=N(t),n=e.length,r=[];let s=0,a=0,i=0,c=0,o=0;"M"===e[0][0]&&(s=+e[0][1],a=+e[0][2],i=s,c=a,o+=1,r.push(["M",s,a]));for(let t=o;t<n;t+=1){const n=e[t],[o]=n,m=o.toUpperCase(),l=[];let h=[];if(r.push(l),o!==m)switch(l[0]=m,m){case"A":h=n.slice(1,-2).concat([+n[6]+s,+n[7]+a]);for(let t=0;t<h.length;t+=1)l.push(h[t]);break;case"V":l[1]=+n[1]+a;break;case"H":l[1]=+n[1]+s;break;default:"M"===m&&(i=+n[1]+s,c=+n[2]+a);for(let t=1;t<n.length;t+=1)l.push(+n[t]+(t%2?s:a))}else for(let t=0;t<n.length;t+=1)l.push(n[t]);const u=l.length;switch(m){case"Z":s=i,a=c;break;case"H":s=+l[1];break;case"V":a=+l[1];break;default:s=+l[u-2],a=+l[u-1],"M"===m&&(i=s,c=a)}}return r}function q(t,e,n){const[r]=t,s=t.slice(1);let a=t;if("TQ".indexOf(t[0])<0&&(e.qx=null,e.qy=null),"H"===r)a=["L",t[1],e.y1];else if("V"===r)a=["L",e.x1,t[1]];else if("S"===r){const{x1:t,y1:r}=function(t,e,n,r,s){return"CS".indexOf(s)>-1?{x1:2*t-n,y1:2*e-r}:{x1:t,y1:e}}(e.x1,e.y1,e.x2,e.y2,n);e.x1=t,e.y1=r,a=["C",t,r].concat(s)}else if("T"===r){const{qx:t,qy:r}=function(t,e,n,r,s){return"QT".indexOf(s)>-1?{qx:2*t-n,qy:2*e-r}:{qx:t,qy:e}}(e.x1,e.y1,e.qx,e.qy,n);e.qx=t,e.qy=r,a=["Q",t,r].concat(s)}else if("Q"===r){const[t,n]=s;e.qx=t,e.qy=n}return a}function P(t){return y(t)&&t.every(t=>{const e=t[0].toLowerCase();return f[e]===t.length-1&&"ACLMQZ".includes(t[0])})}function I(t){if(P(t))return x(t);const e=S(t),n={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},r=[],s=e.length;let a,i,c="";for(let t=0;t<s;t+=1){const[s]=e[t];r[t]=s,t&&(c=r[t-1]),e[t]=q(e[t],n,c),a=e[t],i=a.length,n.x1=+a[i-2],n.y1=+a[i-1],n.x2=+a[i-4]||n.x1,n.y2=+a[i-3]||n.y1}return e}function T(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function O(t,e,n,r,s,a,i,c,o,m){const l=120*Math.PI/180,h=Math.PI/180*(s||0);let u,f,y,p,x,g=[],d=t,M=c,b=e,A=o,w=n,v=r;if(m){const[t,e,n,r]=m;f=t,y=e,p=n,x=r}else{u=T(d,b,-h),d=u.x,b=u.y,u=T(M,A,-h),M=u.x,A=u.y;const t=(d-M)/2,e=(b-A)/2;let n=t**2/w**2+e**2/v**2;n>1&&(n=Math.sqrt(n),w*=n,v*=n);const r=w**2,s=v**2,c=(a===i?-1:1)*Math.sqrt(Math.abs((r*s-r*e*e-s*t*t)/(r*e*e+s*t*t)));p=c*w*e/v+(d+M)/2,x=c*-v*t/w+(b+A)/2,f=Math.asin(((b-x)/v*10**9>>0)/10**9),y=Math.asin(((A-x)/v*10**9>>0)/10**9),f=d<p?Math.PI-f:f,y=M<p?Math.PI-y:y,f<0&&(f=2*Math.PI+f),y<0&&(y=2*Math.PI+y),i&&f>y&&(f-=2*Math.PI),!i&&y>f&&(y-=2*Math.PI)}let C=y-f;if(Math.abs(C)>l){const t=y,e=M,n=A;y=f+l*(i&&y>f?1:-1),M=p+w*Math.cos(y),A=x+v*Math.sin(y),g=O(M,A,w,v,s,0,i,e,n,[y,t,p,x])}C=y-f;const N=Math.cos(f),k=Math.sin(f),S=Math.cos(y),q=Math.sin(y),P=Math.tan(C/4),I=4/3*w*P,V=4/3*v*P,$=[d,b],z=[d+I*k,b-V*N],L=[M+I*q,A-V*S],E=[M,A];return z[0]=2*$[0]-z[0],z[1]=2*$[1]-z[1],m?[z,L,E].concat(g):(g=[z,L,E].concat(g).join().split(","),g.map((t,e)=>e%2?T(g[e-1],t,h).y:T(t,g[e+1],h).x))}function V(t,e,n,r,s,a){return[1/3*t+2/3*n,1/3*e+2/3*r,1/3*s+2/3*n,1/3*a+2/3*r,s,a]}function $(t,e,n,r,s,a,i,c,o){const m=1-o;return{x:m**3*t+m*m*3*o*n+3*m*o*o*s+o**3*i,y:m**3*e+m*m*3*o*r+3*m*o*o*a+o**3*c}}function z(t,e,n){const[r,s]=t,[a,i]=e;return[r+(a-r)*n,s+(i-s)*n]}function L(t,e,n,r){const s=.5,a=[t,e],i=[n,r],c=z(a,i,s),o=z(i,c,s),m=z(c,o,s),l=z(o,m,s),h=z(m,l,s),u=$.apply(0,a.concat(c,m,h,s)),f=$.apply(0,h.concat(l,o,i,0));return[u.x,u.y,f.x,f.y,n,r]}function E(t,e){"TQ".indexOf(t[0])<0&&(e.qx=null,e.qy=null);const[n,r]=t.slice(1);switch(t[0]){case"M":return e.x=n,e.y=r,t;case"A":return["C"].concat(O.apply(0,[e.x1,e.y1].concat(t.slice(1))));case"Q":return e.qx=n,e.qy=r,["C"].concat(V.apply(0,[e.x1,e.y1].concat(t.slice(1))));case"L":return["C"].concat(L(e.x1,e.y1,t[1],t[2]));case"Z":return["C"].concat(L(e.x1,e.y1,e.x,e.y))}return t}function j(t){if(p(t))return x(t);const e=I(t),n={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},r=[];let s="",a=e.length;for(let t=0;t<a;t+=1){const i=e[t],c=i.length;i&&([s]=i),r[t]=s,e[t]=E(i,n),u(e,r,t),a=e.length,n.x1=+i[c-2],n.y1=+i[c-1],n.x2=+i[c-4]||n.x1,n.y2=+i[c-3]||n.y1}return e}function D(t,e,n,r,s,a,i,c){return 3*((c-e)*(n+s)-(i-t)*(r+a)+r*(t-s)-n*(e-a)+c*(s+t/3)-i*(a+e/3))/20}function Z(t){let e=0,n=0,r=0,s=0,a=0;return j(t).map(t=>{switch(t[0]){case"M":case"Z":return r="M"===t[0]?t[1]:r,s="M"===t[0]?t[2]:s,e=r,n=s,0;default:return a=D.apply(0,[e,n].concat(t.slice(1))),[e,n]=t.slice(-2),a}}).reduce((t,e)=>t+e,0)}function Q(t,e,n,r,s){return s*(s*(-3*t+9*e-9*n+3*r)+6*t-12*e+6*n)-3*t+3*e}function X(t,e,n,r,s,a,i,c,o){let m;(null===o||Number.isNaN(+o))&&(m=1),m>1&&(m=1),m<0&&(m=0);const l=m/2;let h=0,u=0,f=0,y=0;const p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472];return[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816].forEach((o,m)=>{h=l*o+l,u=Q(t,n,s,i,h),f=Q(e,r,a,c,h),y+=p[m]*Math.sqrt(u*u+f*f)}),l*y}function Y(t,e,n,r,s,a,i,c){let o=s-2*n+t-(i-2*s+n),m=2*(n-t)-2*(s-n),l=t-n,h=(-m+Math.sqrt(m*m-4*o*l))/2/o,u=(-m-Math.sqrt(m*m-4*o*l))/2/o;const f=[e,c],y=[t,i];let p;return Math.abs(h)>"1e12"&&(h=.5),Math.abs(u)>"1e12"&&(u=.5),h>0&&h<1&&(p=$(t,e,n,r,s,a,i,c,h),y.push(p.x),f.push(p.y)),u>0&&u<1&&(p=$(t,e,n,r,s,a,i,c,u),y.push(p.x),f.push(p.y)),o=a-2*r+e-(c-2*a+r),m=2*(r-e)-2*(a-r),l=e-r,h=(-m+Math.sqrt(m*m-4*o*l))/2/o,u=(-m-Math.sqrt(m*m-4*o*l))/2/o,Math.abs(h)>"1e12"&&(h=.5),Math.abs(u)>"1e12"&&(u=.5),h>0&&h<1&&(p=$(t,e,n,r,s,a,i,c,h),y.push(p.x),f.push(p.y)),u>0&&u<1&&(p=$(t,e,n,r,s,a,i,c,u),y.push(p.x),f.push(p.y)),{min:{x:Math.min.apply(0,y),y:Math.min.apply(0,f)},max:{x:Math.max.apply(0,y),y:Math.max.apply(0,f)}}}function H(t){if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};const e=j(t);let n=0,r=0,s=[],a=[];e.forEach(t=>{const[e,i]=t.slice(-2);if("M"===t[0])n=e,r=i,s.push(e),a.push(i);else{const c=Y.apply(0,[n,r].concat(t.slice(1)));s=s.concat(c.min.x,c.max.x),a=a.concat(c.min.y,c.max.y),n=e,r=i}});const i=Math.min.apply(0,s),c=Math.min.apply(0,a),o=Math.max.apply(0,s),m=Math.max.apply(0,a),l=o-i,h=m-c;return{width:l,height:h,x:i,y:c,x2:o,y2:m,cx:i+l/2,cy:c+h/2}}function R(t){return y(t)&&t.slice(1).every(t=>t[0]===t[0].toLowerCase())}function J(t,e){const{round:n,decimals:r}=h,s=Number.isNaN(+e)?n&&r:+e;return s?t.map(t=>t.map(t=>{const e=+t,n=10**s;return e?e%1==0?e:Math.round(e*n)/n:t})):x(t)}function B(t,e){return J(t,e).map(t=>t[0].concat(t.slice(1).join(" "))).join("")}const F={circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],rect:["width","height","x","y","rx","ry"],polygon:["points"],polyline:["points"],glyph:[]};function G(t){return B(S(t)).replace(/(m|M)/g,"|$1").split("|").map(t=>t.trim()).filter(t=>t)}function U(t){if(R(t))return x(t);const e=N(t),n=e.length,r=[];let s=0,a=0,i=0,c=0,o=0;"M"===e[0][0]&&(s=+e[0][1],a=+e[0][2],i=s,c=a,o+=1,r.push(["M",s,a]));for(let t=o;t<n;t+=1){const n=e[t],[o]=n,m=o.toLowerCase(),l=[];let h=[];if(r.push(l),o!==m)switch(l[0]=m,m){case"a":h=n.slice(1,-2).concat([+n[6]-s,+n[7]-a]);for(let t=0;t<h.length;t+=1)l.push(h[t]);break;case"v":l[1]=+n[1]-a;break;default:for(let t=1;t<n.length;t+=1)l.push(+n[t]-(t%2?s:a));"m"===m&&(i=+n[1],c=+n[2])}else{"m"===o&&(i=+n[1]+s,c=+n[2]+a);for(let t=0;t<n.length;t+=1)l.push(n[t])}const u=l.length;switch(l[0]){case"z":s=i,a=c;break;case"h":s+=l[u-1];break;case"v":a+=l[u-1];break;default:s+=r[t][u-2],a+=r[t][u-1]}}return r}function K(t,e){const n=J(S(t),e),r=J(U(t),e);return n.map((t,e)=>e?t.join("").length<r[e].join("").length?t:r[e]:t)}function W(t){const e=S(t),n="Z"===e.slice(-1)[0][0];let r=[],s=0;return r=I(e).map((t,n)=>(s=t.length,{seg:e[n],n:t,c:e[n][0],x:t[s-2],y:t[s-1]})).map((t,e,r)=>{const s=t.seg,a=t.n,i=e&&r[e-1],c=r[e+1]&&r[e+1],o=t.c,m=r.length,l=e?r[e-1].x:r[m-1].x,h=e?r[e-1].y:r[m-1].y;let u=[];switch(o){case"M":u=n?["Z"]:[o,l,h];break;case"A":u=s.slice(0,-3).concat([1===s[5]?0:1,l,h]);break;case"C":u=c&&"S"===c.c?["S",s[1],s[2],l,h]:[o,s[3],s[4],s[1],s[2],l,h];break;case"S":u=i&&"CS".indexOf(i.c)>-1&&(!c||c&&"S"!==c.c)?["C",a[3],a[4],a[1],a[2],l,h]:[o,a[1],a[2],l,h];break;case"Q":u=c&&"T"===c.c?["T",l,h]:s.slice(0,-2).concat([l,h]);break;case"T":u=i&&"QT".indexOf(i.c)>-1&&(!c||c&&"T"!==c.c)?["Q",a[1],a[2],l,h]:[o,l,h];break;case"Z":u=["M",l,h];break;case"H":u=[o,l];break;case"V":u=[o,h];break;default:u=s.slice(0,-2).concat([l,h])}return u}),n?r.reverse():[r[0]].concat(r.slice(1).reverse())}function _(t){let e=new l;const{origin:n}=t,r=+n[0],s=+n[1],{translate:a}=t,{rotate:i}=t,{skew:c}=t,{scale:o}=t;return(!Number.isNaN(a)||Array.isArray(a)&&a.some(t=>0!=+t))&&(e=Array.isArray(a)?e.translate(+a[0]||0,+a[1]||0,+a[2]||0):e.translate(+a||0,0,0)),(i||c||o)&&(e=e.translate(+r,+s),i&&(e=Array.isArray(i)&&i.some(t=>0!=+t)?e.rotate(+i[0]||0,+i[1]||0,+i[2]||0):e.rotate(+i||0)),Array.isArray(c)&&c.some(t=>0!=+t)&&(Array.isArray(c)?(e=c[0]?e.skewX(+c[0]||0):e,e=c[1]?e.skewY(+c[1]||0):e):e=e.skewX(+c||0)),(!Number.isNaN(o)||Array.isArray(o)&&o.some(t=>1!=+t))&&(e=Array.isArray(o)?e.scale(+o[0]||1,+o[1]||1,+o[2]||1):e.scale(+o||1)),e=e.translate(-r,-s)),e}function tt(t,e,n){const r=t.transformPoint({x:e[0],y:e[1],z:0,w:1}),s=n[0]||0,a=n[1]||0,i=n[2]||0,c=r.x-s,o=r.y-a,m=r.z-i;return[c*(Math.abs(i)/Math.abs(m))+s,o*(Math.abs(i)/Math.abs(m))+a]}function et(t,e){let n,r,s,a,i,c,o,m,l;const h=S(t),f=I(h),y=_(e),p=Object.keys(e),{origin:g}=e,{a:d,b:M,c:b,d:A,e:w,f:v}=y,C=[d,M,b,A,w,v],N={x1:0,y1:0,x2:0,y2:0,x:0,y:0};let k=[],q=0,P="",T=[];const O=[];let V=[];if(!y.isIdentity){for(s=0,i=h.length;s<i;s+=1)k=h[s],h[s]&&([P]=k),O[s]=P,"A"!==P||y.is2D&&["skewX","skewY"].find(t=>p.includes(t))||(k=E(f[s],N),h[s]=E(f[s],N),u(h,O,s),f[s]=E(f[s],N),u(f,O,s),i=Math.max(h.length,f.length)),k=f[s],q=k.length,N.x1=+k[q-2],N.y1=+k[q-1],N.x2=+k[q-4]||N.x1,N.y2=+k[q-3]||N.y1,V={s:h[s],c:h[s][0]},"Z"!==P&&(V.x=N.x1,V.y=N.y1),T=T.concat(V);return T=T.map(t=>{switch(P=t.c,k=t.s,P){case"A":return l=function(t,e,n,r){const s=Math.cos(r*Math.PI/180),a=Math.sin(r*Math.PI/180),i=[e*(t[0]*s+t[2]*a),e*(t[1]*s+t[3]*a),n*(-t[0]*a+t[2]*s),n*(-t[1]*a+t[3]*s)],c=i[0]*i[0]+i[2]*i[2],o=i[1]*i[1]+i[3]*i[3];let m=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1]));const l=(c+o)/2;if(m<1e-9*l){const t=Math.sqrt(l);return{rx:t,ry:t,ax:0}}const h=i[0]*i[1]+i[2]*i[3];m=Math.sqrt(m);const u=l+m/2,f=l-m/2;let y,p,x=Math.abs(h)<1e-9&&Math.abs(u-o)<1e-9?90:Math.atan(Math.abs(h)>Math.abs(u-o)?(u-c)/h:h/(u-o)*180)/Math.PI;return x>=0?(y=Math.sqrt(u),p=Math.sqrt(f)):(x+=90,y=Math.sqrt(f),p=Math.sqrt(u)),{rx:y,ry:p,ax:x}}(C,k[1],k[2],k[3]),C[0]*C[3]-C[1]*C[2]<0&&(k[5]=+k[5]?0:1),[o,m]=tt(y,[k[6],k[7]],g),k=n===o&&r===m||l.rx<1e-9*l.ry||l.ry<1e-9*l.rx?["L",o,m]:[P,l.rx,l.ry,l.ax,k[4],k[5],o,m],n=o,r=m,k;case"L":case"H":case"V":return[o,m]=tt(y,[t.x,t.y],g),n!==o&&r!==m?k=["L",o,m]:r===m?k=["H",o]:n===o&&(k=["V",m]),n=o,r=m,k;default:for(a=1,c=k.length;a<c;a+=2)[n,r]=tt(y,[k[a],k[a+1]],g),k[a]=n,k[a+1]=r;return k}}),T}return x(h)}const nt={CSSMatrix:l,parsePathString:N,isPathArray:y,isCurveArray:p,isAbsoluteArray:k,isRelativeArray:R,isNormalizedArray:P,isValidPath:function(t){if("string"!=typeof t)return!1;const e=new C(t);for(A(e);e.index<e.max&&!e.err.length;)v(e);return!e.err.length&&"mM".includes(e.segments[0][0])},pathToAbsolute:S,pathToRelative:U,pathToCurve:j,pathToString:B,getDrawDirection:function(t){return Z(j(t))>=0},getPathArea:Z,getPathBBox:H,getPathLength:function(t){let e=0;return j(t).forEach((t,n,r)=>{e+="M"===t[0]?0:X.apply(0,r[n-1].slice(-2).concat(t.slice(1)))}),e},getPointAtLength:function(t,e){let n,r,s,a=0;return j(t).map((t,i,c)=>(r=i?c[i-1].slice(-2).concat(t.slice(1)):t.slice(1),n=i?X.apply(0,r):0,a+=n,s=0===i?{x:r[0],y:r[1]}:a>e&&e>a-n?$.apply(0,r.concat(1-(a-e)/n)):null,s)).filter(t=>t).slice(-1)[0]},clonePath:x,splitPath:G,roundPath:J,optimizePath:K,reverseCurve:function(t){const e=t.slice(1).map((e,n,r)=>n?r[n-1].slice(-2).concat(e.slice(1)):t[0].slice(1).concat(e.slice(1))).map(t=>t.map((e,n)=>t[t.length-n-2*(1-n%2)])).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(t=>["C"].concat(t.slice(2))))},reversePath:W,normalizePath:I,transformPath:et,getSVGMatrix:_,shapeToPath:function(t,e){if(!Object.keys(F).concat(["glyph"]).some(e=>t.tagName===e))throw TypeError(`shapeToPath: ${t} is not SVGElement`);const n=document.createElementNS("http://www.w3.org/2000/svg","path"),r=t.tagName,s=F[r],a={type:r};let i;return s.forEach(e=>{a[e]=t.getAttribute(e)}),Object.values(t.attributes).forEach(({name:t,value:e})=>{s.includes(t)||n.setAttribute(t,e)}),["circle","ellipse"].includes(r)?i=B(function(t){const{type:e,cx:n,cy:r,r:s}=t;let{rx:a,ry:i}=t;return"circle"===e&&s>0&&(a=s,i=s),[["M",n-a,r],["a",a,i,0,1,0,2*a,0],["a",a,i,0,1,0,-2*a,0]]}(a)):["polyline","polygon"].includes(r)?i=B(function(t){const e=[];let{points:n}=t;n=n.split(/[\s|,]/).map(Number);let r=0;for(;r<n.length;)e.push([r?"L":"M",n[r],n[r+1]]),r+=2;return"polygon"===t.type?e.concat([["z"]]):e}(a)):"rect"===r?i=B(function(t){const e=+t.x||0,n=+t.y||0,r=+t.width,s=+t.height;let a=+t.rx,i=+t.ry;return a||i?(a=a||i,i=i||a,2*a>r&&(a-=(2*a-r)/2),2*i>s&&(i-=(2*i-s)/2),[["M",e+a,n],["h",r-2*a],["s",a,0,a,i],["v",s-2*i],["s",0,i,-a,i],["h",2*a-r],["s",-a,0,-a,-i],["v",2*i-s],["s",0,-i,a,-i]]):[["M",e,n],["h",r],["v",s],["H",e],["Z"]]}(a)):"line"===r?i=B(function(t){const{x1:e,y1:n,x2:r,y2:s}=t;return[["M",+e,+n],["L",+r,+s]]}(a)):"glyph"===r&&(i=t.getAttribute("d")),i?(n.setAttribute("d",i),e&&(t.before(n,t),t.remove()),n):null},options:h,Version:"0.1.10alpha1"};class rt{constructor(t,e){const n=e||{};let{round:r}=h;const{round:s}=n;0!=+s&&!1!==s||(r=0);const{decimals:a}=r&&(n||h);return this.round=0===r?0:a,this.segments=N(t),this.pathValue=t,this}toAbsolute(){const{segments:t}=this;return this.segments=S(t),this}toRelative(){const{segments:t}=this;return this.segments=U(t),this}reverse(t){this.toAbsolute();const{segments:e}=this,n=G(this.pathValue).length>1&&G(this.toString()),r=n&&x(n).map((e,n)=>t?n?W(e):N(e):W(e));let s=[];return s=n?r.flat(1):t?e:W(e),this.segments=x(s),this}normalize(){const{segments:t}=this;return this.segments=I(t),this}optimize(){const{segments:t}=this;return this.segments=K(t,this.round),this}transform(t){if(!t||"object"!=typeof t||"object"==typeof t&&!["translate","rotate","skew","scale"].some(e=>e in t))return this;const e=t||{},{segments:n}=this;if(!e.origin){const t=H(n);e.origin=[t.cx,t.cy,t.cx]}return this.segments=et(n,e),this}flipX(){return this.transform({rotate:[180,0,0]}),this}flipY(){return this.transform({rotate:[0,180,0]}),this}toString(){return B(this.segments,this.round)}}Object.keys(nt).forEach(t=>{rt[t]=nt[t]});export{rt as default};
