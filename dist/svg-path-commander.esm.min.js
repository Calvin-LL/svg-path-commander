// SVGPathCommander v0.0.1-h | thednp Â© 2020 | MIT-License
function t(e){return e.map((function(e){return Array.isArray(e)?t(e):isNaN(+e)?e:+e}))}var e={decimals:3,round:1};function a(a){return e.round?a.map((function(t){return t.map((function(t,a){var n=+t,r=Math.pow(10,e.decimals);return a?n%1==0?n:(n*r>>0)/r:t}))})):t(a)}function n(t){return this.segments=[],this.pathValue=t,this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err="",this}var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function s(t){var e=t.pathValue[t.segmentStart],a=e.toLowerCase(),n=t.data;if("m"===a&&n.length>2&&(t.segments.push([e,n[0],n[1]]),n=n.slice(2),a="l",e="m"===e?"l":"L"),"r"===a)t.segments.push([e].concat(n));else for(;n.length>=r[a]&&(t.segments.push([e].concat(n.splice(0,r[a]))),r[a]););}function i(t){var e=t.pathValue.charCodeAt(t.index);return 48===e?(t.param=0,void t.index++):49===e?(t.param=1,void t.index++):void(t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")")}function c(t){return t>=48&&t<=57}function o(t){var e,a=t.index,n=a,r=t.max,s=!1,i=!1,o=!1,h=!1;if(n>=r)t.err="SvgPath: missed param (at pos "+n+")";else if(43!==(e=t.pathValue.charCodeAt(n))&&45!==e||(e=++n<r?t.pathValue.charCodeAt(n):0),c(e)||46===e){if(46!==e){if(s=48===e,e=++n<r?t.pathValue.charCodeAt(n):0,s&&n<r&&e&&c(e))return void(t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+a+")");for(;n<r&&c(t.pathValue.charCodeAt(n));)n++,i=!0;e=n<r?t.pathValue.charCodeAt(n):0}if(46===e){for(h=!0,n++;c(t.pathValue.charCodeAt(n));)n++,o=!0;e=n<r?t.pathValue.charCodeAt(n):0}if(101===e||69===e){if(h&&!i&&!o)return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");if(43!==(e=++n<r?t.pathValue.charCodeAt(n):0)&&45!==e||n++,!(n<r&&c(t.pathValue.charCodeAt(n))))return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");for(;n<r&&c(t.pathValue.charCodeAt(n));)n++}t.index=n,t.param=+t.pathValue.slice(a,n)}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")"}function h(t){return t>=48&&t<=57||43===t||45===t||46===t}function u(t){for(;t.index<t.max&&(10===(e=t.pathValue.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0);)t.index++;var e}function l(t){var e,a,n,c,l=t.max;if(t.segmentStart=t.index,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(e=t.pathValue.charCodeAt(t.index)))if(n=r[t.pathValue[t.index].toLowerCase()],t.index++,u(t),t.data=[],n){for(a=!1;;){for(c=n;c>0;c--){if(97!=(32|e)||3!==c&&4!==c?o(t):i(t),t.err.length)return;t.data.push(t.param),u(t),a=!1,t.index<l&&44===t.pathValue.charCodeAt(t.index)&&(t.index++,u(t),a=!0)}if(!a){if(t.index>=t.max)break;if(!h(t.pathValue.charCodeAt(t.index)))break}}s(t)}else s(t);else t.err="SvgPath: bad command "+t.pathValue[t.index]+" (at pos "+t.index+")"}function p(e){if(Array.isArray(e))return t(e);var r=new n(e),s=r.max;for(u(r);r.index<s&&!r.err.length;)l(r);return r.err.length?r.segments=[]:r.segments.length&&("mM".indexOf(r.segments[0][0])<0?(r.err="SvgPath: string should start with `M` or `m`",r.segments=[]):r.segments[0][0]="M"),a(r.segments)}function f(t,e){for(var a=[],n=0,r=t.length;r-2*!e>n;n+=2){var s=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?r-4==n?s[3]={x:+t[0],y:+t[1]}:r-2==n&&(s[2]={x:+t[0],y:+t[1]},s[3]={x:+t[2],y:+t[3]}):s[0]={x:+t[r-2],y:+t[r-1]}:r-4==n?s[3]=s[2]:n||(s[0]={x:+t[n],y:+t[n+1]}),a.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return a}function x(t,e,a,n,r){var s;if(null==r&&null==n&&(n=a),t=+t,e=+e,a=+a,n=+n,null!=r){var i=Math.PI/180,c=t+a*Math.cos(-n*i),o=t+a*Math.cos(-r*i);s=[["M",c,e+a*Math.sin(-n*i)],["A",a,a,0,+(r-n>180),0,o,e+a*Math.sin(-r*i)]]}else s=[["M",t,e],["m",0,-n],["a",a,n,0,1,1,0,2*n],["a",a,n,0,1,1,0,-2*n],["z"]];return s}function g(t){if(!(t=p(t))||!t.length)return[["M",0,0]];var e=[],n=0,r=0,s=0,i=0,c=0,o=t.length,h=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase();"M"===t[0][0]&&(n=+t[0][1],r=+t[0][2],s=n,i=r,c++,e[0]=["M",n,r]);for(var u=function(a){var c=[],o=t[a],u=o[0],l=[];if(e.push(c=[]),u!==u.toUpperCase())switch(c[0]=u.toUpperCase(),c[0]){case"A":c[1]=o[1],c[2]=o[2],c[3]=o[3],c[4]=o[4],c[5]=o[5],c[6]=+o[6]+n,c[7]=+o[7]+r;break;case"V":c[1]=+o[1]+r;break;case"H":c[1]=+o[1]+n;break;case"R":for(var p=2,g=(l=[n,r].concat(o.slice(1))).length;p<g;p++)l[p]=+l[p]+n,l[++p]=+l[p]+r;e.pop(),e=e.concat(f(l,h));break;case"O":e.pop(),(l=x(n,r,+o[1],+o[2])).push(l[0]),e=e.concat(l);break;case"U":e.pop(),e=e.concat(x(n,r,o[1],o[2],o[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":s=+o[1]+n,i=+o[2]+r;default:for(var v=1,y=o.length;v<y;v++)c[v]=+o[v]+(v%2?n:r)}else"R"===u?(l=[n,r].concat(o.slice(1)),e.pop(),e=e.concat(f(l,h)),c=["R"].concat(o.slice(-2))):"O"===u?(e.pop(),(l=x(n,r,+o[1],+o[2])).push(l[0]),e=e.concat(l)):"U"===u?(e.pop(),e=e.concat(x(n,r,+o[1],+o[2],+o[3])),c=["U"].concat(e[e.length-1].slice(-2))):o.map((function(t){return c.push(t)}));if("O"!==(u=u.toUpperCase()))switch(c[0]){case"Z":n=s,r=i;break;case"H":n=+c[1];break;case"V":r=+c[1];break;case"M":s=+c[c.length-2],i=+c[c.length-1];default:n=+c[c.length-2],r=+c[c.length-1]}},l=c;l<o;l++)u(l);return a(e)}function v(t){t=p(t);var e=[],n=0,r=0,s=0,i=0,c=0,o=t.length;"M"===t[0][0]&&(n=+t[0][1],r=+t[0][2],s=n,i=r,c++,e.push(["M",n,r]));for(var h=function(a){var c=void 0,o=t[a];if(e.push(c=[]),o[0]!==o[0].toLowerCase())switch(c[0]=o[0].toLowerCase(),c[0]){case"a":c[1]=o[1],c[2]=o[2],c[3]=o[3],c[4]=o[4],c[5]=o[5],c[6]=+o[6]-n,c[7]=+o[7]-r;break;case"v":c[1]=+o[1]-r;break;case"m":s=+o[1],i=+o[2];default:for(var h=1,u=o.length;h<u;h++)c[h]=+o[h]-(h%2?n:r)}else c=[],e[a]=c,"m"===o[0]&&(s=+o[1]+n,i=+o[2]+r),o.map((function(t){return e[a].push(t)}));var l=e[a].length;switch(e[a][0]){case"z":n=s,r=i;break;case"h":n+=e[a][l-1];break;case"v":r+=e[a][l-1];break;default:n+=e[a][l-2],r+=e[a][l-1]}},u=c;u<o;u++)h(u);return a(e,path.isClosed)}function y(t,e,a){return{x:t*Math.cos(a)-e*Math.sin(a),y:t*Math.sin(a)+e*Math.cos(a)}}function m(t,e,a,n,r,s,i,c,o,h){var u,l,p,f,x,g=120*Math.PI/180,v=Math.PI/180*(r||0),d=[];if(h)l=h[0],p=h[1],f=h[2],x=h[3];else{t=(u=y(t,e,-v)).x,e=u.y;var M=(t-(c=(u=y(c,o,-v)).x))/2,b=(e-(o=u.y))/2,C=M*M/(a*a)+b*b/(n*n);C>1&&(a*=C=Math.sqrt(C),n*=C);var A=a*a,k=n*n,V=(s==i?-1:1)*Math.sqrt(Math.abs((A*k-A*b*b-k*M*M)/(A*b*b+k*M*M)));f=V*a*b/n+(t+c)/2,x=V*-n*M/a+(e+o)/2,l=Math.asin((e-x)/n),p=Math.asin((o-x)/n),l=t<f?Math.PI-l:l,p=c<f?Math.PI-p:p,l<0&&(l=2*Math.PI+l),p<0&&(p=2*Math.PI+p),i&&l>p&&(l-=2*Math.PI),!i&&p>l&&(p-=2*Math.PI)}var P=p-l;if(Math.abs(P)>g){var q=p,w=c,S=o;p=l+g*(i&&p>l?1:-1),c=f+a*Math.cos(p),o=x+n*Math.sin(p),d=m(c,o,a,n,r,0,i,w,S,[p,q,f,x])}P=p-l;var U=Math.cos(l),I=Math.sin(l),L=Math.cos(p),T=Math.sin(p),R=Math.tan(P/4),Z=4/3*a*R,j=4/3*n*R,z=[t,e],H=[t+Z*I,e-j*U],O=[c+Z*T,o-j*L],D=[c,o];return H[0]=2*z[0]-H[0],H[1]=2*z[1]-H[1],h?[H,O,D].concat(d):(d=[H,O,D].concat(d).join().split(",")).map((function(t,e){return e%2?y(d[e-1],t,v).y:y(t,d[e+1],v).x}))}function d(t,e,a,n,r,s){return[1/3*t+2/3*a,1/3*e+2/3*n,1/3*r+2/3*a,1/3*s+2/3*n,r,s]}function M(t,e,a,n){return[t,e,a,n,a,n]}function b(t,e,a){var n,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(m.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===a||"S"===a?(n=2*e.x-e.bx,r=2*e.y-e.by):(n=e.x,r=e.y),t=["C",n,r].concat(t.slice(1));break;case"T":"Q"===a||"T"===a?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(d(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(d(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(M(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(M(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(M(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(M(e.x,e.y,e.X,e.Y))}return t}function C(t,e,a,n,r){t&&e&&"M"===t[r][0]&&"M"!==e[r][0]&&(e.splice(r,0,["M",n.x,n.y]),a.bx=0,a.by=0,a.x=t[r][1],a.y=t[r][2])}function A(t,e,a,n,r){if(t[r].length>7){t[r].shift();for(var s=t[r];s.length;)a[r]="A",e&&(n[r]="A"),t.splice(r++,0,["C"].concat(s.splice(0,6)));t.splice(r,1)}}function k(t,e){for(var n=g(t),r=e&&g(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=[],o=[],h="",u="",l=Math.max(n.length,r&&r.length||0),p=0;p<l;p++){n[p]&&(h=n[p][0]),"C"!==h&&(c[p]=h,p&&(u=c[p-1])),n[p]=b(n[p],s,u),"A"!==c[p]&&"C"===h&&(c[p]="C"),A(n,r,c,o,p),l=Math.max(n.length,r&&r.length||0),r&&(r[p]&&(h=r[p][0]),"C"!==h&&(o[p]=h,p&&(u=o[p-1])),r[p]=b(r[p],i,u),"A"!==o[p]&&"C"===h&&(o[p]="C"),A(r,n,o,c,p),l=Math.max(n.length,r&&r.length||0)),C(n,r,s,i,p),r&&C(r,n,i,s,p),l=Math.max(n.length,r&&r.length||0);var f=n[p],x=r&&r[p],v=f.length,y=r&&x.length;s.x=f[v-2],s.y=f[v-1],s.bx=parseFloat(f[v-4])||s.x,s.by=parseFloat(f[v-3])||s.y,i.bx=r&&(parseFloat(x[y-4])||i.x),i.by=r&&(parseFloat(x[y-3])||i.y),i.x=r&&x[y-2],i.y=r&&x[y-1]}return r?[a(n),a(r)]:a(n)}function V(t){return t.map((function(t){return"string"==typeof t?t:t.shift()+t.join(" ")})).join("")}function P(e){var a,n,r,s,i,c,o=t(e),h=o.length-2,u=0,l=0,p=[],f=[],x=o.slice(1),g=x.map((function(t,e){return l=(u=h-e)-1<0?h:u-1,p=x[u],f=x[l],i=f[f.length-2],c=f[f.length-1],a=p[3],n=p[4],r=p[1],s=p[2],[t[0],a,n,r,s,i,c]}));return[["M",g[h][5],g[h][6]]].concat(g)}function q(t){var e,a,n,r,s,i,c,o=g(t).some((function(t){return"Z"===t[0].toUpperCase()})),h=P(k(t)),u=[];return h.map((function(t,o){switch(i=t[t.length-2],c=t[t.length-1],a=t[1],n=t[2],r=t[3],s=t[4],e=3===t.length?"M":r===i&&s===c?"L":n===s===c?"H":a===r===i?"V":t[0]){case"M":u=["M",i,c];break;case"L":u=[e,i,c];break;case"V":u=[e,c];break;case"H":u=[e,i];break;case"Z":u=[e];break;case"C":default:u=[e,a,n,r,s,i,c]}return u})).concat(o?[["Z"]]:[])}function w(t){return t.replace(/(m|M)/g,"|$1").split("|").map((function(t){return t.trim()})).filter((function(t){return t}))}function S(t){var e=g(t),a=v(t);return e.map((function(t,e){return e?t.join("").length<a[e].join("").length?t:a[e]:t}))}var U=function(e){var a=p(e);return this.segments=t(a),this.pathValue=e,this};function I(t){var e=0;return t.map((function(a,n){var r,s,i,c,o,h,u,l,p,f=t[0===n?t.length-1:n-1];e+=(r=f.slice(f.length-2).concat(a.slice(1)),s=r[0],i=r[1],c=r[2],o=r[3],h=r[4],u=r[5],l=r[6],3*(((p=r[7])-i)*(c+h)-(l-s)*(o+u)+o*(s-h)-c*(i-u)+p*(h+s/3)-l*(u+i/3))/20)})),e}U.prototype.toAbsolute=function(){var e=g(this.segments);return this.segments=t(e),this},U.prototype.toRelative=function(){var e=v(this.segments);return this.segments=t(e),this},U.prototype.reverse=function(e){var a=w(this.pathValue).length>1,n=a&&w(V(g(this.segments))).map((function(t,a){return e?a?q(t):p(t):q(t)})),r=a?[].concat.apply([],n):q(this.segments);return this.segments=t(r),this},U.prototype.optimize=function(){var e=S(this.segments);return this.segments=t(e),this},U.prototype.toString=function(){return V(this.segments)};var L={clonePath:t,getDrawDirection:function(t){if(Array.isArray(t)&&t.slice(1).every((function(t){return t[0].toUpperCase()===t[0]})))return I(t)>=0;throw"getDrawDirection expects a curveArray"},getShapeArea:I,splitPath:w,roundPath:a,optimizePath:S,pathToAbsolute:g,pathToRelative:v,pathToCurve:k,pathToString:V,parsePathString:p,reverseCurve:P,reversePath:q,options:e};for(var T in L)U[T]=L[T];export default U;
