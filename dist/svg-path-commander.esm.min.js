// SVGPathCommander v0.0.6a | thednp Â© 2020 | MIT-License
function e(t){return t.map((function(t){return Array.isArray(t)?e(t):isNaN(+t)?t:+t}))}var t={decimals:3,round:1};function a(a){return t.round?a.map((function(e){return e.map((function(e,a){var n=+e,r=Math.pow(10,t.decimals);return a?n%1==0?n:(n*r>>0)/r:e}))})):e(a)}function n(e){return this.segments=[],this.pathValue=e,this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err="",this}var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function c(e){var t=e.pathValue[e.segmentStart],a=t.toLowerCase(),n=e.data;if("m"===a&&n.length>2&&(e.segments.push([t,n[0],n[1]]),n=n.slice(2),a="l",t="m"===t?"l":"L"),"r"===a)e.segments.push([t].concat(n));else for(;n.length>=r[a]&&(e.segments.push([t].concat(n.splice(0,r[a]))),r[a]););}function i(e){var t=e.pathValue.charCodeAt(e.index);return 48===t?(e.param=0,void e.index++):49===t?(e.param=1,void e.index++):void(e.err="Invalid path value")}function s(e){return e>=48&&e<=57}function o(e){var t,a=e.index,n=a,r=e.max,c=!1,i=!1,o=!1,u=!1;if(n>=r)e.err="Invalid path value";else if(43!==(t=e.pathValue.charCodeAt(n))&&45!==t||(t=++n<r?e.pathValue.charCodeAt(n):0),s(t)||46===t){if(46!==t){if(c=48===t,t=++n<r?e.pathValue.charCodeAt(n):0,c&&n<r&&t&&s(t))return void(e.err="Invalid path value");for(;n<r&&s(e.pathValue.charCodeAt(n));)n++,i=!0;t=n<r?e.pathValue.charCodeAt(n):0}if(46===t){for(u=!0,n++;s(e.pathValue.charCodeAt(n));)n++,o=!0;t=n<r?e.pathValue.charCodeAt(n):0}if(101===t||69===t){if(u&&!i&&!o)return void(e.err="Invalid path value");if(43!==(t=++n<r?e.pathValue.charCodeAt(n):0)&&45!==t||n++,!(n<r&&s(e.pathValue.charCodeAt(n))))return void(e.err="Invalid path value");for(;n<r&&s(e.pathValue.charCodeAt(n));)n++}e.index=n,e.param=+e.pathValue.slice(a,n)}else e.err="Invalid path value"}function u(e){return e>=48&&e<=57||43===e||45===e||46===e}function h(e){for(;e.index<e.max&&(10===(t=e.pathValue.charCodeAt(e.index))||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0);)e.index++;var t}function l(e){var t,a,n,s,l=e.max;if(e.segmentStart=e.index,function(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(t=e.pathValue.charCodeAt(e.index)))if(n=r[e.pathValue[e.index].toLowerCase()],e.index++,h(e),e.data=[],n){for(a=!1;;){for(s=n;s>0;s--){if(97!=(32|t)||3!==s&&4!==s?o(e):i(e),e.err.length)return;e.data.push(e.param),h(e),a=!1,e.index<l&&44===e.pathValue.charCodeAt(e.index)&&(e.index++,h(e),a=!0)}if(!a){if(e.index>=e.max)break;if(!u(e.pathValue.charCodeAt(e.index)))break}}c(e)}else c(e);else e.err="Invalid path value"}function f(e){return Array.isArray(e)&&e.every((function(e){var t=e[0].toLowerCase();return r[t]===e.length-1&&/[achlmrqstvz]/g.test(t)}))}function p(t){if(f(t))return e(t);var r=new n(t),c=r.max;for(h(r);r.index<c&&!r.err.length;)l(r);return r.err.length?r.segments=[]:r.segments.length&&("mM".indexOf(r.segments[0][0])<0?(r.err="Invalid path value",r.segments=[]):r.segments[0][0]="M"),a(r.segments)}function x(e,t){for(var a=[],n=0,r=e.length;r-2*!t>n;n+=2){var c=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?r-4==n?c[3]={x:+e[0],y:+e[1]}:r-2==n&&(c[2]={x:+e[0],y:+e[1]},c[3]={x:+e[2],y:+e[3]}):c[0]={x:+e[r-2],y:+e[r-1]}:r-4==n?c[3]=c[2]:n||(c[0]={x:+e[n],y:+e[n+1]}),a.push(["C",(-c[0].x+6*c[1].x+c[2].x)/6,(-c[0].y+6*c[1].y+c[2].y)/6,(c[1].x+6*c[2].x-c[3].x)/6,(c[1].y+6*c[2].y-c[3].y)/6,c[2].x,c[2].y])}return a}function v(e,t,a,n,r){var c;if(null==r&&null==n&&(n=a),e=+e,t=+t,a=+a,n=+n,null!=r){var i=Math.PI/180,s=e+a*Math.cos(-n*i),o=e+a*Math.cos(-r*i);c=[["M",s,t+a*Math.sin(-n*i)],["A",a,a,0,+(r-n>180),0,o,t+a*Math.sin(-r*i)]]}else c=[["M",e,t],["m",0,-n],["a",a,n,0,1,1,0,2*n],["a",a,n,0,1,1,0,-2*n],["z"]];return c}function y(e){return f(e)&&e.every((function(e){return e[0]===e[0].toUpperCase()}))}function g(t){if(y(t))return e(t);var n=[],r=0,c=0,i=0,s=0,o=0,u=(t=p(t)).length,h="",l=[],f=[],g=[],d=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase();"M"===t[0][0]&&(i=r=+t[0][1],s=c=+t[0][2],o++,n[0]=["M",r,c]);for(var m=o;m<u;m++){if(h=(l=t[m])[0],g=[],n.push(f=[]),h!==h.toUpperCase())switch(f[0]=h.toUpperCase(),f[0]){case"A":f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=+l[6]+r,f[7]=+l[7]+c;break;case"V":f[1]=+l[1]+c;break;case"H":f[1]=+l[1]+r;break;case"R":for(var M=2,C=(g=[r,c].concat(l.slice(1))).length;M<C;M++)g[M]=+g[M]+r,g[++M]=+g[M]+c;n.pop(),n=n.concat(x(g,d));break;case"O":n.pop(),(g=v(r,c,+l[1],+l[2])).push(g[0]),n=n.concat(g);break;case"U":n.pop(),n=n.concat(v(r,c,l[1],l[2],l[3])),f=["U"].concat(n[n.length-1].slice(-2));break;case"M":i=+l[1]+r,s=+l[2]+c;default:for(var b=1,A=l.length;b<A;b++)f[b]=+l[b]+(b%2?r:c)}else"R"===h?(g=[r,c].concat(l.slice(1)),n.pop(),n=n.concat(x(g,d)),f=["R"].concat(l.slice(-2))):"O"===h?(n.pop(),(g=v(r,c,+l[1],+l[2])).push(g[0]),n=n.concat(g)):"U"===h?(n.pop(),n=n.concat(v(r,c,+l[1],+l[2],+l[3])),f=["U"].concat(n[n.length-1].slice(-2))):l.map((function(e){return f.push(e)}));if("O"!==(h=h.toUpperCase()))switch(f[0]){case"Z":r=i,c=s;break;case"H":r=+f[1];break;case"V":c=+f[1];break;case"M":i=+f[f.length-2],s=+f[f.length-1];default:r=+f[f.length-2],c=+f[f.length-1]}}return a(n)}function d(e){return f(e)&&e.slice(1).every((function(e){return e[0]===e[0].toLowerCase()}))}function m(t){if(d(t))return e(t);t=p(t);var n=[],r=0,c=0,i=0,s=0,o=[],u="",h=[],l=0,f=t.length;"M"===t[0][0]&&(r=+t[0][1],c=+t[0][2],i=r,s=c,l++,n.push(["M",r,c]));for(var x=function(e){if(o=t[e],u=o[0],n.push(h=[]),u!==u.toLowerCase())switch(h[0]=u.toLowerCase(),h[0]){case"a":h[1]=o[1],h[2]=o[2],h[3]=o[3],h[4]=o[4],h[5]=o[5],h[6]=+o[6]-r,h[7]=+o[7]-c;break;case"v":h[1]=+o[1]-c;break;case"m":i=+o[1],s=+o[2];default:for(var a=1,l=o.length;a<l;a++)h[a]=+o[a]-(a%2?r:c)}else h=[],n[e]=h,"m"===u&&(i=+o[1]+r,s=+o[2]+c),o.map((function(t){return n[e].push(t)}));var f=n[e].length;switch(n[e][0]){case"z":r=i,c=s;break;case"h":r+=n[e][f-1];break;case"v":c+=n[e][f-1];break;default:r+=n[e][f-2],c+=n[e][f-1]}},v=l;v<f;v++)x(v);return a(n)}function M(e){return e.map((function(e){return e[0].concat(e.slice(1).join(" "))})).join("")}function C(e,t,a){var n,r;switch(e[0]){case"S":r=function(e,t,a,n,r){return"CS".indexOf(r)>-1?{x1:2*e-a,y1:2*t-n}:{x1:e,y1:t}}(t.x1,t.y1,t.x2,t.y2,a),t.x1=r.x1,t.y1=r.y1,e=["C",r.x1,r.y1].concat(e.slice(1));break;case"T":n=function(e,t,a,n,r){return"QT".indexOf(r)>-1?{qx:2*e-a,qy:2*t-n}:{qx:e,qy:t}}(t.x1,t.y1,t.qx,t.qy,a),t.qx=n.qx,t.qy=n.qy,e=["Q",t.qx,t.qy].concat(e.slice(1));break;case"Q":t.qx=e[1],t.qy=e[2];break;case"H":e=["L",e[1],t.y1];break;case"V":e=["L",t.x1,e[1]]}return e}function b(e){for(var t,n,r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},c=[],i="",s="",o=(e=g(e)).length,u=0;u<o;u++)e[u]&&(i=e[u][0]),c[u]=i,u&&(s=c[u-1]),e[u]=C(e[u],r,s),n=(t=e[u]).length,r.x1=+t[n-2],r.y1=+t[n-1],r.x2=+t[n-4]||r.x1,r.y2=+t[n-3]||r.y1;return a(e)}function A(e){var t=g(e),a="Z"===t.slice(-1)[0][0],n=[],r=0;return n=b(t).map((function(e,a){return r=e.length,{c:t[a][0],x:e[r-2],y:e[r-1],seg:t[a],normSeg:e}})).map((function(e,t,n){var r=e.seg,c=e.normSeg,i=t&&n[t-1],s=n[t+1]&&n[t+1],o=e.c,u=n.length,h=t?n[t-1].x:n[u-1].x,l=t?n[t-1].y:n[u-1].y,f=[];switch(o){case"M":f=a?["Z"]:[o,h,l];break;case"A":f=r.slice(0,-3).concat([1===r[5]?0:1,h,l]);break;case"C":f=s&&"S"===s.c?["S",r[1],r[2],h,l]:[o,r[3],r[4],r[1],r[2],h,l];break;case"S":f=i&&"CS".indexOf(i.c)>-1&&(!s||s&&"S"!==s.c)?["C",c[3],c[4],c[1],c[2],h,l]:[o,c[1],c[2],h,l];break;case"Q":f=s&&"T"===s.c?["T",h,l]:r.slice(-2).concat([h,l]);break;case"T":f=i&&"QT".indexOf(i.c)>-1&&(!s||s&&"T"!==s.c)?["Q",c[1],c[2],h,l]:[o,h,l];break;case"Z":f=["M",h,l];break;case"H":f=[o,h];break;case"V":f=[o,l];break;default:f=r.slice(0,-2).concat([h,l])}return f})),a?n.reverse():[n[0]].concat(n.slice(1).reverse())}function k(e){return e.replace(/(m|M)/g,"|$1").split("|").map((function(e){return e.trim()})).filter((function(e){return e}))}function q(e){var t=g(e),a=m(e);return t.map((function(e,t){return t?e.join("").length<a[t].join("").length?e:a[t]:e}))}var V=function(t){var a=p(t);return this.segments=e(a),this.pathValue=t,this};function w(e){return e.slice(1).map((function(e,t,a){var n,r,c,i,s,o,u,h,l,f=a[0===t?a.length-1:t-1];return n=f.slice(f.length-2).concat(e.slice(1)),r=n[0],c=n[1],i=n[2],s=n[3],o=n[4],u=n[5],h=n[6],3*(((l=n[7])-c)*(i+o)-(h-r)*(s+u)+s*(r-o)-i*(c-u)+l*(o+r/3)-h*(u+c/3))/20})).reduce((function(e,t){return e+t}),0)}function I(e){return f(e)&&e.slice(1).every((function(e){return"C"===e[0]}))}function P(e,t,a){if(e[a].length>7){e[a].shift();for(var n=e[a];n.length;)t[a]="A",e.splice(a++,0,["C"].concat(n.splice(0,6)));e.splice(a,1)}}function S(e,t,a){return{x:e*Math.cos(a)-t*Math.sin(a),y:e*Math.sin(a)+t*Math.cos(a)}}function T(e,t,a,n,r,c,i,s,o,u){var h,l,f,p,x,v=120*Math.PI/180,y=Math.PI/180*(r||0),g=[];if(u)l=u[0],f=u[1],p=u[2],x=u[3];else{e=(h=S(e,t,-y)).x,t=h.y;var d=(e-(s=(h=S(s,o,-y)).x))/2,m=(t-(o=h.y))/2,M=d*d/(a*a)+m*m/(n*n);M>1&&(a*=M=Math.sqrt(M),n*=M);var C=a*a,b=n*n,A=(c==i?-1:1)*Math.sqrt(Math.abs((C*b-C*m*m-b*d*d)/(C*m*m+b*d*d)));p=A*a*m/n+(e+s)/2,x=A*-n*d/a+(t+o)/2,l=Math.asin(((t-x)/n).toFixed(9)),f=Math.asin(((o-x)/n).toFixed(9)),l=e<p?Math.PI-l:l,f=s<p?Math.PI-f:f,l<0&&(l=2*Math.PI+l),f<0&&(f=2*Math.PI+f),i&&l>f&&(l-=2*Math.PI),!i&&f>l&&(f-=2*Math.PI)}var k=f-l;if(Math.abs(k)>v){var q=f,V=s,w=o;f=l+v*(i&&f>l?1:-1),s=p+a*Math.cos(f),o=x+n*Math.sin(f),g=T(s,o,a,n,r,0,i,V,w,[f,q,p,x])}k=f-l;var I=Math.cos(l),P=Math.sin(l),L=Math.cos(f),O=Math.sin(f),U=Math.tan(k/4),Q=4/3*a*U,z=4/3*n*U,R=[e,t],Z=[e+Q*P,t-z*I],j=[s+Q*O,o-z*L],D=[s,o];return Z[0]=2*R[0]-Z[0],Z[1]=2*R[1]-Z[1],u?[Z,j,D].concat(g):(g=[Z,j,D].concat(g).join().split(",")).map((function(e,t){return t%2?S(g[t-1],e,y).y:S(e,g[t+1],y).x}))}function L(e,t,a,n){return[e,t,a,n,a,n]}function O(e,t){switch("TQ".indexOf(e[0])<0&&(t.qx=t.qy=null),e[0]){case"M":t.x=e[1],t.y=e[2];break;case"A":e=["C"].concat(T.apply(0,[t.x1,t.y1].concat(e.slice(1))));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat((a=t.x1,n=t.y1,r=e[1],c=e[2],i=e[3],s=e[4],[1/3*a+2/3*r,1/3*n+2/3*c,1/3*i+2/3*r,1/3*s+2/3*c,i,s]));break;case"L":e=["C"].concat(L(t.x1,t.y1,e[1],e[2]));break;case"Z":e=["C"].concat(L(t.x1,t.y1,t.x,t.y))}var a,n,r,c,i,s;return e}V.prototype.toAbsolute=function(){var t=g(this.segments);return this.segments=e(t),this},V.prototype.toRelative=function(){var t=m(this.segments);return this.segments=e(t),this},V.prototype.reverse=function(t){this.toAbsolute();var a=k(this.pathValue).length>1&&k(this.toString()),n=a&&e(a).map((function(e,a){return t?a?A(e):p(e):A(e)})),r=a?[].concat.apply([],n):t?this.segments:A(this.segments);return this.segments=e(r),this},V.prototype.optimize=function(){var t=q(this.segments);return this.segments=e(t),this},V.prototype.toString=function(){return M(this.segments)};var U={getShapeArea:w,getDrawDirection:function(e){if(!I(e))throw"getDrawDirection expects a curveArray";return w(e)>=0},clonePath:e,splitPath:k,isPathArray:f,isCurveArray:I,isAbsoluteArray:y,isRelativeArray:d,roundPath:a,optimizePath:q,pathToAbsolute:g,pathToRelative:m,pathToCurve:function(t){if(I(t))return e(t);for(var n,r,c={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},i=[],s="",o=(t=b(t)).length,u=0;u<o;u++)t[u]&&(s=t[u][0]),"C"!==s&&(i[u]=s),t[u]=O(t[u],c),"A"!==i[u]&&"C"===s&&(i[u]="C"),P(t,i,u),o=t.length,r=(n=t[u]).length,c.x1=+n[r-2],c.y1=+n[r-1],c.x2=+n[r-4]||c.x1,c.y2=+n[r-3]||c.y1;return a(t)},pathToString:M,parsePathString:p,reverseCurve:function(e){var t=e.slice(1).map((function(t,a,n){return a?n[a-1].slice(-2).concat(t.slice(1)):e[0].slice(1).concat(t.slice(1))})).map((function(e){return e.map((function(t,a){return e[e.length-a-2*(1-a%2)]}))})).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map((function(e){return["C"].concat(e.slice(2))})))},reversePath:A,normalizePath:b,options:t};for(var Q in U)V[Q]=U[Q];export default V;
