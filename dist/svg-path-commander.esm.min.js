// SVGPathCommander v0.0.2 | thednp Â© 2020 | MIT-License
function e(t){return t.map((function(t){return Array.isArray(t)?e(t):isNaN(+t)?t:+t}))}var t={decimals:3,round:1};function a(a){return t.round?a.map((function(e){return e.map((function(e,a){var n=+e,r=Math.pow(10,t.decimals);return a?n%1==0?n:(n*r>>0)/r:e}))})):e(a)}function n(e){return this.segments=[],this.pathValue=e,this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err="",this}var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function i(e){var t=e.pathValue[e.segmentStart],a=t.toLowerCase(),n=e.data;if("m"===a&&n.length>2&&(e.segments.push([t,n[0],n[1]]),n=n.slice(2),a="l",t="m"===t?"l":"L"),"r"===a)e.segments.push([t].concat(n));else for(;n.length>=r[a]&&(e.segments.push([t].concat(n.splice(0,r[a]))),r[a]););}function c(e){var t=e.pathValue.charCodeAt(e.index);return 48===t?(e.param=0,void e.index++):49===t?(e.param=1,void e.index++):void(e.err="Invalid path value")}function s(e){return e>=48&&e<=57}function o(e){var t,a=e.index,n=a,r=e.max,i=!1,c=!1,o=!1,h=!1;if(n>=r)e.err="Invalid path value";else if(43!==(t=e.pathValue.charCodeAt(n))&&45!==t||(t=++n<r?e.pathValue.charCodeAt(n):0),s(t)||46===t){if(46!==t){if(i=48===t,t=++n<r?e.pathValue.charCodeAt(n):0,i&&n<r&&t&&s(t))return void(e.err="Invalid path value");for(;n<r&&s(e.pathValue.charCodeAt(n));)n++,c=!0;t=n<r?e.pathValue.charCodeAt(n):0}if(46===t){for(h=!0,n++;s(e.pathValue.charCodeAt(n));)n++,o=!0;t=n<r?e.pathValue.charCodeAt(n):0}if(101===t||69===t){if(h&&!c&&!o)return void(e.err="Invalid path value");if(43!==(t=++n<r?e.pathValue.charCodeAt(n):0)&&45!==t||n++,!(n<r&&s(e.pathValue.charCodeAt(n))))return void(e.err="Invalid path value");for(;n<r&&s(e.pathValue.charCodeAt(n));)n++}e.index=n,e.param=+e.pathValue.slice(a,n)}else e.err="Invalid path value"}function h(e){return e>=48&&e<=57||43===e||45===e||46===e}function u(e){for(;e.index<e.max&&(10===(t=e.pathValue.charCodeAt(e.index))||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0);)e.index++;var t}function l(e){var t,a,n,s,l=e.max;if(e.segmentStart=e.index,function(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(t=e.pathValue.charCodeAt(e.index)))if(n=r[e.pathValue[e.index].toLowerCase()],e.index++,u(e),e.data=[],n){for(a=!1;;){for(s=n;s>0;s--){if(97!=(32|t)||3!==s&&4!==s?o(e):c(e),e.err.length)return;e.data.push(e.param),u(e),a=!1,e.index<l&&44===e.pathValue.charCodeAt(e.index)&&(e.index++,u(e),a=!0)}if(!a){if(e.index>=e.max)break;if(!h(e.pathValue.charCodeAt(e.index)))break}}i(e)}else i(e);else e.err="Invalid path value"}function f(t){if(Array.isArray(t)&&Array.isArray(t[0]))return e(t);var r=new n(t),i=r.max;for(u(r);r.index<i&&!r.err.length;)l(r);return r.err.length?r.segments=[]:r.segments.length&&("mM".indexOf(r.segments[0][0])<0?(r.err="Invalid path value",r.segments=[]):r.segments[0][0]="M"),a(r.segments)}function x(e,t){for(var a=[],n=0,r=e.length;r-2*!t>n;n+=2){var i=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?r-4==n?i[3]={x:+e[0],y:+e[1]}:r-2==n&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[r-2],y:+e[r-1]}:r-4==n?i[3]=i[2]:n||(i[0]={x:+e[n],y:+e[n+1]}),a.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return a}function v(e,t,a,n,r){var i;if(null==r&&null==n&&(n=a),e=+e,t=+t,a=+a,n=+n,null!=r){var c=Math.PI/180,s=e+a*Math.cos(-n*c),o=e+a*Math.cos(-r*c);i=[["M",s,t+a*Math.sin(-n*c)],["A",a,a,0,+(r-n>180),0,o,t+a*Math.sin(-r*c)]]}else i=[["M",e,t],["m",0,-n],["a",a,n,0,1,1,0,2*n],["a",a,n,0,1,1,0,-2*n],["z"]];return i}function g(e){if(!(e=f(e))||!e.length)return[["M",0,0]];var t=[],n=0,r=0,i=0,c=0,s=0,o=e.length,h=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase();"M"===e[0][0]&&(n=+e[0][1],r=+e[0][2],i=n,c=r,s++,t[0]=["M",n,r]);for(var u=function(a){var s=[],o=e[a],u=o[0],l=[];if(t.push(s=[]),u!==u.toUpperCase())switch(s[0]=u.toUpperCase(),s[0]){case"A":s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=+o[6]+n,s[7]=+o[7]+r;break;case"V":s[1]=+o[1]+r;break;case"H":s[1]=+o[1]+n;break;case"R":for(var p=2,f=(l=[n,r].concat(o.slice(1))).length;p<f;p++)l[p]=+l[p]+n,l[++p]=+l[p]+r;t.pop(),t=t.concat(x(l,h));break;case"O":t.pop(),(l=v(n,r,+o[1],+o[2])).push(l[0]),t=t.concat(l);break;case"U":t.pop(),t=t.concat(v(n,r,o[1],o[2],o[3])),s=["U"].concat(t[t.length-1].slice(-2));break;case"M":i=+o[1]+n,c=+o[2]+r;default:for(var g=1,y=o.length;g<y;g++)s[g]=+o[g]+(g%2?n:r)}else"R"===u?(l=[n,r].concat(o.slice(1)),t.pop(),t=t.concat(x(l,h)),s=["R"].concat(o.slice(-2))):"O"===u?(t.pop(),(l=v(n,r,+o[1],+o[2])).push(l[0]),t=t.concat(l)):"U"===u?(t.pop(),t=t.concat(v(n,r,+o[1],+o[2],+o[3])),s=["U"].concat(t[t.length-1].slice(-2))):o.map((function(e){return s.push(e)}));if("O"!==(u=u.toUpperCase()))switch(s[0]){case"Z":n=i,r=c;break;case"H":n=+s[1];break;case"V":r=+s[1];break;case"M":i=+s[s.length-2],c=+s[s.length-1];default:n=+s[s.length-2],r=+s[s.length-1]}},l=s;l<o;l++)u(l);return a(t)}function y(e){e=f(e);var t=[],n=0,r=0,i=0,c=0,s=0,o=e.length;"M"===e[0][0]&&(n=+e[0][1],r=+e[0][2],i=n,c=r,s++,t.push(["M",n,r]));for(var h=function(a){var s=void 0,o=e[a];if(t.push(s=[]),o[0]!==o[0].toLowerCase())switch(s[0]=o[0].toLowerCase(),s[0]){case"a":s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=+o[6]-n,s[7]=+o[7]-r;break;case"v":s[1]=+o[1]-r;break;case"m":i=+o[1],c=+o[2];default:for(var h=1,u=o.length;h<u;h++)s[h]=+o[h]-(h%2?n:r)}else s=[],t[a]=s,"m"===o[0]&&(i=+o[1]+n,c=+o[2]+r),o.map((function(e){return t[a].push(e)}));var l=t[a].length;switch(t[a][0]){case"z":n=i,r=c;break;case"h":n+=t[a][l-1];break;case"v":r+=t[a][l-1];break;default:n+=t[a][l-2],r+=t[a][l-1]}},u=s;u<o;u++)h(u);return a(t)}function d(e){return e.map((function(e){return"string"==typeof e?e:e.shift()+e.join(" ")})).join("")}function m(t){var a,n,r,i,c,s,o=e(t),h=o.length-2,u=0,l=0,p=[],f=[],x=o.slice(1),v=x.map((function(e,t){return l=(u=h-t)-1<0?h:u-1,p=x[u],f=x[l],c=f[f.length-2],s=f[f.length-1],a=p[3],n=p[4],r=p[1],i=p[2],["C",a,n,r,i,c,s]}));return[["M",c,s]].concat(v)}function M(e,t,a){return{x:e*Math.cos(a)-t*Math.sin(a),y:e*Math.sin(a)+t*Math.cos(a)}}function C(e,t,a,n,r,i,c,s,o,h){var u,l,p,f,x,v=120*Math.PI/180,g=Math.PI/180*(r||0),y=[];if(h)l=h[0],p=h[1],f=h[2],x=h[3];else{e=(u=M(e,t,-g)).x,t=u.y;var d=(e-(s=(u=M(s,o,-g)).x))/2,m=(t-(o=u.y))/2,b=d*d/(a*a)+m*m/(n*n);b>1&&(a*=b=Math.sqrt(b),n*=b);var A=a*a,k=n*n,V=(i==c?-1:1)*Math.sqrt(Math.abs((A*k-A*m*m-k*d*d)/(A*m*m+k*d*d)));f=V*a*m/n+(e+s)/2,x=V*-n*d/a+(t+o)/2,l=Math.asin(((t-x)/n).toFixed(9)),p=Math.asin(((o-x)/n).toFixed(9)),l=e<f?Math.PI-l:l,p=s<f?Math.PI-p:p,l<0&&(l=2*Math.PI+l),p<0&&(p=2*Math.PI+p),c&&l>p&&(l-=2*Math.PI),!c&&p>l&&(p-=2*Math.PI)}var q=p-l;if(Math.abs(q)>v){var I=p,w=s,P=o;p=l+v*(c&&p>l?1:-1),s=f+a*Math.cos(p),o=x+n*Math.sin(p),y=C(s,o,a,n,r,0,c,w,P,[p,I,f,x])}q=p-l;var S=Math.cos(l),U=Math.sin(l),L=Math.cos(p),T=Math.sin(p),R=Math.tan(q/4),j=4/3*a*R,z=4/3*n*R,H=[e,t],O=[e+j*U,t-z*S],Z=[s+j*T,o-z*L],D=[s,o];return O[0]=2*H[0]-O[0],O[1]=2*H[1]-O[1],h?[O,Z,D].concat(y):(y=[O,Z,D].concat(y).join().split(",")).map((function(e,t){return t%2?M(y[t-1],e,g).y:M(e,y[t+1],g).x}))}function b(e,t,a,n,r,i){return[1/3*e+2/3*a,1/3*t+2/3*n,1/3*r+2/3*a,1/3*i+2/3*n,r,i]}function A(e,t,a,n){return[e,t,a,n,a,n]}function k(e,t,a){var n,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(C.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===a||"S"===a?(n=2*t.x-t.bx,r=2*t.y-t.by):(n=t.x,r=t.y),e=["C",n,r].concat(e.slice(1));break;case"T":"Q"===a||"T"===a?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(b(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(b(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(A(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(A(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(A(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(A(t.x,t.y,t.X,t.Y))}return e}function V(e,t,a,n,r,i){e&&t&&"M"===e[r][0]&&"M"!==t[r][0]&&(t.splice(r,0,["M",n.x,n.y]),a.bx=0,a.by=0,a.x=e[r][1],a.y=e[r][2],Math.max(p.length,p2&&p2.length||0))}function q(e,t,a,n,r,i){if(e[r].length>7){e[r].shift();for(var c=e[r];c.length;)a[r]="A",t&&(n[r]="A"),e.splice(r++,0,["C"].concat(c.splice(0,6)));e.splice(r,1),Math.max(e.length,t&&t.length||0)}}function I(e,t){for(var n=g(e),r=t&&g(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],o=[],h="",u="",l=(Math.max(n.length,r&&r.length||0),0);l<Math.max(n.length,r&&r.length||0);l++){n[l]&&(h=n[l][0]),"C"!==h&&(s[l]=h,l&&(u=s[l-1])),n[l]=k(n[l],i,u),"A"!==s[l]&&"C"===h&&(s[l]="C"),q(n,r,s,o,l),r&&(r[l]&&(h=r[l][0]),"C"!==h&&(o[l]=h,l&&(u=o[l-1])),r[l]=k(r[l],c,u),"A"!==o[l]&&"C"===h&&(o[l]="C"),q(r,n,o,s,l)),V(n,r,i,c,l),V(r,n,c,i,l);var p=n[l],f=r&&r[l],x=p.length,v=r&&f.length;i.x=+p[x-2],i.y=+p[x-1],i.bx=+p[x-4]||i.x,i.by=+p[x-3]||i.y,c.bx=r&&(+f[v-4]||c.x),c.by=r&&(+f[v-3]||c.y),c.x=r&&f[v-2],c.y=r&&f[v-1]}return r?[a(n),a(r)]:a(n)}function w(e){var t,a,n,r,i,c,s,o,h,u=g(e).some((function(e){return"Z"===e[0].toUpperCase()})),l=m(I(e)),p=[],f=[];return l.map((function(e,u){switch(c=e[e.length-2],s=e[e.length-1],a=e[1],n=e[2],r=e[3],i=e[4],f=u-1<0?l[l.length-1]:l[u-1],o=f[f.length-2],h=f[f.length-1],t=3===e.length?"M":h===s&&h===n?"H":o===c&&o===a?"V":o===a&&h===n&&c===r&&s===i?"L":e[0]){case"M":p=["M",c,s];break;case"L":p=[t,c,s];break;case"V":p=[t,s];break;case"H":p=[t,c];break;case"C":p=[t,a,n,r,i,c,s];break;default:p=[t]}return p})).concat(u?[["Z"]]:[])}function P(e){return e.replace(/(m|M)/g,"|$1").split("|").map((function(e){return e.trim()})).filter((function(e){return e}))}function S(e){var t=g(e),a=y(e);return t.map((function(e,t){return t?e.join("").length<a[t].join("").length?e:a[t]:e}))}var U=function(t){var a=f(t);return this.segments=e(a),this.pathValue=t,this};function L(e){var t,a=e.slice(1);return a.map((function(e,n){return t=a[0===n?a.length-1:n-1],r=t.slice(t.length-2).concat(e.slice(1)),i=r[0],c=r[1],s=r[2],o=r[3],h=r[4],u=r[5],l=r[6],3*(((p=r[7])-c)*(s+h)-(l-i)*(o+u)+o*(i-h)-s*(c-u)+p*(h+i/3)-l*(u+c/3))/20;var r,i,c,s,o,h,u,l,p})).reduce((function(e,t){return e+t}),0)}U.prototype.toAbsolute=function(){var t=g(this.segments);return this.segments=e(t),this},U.prototype.toRelative=function(){var t=y(this.segments);return this.segments=e(t),this},U.prototype.reverse=function(t){this.toAbsolute();var a=P(this.pathValue).length>1&&P(this.toString()),n=a&&e(a).map((function(e,a){return t?a?w(e):f(e):w(e)})),r=a?[].concat.apply([],n):w(this.segments);return this.segments=e(r),this},U.prototype.optimize=function(){var t=S(this.segments);return this.segments=e(t),this},U.prototype.toString=function(){return d(this.segments)};var T={clonePath:e,getDrawDirection:function(e){if(Array.isArray(e)&&e.slice(1).every((function(e){return"C"===e[0]})))return L(e)>=0;throw"getDrawDirection expects a curveArray"},getShapeArea:L,splitPath:P,roundPath:a,optimizePath:S,pathToAbsolute:g,pathToRelative:y,pathToCurve:I,pathToString:d,parsePathString:f,reverseCurve:m,reversePath:w,options:t};for(var R in T)U[R]=T[R];export default U;
