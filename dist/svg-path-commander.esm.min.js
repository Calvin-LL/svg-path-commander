// SVGPathCommander v0.0.1-c | thednp Â© 2020 | MIT-License
function t(e){return e.map((function(e){return Array.isArray(e)?t(e):isNaN(+e)?e:+e}))}var e={decimals:3,round:1};function a(a){return e.round?a.map((function(t){return t.map((function(t,a){var r=+t,n=Math.pow(10,e.decimals);return a?r%1==0?r:(r*n>>0)/n:t}))})):t(a)}function r(t){return this.segments=[],this.isClosed=0,this.isAbsolute=0,this.pathValue=t,this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err="",this}var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function s(t){return t>=48&&t<=57}function i(t){return t>=48&&t<=57||43===t||45===t||46===t}function o(t){for(;t.index<t.max&&(10===(e=t.pathValue.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0);)t.index++;var e}function c(t){var e=t.pathValue.charCodeAt(t.index);return 48===e?(t.param=0,void t.index++):49===e?(t.param=1,void t.index++):void(t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")")}function h(t){var e,a=t.index,r=a,n=t.max,i=!1,o=!1,c=!1,h=!1;if(r>=n)t.err="SvgPath: missed param (at pos "+r+")";else if(43!==(e=t.pathValue.charCodeAt(r))&&45!==e||(e=++r<n?t.pathValue.charCodeAt(r):0),s(e)||46===e){if(46!==e){if(i=48===e,e=++r<n?t.pathValue.charCodeAt(r):0,i&&r<n&&e&&s(e))return void(t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+a+")");for(;r<n&&s(t.pathValue.charCodeAt(r));)r++,o=!0;e=r<n?t.pathValue.charCodeAt(r):0}if(46===e){for(h=!0,r++;s(t.pathValue.charCodeAt(r));)r++,c=!0;e=r<n?t.pathValue.charCodeAt(r):0}if(101===e||69===e){if(h&&!o&&!c)return void(t.err="SvgPath: invalid float exponent (at pos "+r+")");if(43!==(e=++r<n?t.pathValue.charCodeAt(r):0)&&45!==e||r++,!(r<n&&s(t.pathValue.charCodeAt(r))))return void(t.err="SvgPath: invalid float exponent (at pos "+r+")");for(;r<n&&s(t.pathValue.charCodeAt(r));)r++}t.index=r,t.param=parseFloat(t.pathValue.slice(a,r))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+r+")"}function u(t){var e=t.pathValue[t.segmentStart],a=e.toLowerCase(),r=t.data;if("m"===a&&r.length>2&&(t.segments.push([e,r[0],r[1]]),r=r.slice(2),a="l",e="m"===e?"l":"L"),"r"===a)t.segments.push([e].concat(r));else for(;r.length>=n[a]&&(t.segments.push([e].concat(r.splice(0,n[a]))),n[a]););}function l(t){var e,a,r,s,l,p=t.max;if(t.segmentStart=t.index,e=t.pathValue.charCodeAt(t.index),a=97==(32|e),function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(e)){if(s=n[t.pathValue[t.index].toLowerCase()],t.index++,o(t),t.data=[],!s)return t.isClosed=1,void u(t);for(r=!1;;){for(l=s;l>0;l--){if(!a||3!==l&&4!==l?h(t):c(t),t.err.length)return;t.data.push(t.param),o(t),r=!1,t.index<p&&44===t.pathValue.charCodeAt(t.index)&&(t.index++,o(t),r=!0)}if(!r){if(t.index>=t.max)break;if(!i(t.pathValue.charCodeAt(t.index)))break}}u(t)}else t.err="SvgPath: bad command "+t.pathValue[t.index]+" (at pos "+t.index+")"}function p(e){if(Array.isArray(e))return t(e);var n=new r(e),s=n.max;for(o(n);n.index<s&&!n.err.length;)l(n);return n.err.length?n.segments=[]:n.segments.length&&("mM".indexOf(n.segments[0][0])<0?(n.err="SvgPath: string should start with `M` or `m`",n.segments=[]):n.segments[0][0]="M"),a(n.segments)}function f(t,e){for(var a=[],r=0,n=t.length;n-2*!e>r;r+=2){var s=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?n-4==r?s[3]={x:+t[0],y:+t[1]}:n-2==r&&(s[2]={x:+t[0],y:+t[1]},s[3]={x:+t[2],y:+t[3]}):s[0]={x:+t[n-2],y:+t[n-1]}:n-4==r?s[3]=s[2]:r||(s[0]={x:+t[r],y:+t[r+1]}),a.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return a}function x(t,e,a,r,n){var s;if(null==n&&null==r&&(r=a),t=+t,e=+e,a=+a,r=+r,null!=n){var i=Math.PI/180,o=t+a*Math.cos(-r*i),c=t+a*Math.cos(-n*i);s=[["M",o,e+a*Math.sin(-r*i)],["A",a,a,0,+(n-r>180),0,c,e+a*Math.sin(-n*i)]]}else s=[["M",t,e],["m",0,-r],["a",a,r,0,1,1,0,2*r],["a",a,r,0,1,1,0,-2*r],["z"]];return s}function g(t){if(!(t=p(t))||!t.length)return[["M",0,0]];var e=[],r=0,n=0,s=0,i=0,o=0,c=t.length,h=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase();"M"===t[0][0]&&(r=+t[0][1],n=+t[0][2],s=r,i=n,o++,e[0]=["M",r,n]);for(var u=function(a){var o=void 0,c=t[a],u=c[0];if(e.push(o=[]),u!==u.toUpperCase())switch(o[0]=u.toUpperCase(),o[0]){case"A":o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=+c[6]+r,o[7]=+c[7]+n;break;case"V":o[1]=+c[1]+n;break;case"H":o[1]=+c[1]+r;break;case"R":for(var l=[r,n].concat(c.slice(1)),p=2,g=l.length;p<g;p++)l[p]=+l[p]+r,l[++p]=+l[p]+n;e.pop(),e=e.concat(f(l,h));break;case"O":e.pop(),(l=x(r,n,+c[1],+c[2])).push(l[0]),e=e.concat(l);break;case"U":e.pop(),e=e.concat(x(r,n,c[1],c[2],c[3])),o=["U"].concat(e[e.length-1].slice(-2));break;case"M":s=+c[1]+r,i=+c[2]+n;default:for(var d=1,v=c.length;d<v;d++)o[d]=+c[d]+(d%2?r:n)}else"R"===u?(dots=[r,n].concat(c.slice(1)),e.pop(),e=e.concat(f(dots,h)),o=["R"].concat(c.slice(-2))):"O"===u?(e.pop(),dots=x(r,n,+c[1],+c[2]),dots.push(dots[0]),e=e.concat(dots)):"U"===u?(e.pop(),e=e.concat(x(r,n,+c[1],+c[2],+c[3])),o=["U"].concat(e[e.length-1].slice(-2))):c.map((function(t){return o.push(t)}));if("O"!==(u=u.toUpperCase()))switch(o[0]){case"Z":r=s,n=i;break;case"H":r=+o[1];break;case"V":n=+o[1];break;case"M":s=+o[o.length-2],i=+o[o.length-1];default:r=+o[o.length-2],n=+o[o.length-1]}},l=o;l<c;l++)u(l);return a(e)}function d(t){t=p(t);var e=[],r=0,n=0,s=0,i=0,o=0,c=t.length;"M"===t[0][0]&&(r=+t[0][1],n=+t[0][2],s=r,i=n,o++,e.push(["M",r,n]));for(var h=function(a){var o=void 0,c=t[a];if(e.push(o=[]),c[0]!==c[0].toLowerCase())switch(o[0]=c[0].toLowerCase(),o[0]){case"a":o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=+c[6]-r,o[7]=+c[7]-n;break;case"v":o[1]=+c[1]-n;break;case"m":s=+c[1],i=+c[2];default:for(var h=1,u=c.length;h<u;h++)o[h]=+c[h]-(h%2?r:n)}else o=[],e[a]=o,"m"===c[0]&&(s=+c[1]+r,i=+c[2]+n),c.map((function(t){return e[a].push(t)}));var l=e[a].length;switch(e[a][0]){case"z":r=s,n=i;break;case"h":r+=e[a][l-1];break;case"v":n+=e[a][l-1];break;default:r+=e[a][l-2],n+=e[a][l-1]}},u=o;u<c;u++)h(u);return a(e,path.isClosed)}function v(t,e,a){return{x:t*Math.cos(a)-e*Math.sin(a),y:t*Math.sin(a)+e*Math.cos(a)}}function y(t,e,a,r,n,s,i,o,c,h){var u,l,p,f,x,g=120*Math.PI/180,d=Math.PI/180*(n||0),m=[];if(h)l=h[0],p=h[1],f=h[2],x=h[3];else{t=(u=v(t,e,-d)).x,e=u.y;var M=(t-(o=(u=v(o,c,-d)).x))/2,b=(e-(c=u.y))/2,C=M*M/(a*a)+b*b/(r*r);C>1&&(a*=C=Math.sqrt(C),r*=C);var A=a*a,k=r*r,V=(s==i?-1:1)*Math.sqrt(Math.abs((A*k-A*b*b-k*M*M)/(A*b*b+k*M*M)));f=V*a*b/r+(t+o)/2,x=V*-r*M/a+(e+c)/2,l=Math.asin((e-x)/r),p=Math.asin((c-x)/r),l=t<f?Math.PI-l:l,p=o<f?Math.PI-p:p,l<0&&(l=2*Math.PI+l),p<0&&(p=2*Math.PI+p),i&&l>p&&(l-=2*Math.PI),!i&&p>l&&(p-=2*Math.PI)}var P=p-l;if(Math.abs(P)>g){var q=p,w=o,S=c;p=l+g*(i&&p>l?1:-1),o=f+a*Math.cos(p),c=x+r*Math.sin(p),m=y(o,c,a,r,n,0,i,w,S,[p,q,f,x])}P=p-l;var U=Math.cos(l),I=Math.sin(l),L=Math.cos(p),R=Math.sin(p),T=Math.tan(P/4),Z=4/3*a*T,z=4/3*r*T,F=[t,e],H=[t+Z*I,e-z*U],O=[o+Z*R,c-z*L],D=[o,c];return H[0]=2*F[0]-H[0],H[1]=2*F[1]-H[1],h?[H,O,D].concat(m):(m=[H,O,D].concat(m).join().split(",")).map((function(t,e){return e%2?v(m[e-1],t,d).y:v(t,m[e+1],d).x}))}function m(t,e,a,r,n,s){return[1/3*t+2/3*a,1/3*e+2/3*r,1/3*n+2/3*a,1/3*s+2/3*r,n,s]}function M(t,e,a,r){return[t,e,a,r,a,r]}function b(t,e,a){var r,n;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(y.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==a||"S"==a?(r=2*e.x-e.bx,n=2*e.y-e.by):(r=e.x,n=e.y),t=["C",r,n].concat(t.slice(1));break;case"T":"Q"==a||"T"==a?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(m(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(m(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(M(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(M(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(M(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(M(e.x,e.y,e.X,e.Y))}return t}function C(t,e,a,r,n){t&&e&&"M"===t[n][0]&&"M"!==e[n][0]&&(e.splice(n,0,["M",r.x,r.y]),a.bx=0,a.by=0,a.x=t[n][1],a.y=t[n][2])}function A(t,e,a,r,n){if(t[n].length>7){t[n].shift();for(var s=t[n];s.length;)a[n]="A",e&&(r[n]="A"),t.splice(n++,0,["C"].concat(s.splice(0,6)));t.splice(n,1)}}function k(t,e){for(var r=g(t),n=e&&g(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],c=[],h="",u="",l=Math.max(r.length,n&&n.length||0),p=0;p<l;p++){r[p]&&(h=r[p][0]),"C"!==h&&(o[p]=h,p&&(u=o[p-1])),r[p]=b(r[p],s,u),"A"!==o[p]&&"C"===h&&(o[p]="C"),A(r,n,o,c,p),l=Math.max(r.length,n&&n.length||0),n&&(n[p]&&(h=n[p][0]),"C"!==h&&(c[p]=h,p&&(u=c[p-1])),n[p]=b(n[p],i,u),"A"!==c[p]&&"C"===h&&(c[p]="C"),A(n,r,c,o,p),l=Math.max(r.length,n&&n.length||0)),C(r,n,s,i,p),n&&C(n,r,i,s,p),l=Math.max(r.length,n&&n.length||0);var f=r[p],x=n&&n[p],d=f.length,v=n&&x.length;s.x=f[d-2],s.y=f[d-1],s.bx=parseFloat(f[d-4])||s.x,s.by=parseFloat(f[d-3])||s.y,i.bx=n&&(parseFloat(x[v-4])||i.x),i.by=n&&(parseFloat(x[v-3])||i.y),i.x=n&&x[v-2],i.y=n&&x[v-1]}return n?[a(r),a(n)]:a(r)}function V(t){return t.map((function(t){return"string"==typeof t?t:t.shift()+t.join(",")})).join(" ")}function P(e){var a,r,n,s,i,o,c=t(e),h=c.length-2,u=0,l=0,p=[],f=[],x=c.slice(1),g=x.map((function(t,e){return l=(u=h-e)-1<0?h:u-1,p=x[u],f=x[l],i=f[f.length-2],o=f[f.length-1],a=p[3],r=p[4],n=p[1],s=p[2],[t[0],a,r,n,s,i,o]}));return[["M",g[h][5],g[h][6]]].concat(g)}function q(t){var e,a,r,n,s,i,o,c=g(t).some((function(t){return"Z"===t[0].toUpperCase()})),h=P(k(t)),u=[];return h.map((function(t,c){switch(i=t[t.length-2],o=t[t.length-1],a=t[1],r=t[2],n=t[3],s=t[4],e=3===t.length?"M":r===s===o?"H":a===n===i?"V":n===i&&s===o?"L":t[0]){case"M":u=["M",i,o];break;case"L":u=[e,i,o];break;case"V":u=[e,o];break;case"H":u=[e,i];break;case"Z":u=[e];break;case"C":default:u=[e,a,r,n,s,i,o]}return u})).concat(c?[["Z"]]:[])}function w(t){return t.replace(/(m|M)/g,"|$1").split("|").map((function(t){return t.trim()})).filter((function(t){return t}))}var S=function(e){var a=p(e);return this.segments=t(a),this.pathValue=e,this};function U(t){var e=t[0],a=t[1],r=t[2],n=t[3],s=t[4],i=t[5],o=t[6],c=t[7];return 3*((c-a)*(r+s)-(o-e)*(n+i)+n*(e-s)-r*(a-i)+c*(s+e/3)-o*(i+a/3))/20}function I(t){var e=0;return t.map((function(a,r){var n=t[0===r?t.length-1:r-1];e+=U(n.slice(n.length-2).concat(a.slice(1)))})),e}S.prototype.toAbsolute=function(){var e=g(this.segments);return this.segments=t(e),this},S.prototype.toRelative=function(){var e=d(this.segments);return this.segments=t(e),this},S.prototype.reverse=function(e){var a=w(this.pathValue).length>1,r=a&&w(V(g(this.segments))).map((function(t,a){return e?a?q(t):p(t):q(t)})),n=a?[].concat.apply([],r):q(this.segments);return this.segments=t(n),this},S.prototype.optimize=function(){var e,a,r,n,s,i=(e=this.segments,a=e.isAbsolute?t(e):g(e),r=d(e),n=V(t(a)),s=V(t(r)),n.length<s.length?t(a):t(r));return this.segments=t(i),this},S.prototype.toString=function(){return V(this.segments)};var L={a2c:y,catmullRom2bezier:f,clonePath:t,ellipsePath:x,fixArc:A,fixM:C,getArea:U,getDrawDirection:function(t){if(Array.isArray(t)&&t.slice(1).every((function(t){return t[0].toUpperCase()===t[0]})))return I(t)>=0;throw"getDrawDirection expects a curveArray"},getShapeArea:I,l2c:M,q2c:m,rotateVector:v,splitPath:w,pathToAbsolute:g,pathToRelative:d,pathToCurve:k,pathToString:V,parsePathString:p,processPath:b,reverseCurve:P,reversePath:q,options:e};for(var R in L)S[R]=L[R];export default S;
