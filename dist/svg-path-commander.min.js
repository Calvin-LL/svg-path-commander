// SVGPathCommander v0.0.1a | thednp Â© 2020 | MIT-License
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SVGPathCommander=e()}(this,(function(){"use strict";function t(e){return e.map((function(e){return Array.isArray(e)?t(e):isNaN(+e)?e:+e}))}var e={decimals:3,round:1};function n(t){t.isClosed="isClosed"in t?t.isClosed:"Z"===t[t.length-1][0].toUpperCase(),t.isAbsolute="isAbsolute"in t?t.isClosed:t.every((function(t){return t[0]===t[0].toUpperCase()}))}function a(a){var r=e.round?a.map((function(t){return t.map((function(t,n){var a=+t,r=Math.pow(10,e.decimals);return n?a%1==0?a:(a*r>>0)/r:t}))})):t(a);return n(r),r}function r(e){if(!e)return null;if(Array.isArray(e))return t(e);var n="\\"+"x09|x0a|x0b|x0c|x0d|x20|xa0|u1680|u180e|u2000|u2001|u2002|u2003|u2004|u2005|u2006|u2007|u2008|u2009|u200a|u202f|u205f|u3000|u2028|u2029".split("|").join("\\"),r=new RegExp("([a-z])["+n+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+n+"]*,?["+n+"]*)+)","ig"),s=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+n+"]*,?["+n+"]*","ig"),c={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},o=[];return e.replace(r,(function(t,e,n){var a=[],r=e.toLowerCase();if(n.replace(s,(function(t,e){return e&&a.push(e)})),a=a.filter((function(t){return t})),"a"!==r&&a.length<c[r])throw Error(r+" path command requires "+c[r]+" coordinates, only "+a.length+" given: ["+a.join(",")+"]");if("m"===r&&a.length>2&&(o.push([e].concat(a.splice(0,2))),r="l",e="m"==e?"l":"L"),"o"===r&&1===a.length&&o.push([e,a[0]]),"r"===r&&o.push([e].concat(a)),"a"===r&&a.length<c[r]){for(var i=0,u=a.length;i<u;i++)(3===i||4===i)&&a[i].length>1&&(u=(a=a.slice(0,i).concat(a[i][0]).concat(a[i].slice(1).replace(/(\-\d|\-\.\d|\.\d*(?=\.))/g,"|$1").split("|"),a.slice(i+1)).filter((function(t){return t}))).length);a.length===c[r]&&o.push([e].concat(a.splice(0,c[r])))}else for(;a.length>=c[r]&&(o.push([e].concat(a.splice(0,c[r]))),c[r]););})),a(o)}function s(t,e){for(var n=[],a=0,r=t.length;r-2*!e>a;a+=2){var s=[{x:+t[a-2],y:+t[a-1]},{x:+t[a],y:+t[a+1]},{x:+t[a+2],y:+t[a+3]},{x:+t[a+4],y:+t[a+5]}];e?a?r-4==a?s[3]={x:+t[0],y:+t[1]}:r-2==a&&(s[2]={x:+t[0],y:+t[1]},s[3]={x:+t[2],y:+t[3]}):s[0]={x:+t[r-2],y:+t[r-1]}:r-4==a?s[3]=s[2]:a||(s[0]={x:+t[a],y:+t[a+1]}),n.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return n}function c(t,e,n,a,r){var s;if(null==r&&null==a&&(a=n),t=+t,e=+e,n=+n,a=+a,null!=r){var c=Math.PI/180,o=t+n*Math.cos(-a*c),i=t+n*Math.cos(-r*c);s=[["M",o,e+n*Math.sin(-a*c)],["A",n,n,0,+(r-a>180),0,i,e+n*Math.sin(-r*c)]]}else s=[["M",t,e],["m",0,-a],["a",n,a,0,1,1,0,2*a],["a",n,a,0,1,1,0,-2*a],["z"]];return s}function o(t){if(!(t=r(t))||!t.length)return[["M",0,0]];var e=[],n=0,o=0,i=0,u=0,h=0,l=t.length,p=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase();"M"===t[0][0]&&(n=+t[0][1],o=+t[0][2],i=n,u=o,h++,e[0]=["M",n,o]);for(var f=function(a){var r=void 0,h=t[a],l=h[0];if(e.push(r=[]),l!==l.toUpperCase())switch(r[0]=l.toUpperCase(),r[0]){case"A":r[1]=h[1],r[2]=h[2],r[3]=h[3],r[4]=h[4],r[5]=h[5],r[6]=+h[6]+n,r[7]=+h[7]+o;break;case"V":r[1]=+h[1]+o;break;case"H":r[1]=+h[1]+n;break;case"R":for(var f=[n,o].concat(h.slice(1)),y=2,x=f.length;y<x;y++)f[y]=+f[y]+n,f[++y]=+f[y]+o;e.pop(),e=e.concat(s(f,p));break;case"O":e.pop(),(f=c(n,o,+h[1],+h[2])).push(f[0]),e=e.concat(f);break;case"U":e.pop(),e=e.concat(c(n,o,h[1],h[2],h[3])),r=["U"].concat(e[e.length-1].slice(-2));break;case"M":i=+h[1]+n,u=+h[2]+o;default:for(var g=1,v=h.length;g<v;g++)r[g]=+h[g]+(g%2?n:o)}else"R"===l?(dots=[n,o].concat(h.slice(1)),e.pop(),e=e.concat(s(dots,p)),r=["R"].concat(h.slice(-2))):"O"===l?(e.pop(),dots=c(n,o,+h[1],+h[2]),dots.push(dots[0]),e=e.concat(dots)):"U"===l?(e.pop(),e=e.concat(c(n,o,+h[1],+h[2],+h[3])),r=["U"].concat(e[e.length-1].slice(-2))):h.map((function(t){return r.push(t)}));if("O"!==(l=l.toUpperCase()))switch(r[0]){case"Z":n=i,o=u;break;case"H":n=+r[1];break;case"V":o=+r[1];break;case"M":i=+r[r.length-2],u=+r[r.length-1];default:n=+r[r.length-2],o=+r[r.length-1]}},y=h;y<l;y++)f(y);return a(e)}function i(t){t=r(t);var e=[],n=0,s=0,c=0,o=0,i=0,u=t.length;"M"===t[0][0]&&(n=+t[0][1],s=+t[0][2],c=n,o=s,i++,e.push(["M",n,s]));for(var h=function(a){var r=void 0,i=t[a];if(e.push(r=[]),i[0]!==i[0].toLowerCase())switch(r[0]=i[0].toLowerCase(),r[0]){case"a":r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=+i[6]-n,r[7]=+i[7]-s;break;case"v":r[1]=+i[1]-s;break;case"m":c=+i[1],o=+i[2];default:for(var u=1,h=i.length;u<h;u++)r[u]=+i[u]-(u%2?n:s)}else r=[],e[a]=r,"m"===i[0]&&(c=+i[1]+n,o=+i[2]+s),i.map((function(t){return e[a].push(t)}));var l=e[a].length;switch(e[a][0]){case"z":n=c,s=o;break;case"h":n+=e[a][l-1];break;case"v":s+=e[a][l-1];break;default:n+=e[a][l-2],s+=e[a][l-1]}},l=i;l<u;l++)h(l);return a(e)}function u(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function h(t,e,n,a,r,s,c,o,i,l){var p,f,y,x,g,v=120*Math.PI/180,M=Math.PI/180*(r||0),b=[];if(l)f=l[0],y=l[1],x=l[2],g=l[3];else{t=(p=u(t,e,-M)).x,e=p.y;var m=(t-(o=(p=u(o,i,-M)).x))/2,d=(e-(i=p.y))/2,C=m*m/(n*n)+d*d/(a*a);C>1&&(n*=C=Math.sqrt(C),a*=C);var k=n*n,q=a*a,A=(s==c?-1:1)*Math.sqrt(Math.abs((k*q-k*d*d-q*m*m)/(k*d*d+q*m*m)));x=A*n*d/a+(t+o)/2,g=A*-a*m/n+(e+i)/2,f=Math.asin((e-g)/a),y=Math.asin((i-g)/a),f=t<x?Math.PI-f:f,y=o<x?Math.PI-y:y,f<0&&(f=2*Math.PI+f),y<0&&(y=2*Math.PI+y),c&&f>y&&(f-=2*Math.PI),!c&&y>f&&(y-=2*Math.PI)}var w=y-f;if(Math.abs(w)>v){var P=y,V=o,U=i;y=f+v*(c&&y>f?1:-1),o=x+n*Math.cos(y),i=g+a*Math.sin(y),b=h(o,i,n,a,r,0,c,V,U,[y,P,x,g])}w=y-f;var I=Math.cos(f),R=Math.sin(f),L=Math.cos(y),S=Math.sin(y),T=Math.tan(w/4),j=4/3*n*T,Z=4/3*a*T,z=[t,e],H=[t+j*R,e-Z*I],D=[o+j*S,i-Z*L],F=[o,i];return H[0]=2*z[0]-H[0],H[1]=2*z[1]-H[1],l?[H,D,F].concat(b):(b=[H,D,F].concat(b).join().split(",")).map((function(t,e){return e%2?u(b[e-1],t,M).y:u(t,b[e+1],M).x}))}function l(t,e,n,a,r,s){return[1/3*t+2/3*n,1/3*e+2/3*a,1/3*r+2/3*n,1/3*s+2/3*a,r,s]}function p(t,e,n,a){return[t,e,n,a,n,a]}function f(t,e,n){var a,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(h.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(a=2*e.x-e.bx,r=2*e.y-e.by):(a=e.x,r=e.y),t=["C",a,r].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(l(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(l(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(p(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(p(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(p(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(p(e.x,e.y,e.X,e.Y))}return t}function y(t,e,n,a,r){t&&e&&"M"===t[r][0]&&"M"!==e[r][0]&&(e.splice(r,0,["M",a.x,a.y]),n.bx=0,n.by=0,n.x=t[r][1],n.y=t[r][2])}function x(t,e,n,a,r){if(t[r].length>7){t[r].shift();for(var s=t[r];s.length;)n[r]="A",e&&(a[r]="A"),t.splice(r++,0,["C"].concat(s.splice(0,6)));t.splice(r,1)}}function g(t,e){for(var n=o(t),r=e&&o(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=[],u=[],h="",l="",p=Math.max(n.length,r&&r.length||0),g=0;g<p;g++){n[g]&&(h=n[g][0]),"C"!==h&&(i[g]=h,g&&(l=i[g-1])),n[g]=f(n[g],s,l),"A"!==i[g]&&"C"===h&&(i[g]="C"),x(n,r,i,u,g),p=Math.max(n.length,r&&r.length||0),r&&(r[g]&&(h=r[g][0]),"C"!==h&&(u[g]=h,g&&(l=u[g-1])),r[g]=f(r[g],c,l),"A"!==u[g]&&"C"===h&&(u[g]="C"),x(r,n,u,i,g),p=Math.max(n.length,r&&r.length||0)),y(n,r,s,c,g),r&&y(r,n,c,s,g),p=Math.max(n.length,r&&r.length||0);var v=n[g],M=r&&r[g],b=v.length,m=r&&M.length;s.x=v[b-2],s.y=v[b-1],s.bx=parseFloat(v[b-4])||s.x,s.by=parseFloat(v[b-3])||s.y,c.bx=r&&(parseFloat(M[m-4])||c.x),c.by=r&&(parseFloat(M[m-3])||c.y),c.x=r&&M[m-2],c.y=r&&M[m-1]}return r?[a(n),a(r)]:a(n)}function v(t){return t.map((function(t){return"string"==typeof t?t:t.shift()+t.join(",")})).join(" ")}function M(e){var n,a,r,s,c,o,i=g(e),u=i.length-1,h=0,l=0,p=[],f=[];return[i[0]].concat(i.slice(1,u).map((function(e,y){return l=(h=u-1-y)-1<0?u:h-1,p=t(i[h]),f=t(i[l]),c=f[f.length-2],o=f[f.length-1],n=p[3],a=p[4],r=p[1],s=p[2],[e[0],n,a,r,s,c,o]})))}function b(t){var e,n,a,r,s,c,i,u=g(t),h=o(t).isClosed,l=[];return M(u).map((function(t,o){switch(n=t[1],a=t[2],r=t[3],s=t[4],c=t[t.length-2],i=t[t.length-1],e=3===t.length?"M":a===s===i?"H":n===r===c?"V":r===c&&s===i?"L":t[0]){case"M":l=["M",c,i];break;case"L":l=[e,c,i];break;case"V":l=[e,i];break;case"H":l=[e,c];break;case"Z":l=[e];break;case"C":default:l=[e,n,a,r,s,c,i]}return l})).concat(h&&[["Z"]])}function m(t){return t.replace(/(m|M)/g,"|$1").split("|").map((function(t){return t.trim()})).filter((function(t){return t}))}var d=function(e){return this.original=e,this.pathKey="path-"+Math.floor(9999*Math.random()),this.pathCache={},this.segments=r(e),this.pathValue=v(t(this.segments)),this};function C(t){var e=t[0],n=t[1],a=t[2],r=t[3],s=t[4],c=t[5],o=t[6],i=t[7];return 3*((i-n)*(a+s)-(o-e)*(r+c)+r*(e-s)-a*(n-c)+i*(s+e/3)-o*(c+n/3))/20}function k(t){var e=0;return t.map((function(n,a){var r=t[0===a?t.length-1:a-1];e+=C(r.slice(r.length-2).concat(n.slice(1)))})),e}d.prototype.toAbsolute=function(){var e=o(this.segments);return this.segments=t(e),this.pathValue=v(t(e)),this},d.prototype.toRelative=function(){var e=i(this.segments);return this.segments=t(e),this.pathValue=v(t(e)),this},d.prototype.toCurve=function(){var e=g(this.segments);return this.segments=t(e),this.pathValue=v(t(e)),this},d.prototype.reverse=function(){var e=m(this.pathValue).length>1,a=e&&m(v(o(this.segments))).map((function(t){return b(t)})),r=e?[].concat.apply([],a):b(this.segments);return!("isClosed"in r)&&n(r),this.segments=t(r),this.pathValue=v(t(r)),this},d.prototype.toString=function(){return this.pathValue};var q={a2c:h,catmullRom2bezier:s,clonePath:t,ellipsePath:c,fixArc:x,fixM:y,getArea:C,getDrawDirection:function(t){if(Array.isArray(t)&&t.slice(1).every((function(t){return t[0].toUpperCase()===t[0]})))return k(t)>=0;throw"getDrawDirection expects a curveArray"},getShapeArea:k,l2c:p,q2c:l,rotateVector:u,splitPath:m,pathToAbsolute:o,pathToRelative:i,pathToCurve:g,pathToString:v,parsePathString:r,processPath:f,reverseCurve:M,reversePath:b,options:e};for(var A in q)d[A]=q[A];return d}));
