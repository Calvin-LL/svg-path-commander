// SVGPathCommander v0.1.10 | thednp Â© 2021 | MIT-License
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t="undefined"!=typeof globalThis?globalThis:t||self).SVGPathCommander=r()}(this,(function(){"use strict";var t={origin:[0,0],decimals:4,round:1},r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function e(t){var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),a=t.data;for("m"===n&&a.length>2&&(t.segments.push([e,a[0],a[1]]),a=a.slice(2),n="l",e="m"===e?"l":"L");a.length>=r[n]&&(t.segments.push([e].concat(a.splice(0,r[n]))),r[n]););}function n(t){var r=t.index,e=t.pathValue.charCodeAt(r);return 48===e?(t.param=0,void(t.index+=1)):49===e?(t.param=1,void(t.index+=1)):void(t.err="Invalid path value: invalid Arc flag "+e+", expecting 0 or 1 at index "+r)}function a(t){return t>=48&&t<=57}function i(t){var r,e=t.max,n=t.pathValue,i=t.index,s=i,o=!1,u=!1,m=!1,c=!1;if(s>=e)t.err="Invalid path value at "+s+": missing param "+n[s];else if(43!==(r=n.charCodeAt(s))&&45!==r||(r=(s+=1)<e?n.charCodeAt(s):0),a(r)||46===r){if(46!==r){if(o=48===r,r=(s+=1)<e?n.charCodeAt(s):0,o&&s<e&&r&&a(r))return void(t.err="Invalid path value at index "+i+": "+n[i]+" illegal number");for(;s<e&&a(n.charCodeAt(s));)s+=1,u=!0;r=s<e?n.charCodeAt(s):0}if(46===r){for(c=!0,s+=1;a(n.charCodeAt(s));)s+=1,m=!0;r=s<e?n.charCodeAt(s):0}if(101===r||69===r){if(c&&!u&&!m)return void(t.err="Invalid path value at index "+s+": "+n[s]+" invalid float exponent");if(43!==(r=(s+=1)<e?n.charCodeAt(s):0)&&45!==r||(s+=1),!(s<e&&a(n.charCodeAt(s))))return void(t.err="Invalid path value at index "+s+": "+n[s]+" invalid float exponent");for(;s<e&&a(n.charCodeAt(s));)s+=1}t.index=s,t.param=+t.pathValue.slice(i,s)}else t.err="Invalid path value at index "+s+": "+n[s]+" is not a number"}function s(t){for(var r,e=t.pathValue,n=t.max;t.index<n&&(10===(r=e.charCodeAt(t.index))||13===r||8232===r||8233===r||32===r||9===r||11===r||12===r||160===r||r>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(r)>=0);)t.index+=1}function o(t){return t>=48&&t<=57||43===t||45===t||46===t}function u(t){var a=t.max,u=t.pathValue,m=t.index,c=u.charCodeAt(m),h=r[u[m].toLowerCase()];if(t.segmentStart=m,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}(c))if(t.index+=1,s(t),t.data=[],h){for(;;){for(var l=h;l>0;l-=1){if(97!=(32|c)||3!==l&&4!==l?i(t):n(t),t.err.length)return;t.data.push(t.param),s(t),t.index<a&&44===u.charCodeAt(t.index)&&(t.index+=1,s(t))}if(t.index>=t.max)break;if(!o(u.charCodeAt(t.index)))break}e(t)}else e(t);else t.err="Invalid path value: "+u[m]+" not a path command"}function m(t){return Array.isArray(t)?t.map((function(t){return Array.isArray(t)?m(t):Number.isNaN(+t)?t:+t})):t}function c(t){this.segments=[],this.pathValue=t,this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}function h(t){return Array.isArray(t)&&t.every((function(t){var e=t[0].toLowerCase();return r[e]===t.length-1&&/[achlmqstvz]/gi.test(e)}))}function l(t){if(h(t))return m(t);var r=new c(""+t);for(s(r);r.index<r.max&&!r.err.length;)u(r);return r.err.length?r.segments=[]:r.segments.length&&("mM".includes(r.segments[0][0])?r.segments[0][0]="M":(r.err="Invalid path value: missing M/m",r.segments=[])),r.segments}function f(t){return Array.isArray(t)&&h(t)&&t.every((function(t){return t[0]===t[0].toUpperCase()}))}function p(t){if(f(t))return m(t);var r=l(t),e=r.length,n=[],a=0,i=0,s=0,o=0,u=0;"M"===r[0][0]&&(s=a=+r[0][1],o=i=+r[0][2],u+=1,n.push(["M",a,i]));for(var c=u;c<e;c+=1){var h=r[c],p=h[0],y=p.toUpperCase(),v=[],x=[];if(p!==y)switch(v[0]=y,y){case"A":x=h.slice(1,-2).concat([+h[6]+a,+h[7]+i]);for(var d=0;d<x.length;d+=1)v.push(x[d]);break;case"V":v[1]=+h[1]+i;break;case"H":v[1]=+h[1]+a;break;default:"M"===y&&(s=+h[1]+a,o=+h[2]+i);for(var g=1;g<h.length;g+=1)v.push(+h[g]+(g%2?a:i))}else for(var M=0;M<h.length;M+=1)v.push(h[M]);n.push(v);var b=v.length;switch(y){case"Z":a=s,i=o;break;case"H":a=+v[1];break;case"V":i=+v[1];break;default:a=+v[b-2],i=+v[b-1],"M"===y&&(s=a,o=i)}}return n}function y(t){return Array.isArray(t)&&h(t)&&t.slice(1).every((function(t){return t[0]===t[0].toLowerCase()}))}function v(t){if(y(t))return m(t);var r=l(t),e=r.length,n=[],a=0,i=0,s=0,o=0,u=0;"M"===r[0][0]&&(s=a=+r[0][1],o=i=+r[0][2],u+=1,n.push(["M",a,i]));for(var c=u;c<e;c+=1){var h=r[c],f=h[0],p=f.toLowerCase(),v=[],x=[];if(f!==p)switch(v[0]=p,p){case"a":x=h.slice(1,-2).concat([+h[6]-a,+h[7]-i]);for(var d=0;d<x.length;d+=1)v.push(x[d]);break;case"v":v[1]=+h[1]-i;break;default:for(var g=1;g<h.length;g+=1)v.push(+h[g]-(g%2?a:i));"m"===p&&(s=+h[1],o=+h[2])}else{"m"===f&&(s=+h[1]+a,o=+h[2]+i);for(var M=0;M<h.length;M+=1)v.push(h[M])}n.push(v);var b=v.length;switch(v[0]){case"z":a=s,i=o;break;case"h":a+=+v[b-1];break;case"v":i+=+v[b-1];break;default:a+=+n[c][b-2],i+=+n[c][b-1]}}return n}function x(r,e){var n=t.round,a=t.decimals,i=e&&!Number.isNaN(+e)?+e:n&&a;if(!1===e||!n&&!i)return m(r);for(var s,o=Math.pow(10,i),u=[],c=r.length,h=0,l=[],f=0;f<c;f+=1){l=r[f],s=[""];for(var p=0;p<l.length;p+=1)p?(h=+l[p],s.push(p&&h%1!=0?Math.round(h*o)/o:h)):s[p]=l[p];u.push(s)}return u}function d(t,r){return x(t,r).map((function(t){return t[0]+t.slice(1).join(" ")})).join("")}function g(t,r,e){var n=t[0],a=t.slice(1),i=t.slice();if("TQ".includes(t[0])||(r.qx=null,r.qy=null),"H"===n)i=["L",t[1],r.y1];else if("V"===n)i=["L",r.x1,t[1]];else if("S"===n){var s=function(t,r,e,n,a){return"CS".indexOf(a)>-1?{x1:2*t-e,y1:2*r-n}:{x1:t,y1:r}}(r.x1,r.y1,r.x2,r.y2,e),o=s.x1,u=s.y1;r.x1=o,r.y1=u,i=["C",o,u].concat(a)}else if("T"===n){var m=function(t,r,e,n,a){return"QT".indexOf(a)>-1?{qx:2*t-e,qy:2*r-n}:{qx:t,qy:r}}(r.x1,r.y1,r.qx,r.qy,e),c=m.qx,h=m.qy;r.qx=c,r.qy=h,i=["Q",c,h].concat(a)}else if("Q"===n){var l=a[0],f=a[1];r.qx=l,r.qy=f}return i}function M(t){return Array.isArray(t)&&h(t)&&t.every((function(t){var e=t[0].toLowerCase();return r[e]===t.length-1&&"ACLMQZ".includes(t[0])}))}function b(t){if(Array.isArray(t)&&M(t))return m(t);for(var r,e,n=p(t),a={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},i=[],s=n.length,o="",u="",c=0;c<s;c+=1)o=n[c][0],i[c]=o,c&&(u=i[c-1]),n[c]=g(n[c],a,u),e=(r=n[c]).length,a.x1=+r[e-2],a.y1=+r[e-1],a.x2=+r[e-4]||a.x1,a.y2=+r[e-3]||a.y1;return n}function A(t){var r=p(t),e="Z"===r.slice(-1)[0][0],n=[],a=0;return n=b(r).map((function(t,e){return a=t.length,{seg:r[e],n:t,c:r[e][0],x:t[a-2],y:t[a-1]}})).map((function(t,r,n){var a=t.seg,i=t.n,s=r&&n[r-1],o=n[r+1]&&n[r+1],u=t.c,m=n.length,c=r?n[r-1].x:n[m-1].x,h=r?n[r-1].y:n[m-1].y,l=[];switch(u){case"M":l=e?["Z"]:[u,c,h];break;case"A":l=a.slice(0,-3).concat([1===a[5]?0:1,c,h]);break;case"C":l=o&&"S"===o.c?["S",a[1],a[2],c,h]:[u,a[3],a[4],a[1],a[2],c,h];break;case"S":l=s&&"CS".indexOf(s.c)>-1&&(!o||o&&"S"!==o.c)?["C",i[3],i[4],i[1],i[2],c,h]:[u,i[1],i[2],c,h];break;case"Q":l=o&&"T"===o.c?["T",c,h]:a.slice(0,-2).concat([c,h]);break;case"T":l=s&&"QT".indexOf(s.c)>-1&&(!o||o&&"T"!==o.c)?["Q",i[1],i[2],c,h]:[u,c,h];break;case"Z":l=["M",c,h];break;case"H":l=[u,c];break;case"V":l=[u,h];break;default:l=a.slice(0,-2).concat([c,h])}return l})),e?n.reverse():[n[0]].concat(n.slice(1).reverse())}function w(t){return d(p(t),0).replace(/(m|M)/g,"|$1").split("|").map((function(t){return t.trim()})).filter((function(t){return t}))}function N(t,r){var e=x(p(t),r),n=x(v(t),r);return e.map((function(t,r){return r?t.join("").length<n[r].join("").length?t:n[r]:t}))}function C(t,r,e){return{x:t*Math.cos(e)-r*Math.sin(e),y:t*Math.sin(e)+r*Math.cos(e)}}function S(t,r,e,n,a,i,s,o,u,m){var c,h,l,f,p,y,v=t,x=r,d=e,g=n,M=o,b=u,A=120*Math.PI/180,w=Math.PI/180*(+a||0),N=[];if(m)l=(c=m)[0],f=c[1],p=c[2],y=c[3];else{v=(h=C(v,x,-w)).x,x=h.y;var k=(v-(M=(h=C(M,b,-w)).x))/2,q=(x-(b=h.y))/2,P=k*k/(d*d)+q*q/(g*g);P>1&&(d*=P=Math.sqrt(P),g*=P);var I=d*d,T=g*g,V=(i===s?-1:1)*Math.sqrt(Math.abs((I*T-I*q*q-T*k*k)/(I*q*q+T*k*k)));p=V*d*q/g+(v+M)/2,y=V*-g*k/d+(x+b)/2,l=(Math.asin((x-y)/g)*Math.pow(10,9)>>0)/Math.pow(10,9),f=(Math.asin((b-y)/g)*Math.pow(10,9)>>0)/Math.pow(10,9),l=v<p?Math.PI-l:l,f=M<p?Math.PI-f:f,l<0&&(l=2*Math.PI+l),f<0&&(f=2*Math.PI+f),s&&l>f&&(l-=2*Math.PI),!s&&f>l&&(f-=2*Math.PI)}var z=f-l;if(Math.abs(z)>A){var L=f,O=M,E=b;f=l+A*(s&&f>l?1:-1),N=S(M=p+d*Math.cos(f),b=y+g*Math.sin(f),d,g,a,0,s,O,E,[f,L,p,y])}z=f-l;var j=Math.cos(l),D=Math.sin(l),Z=Math.cos(f),X=Math.sin(f),Q=Math.tan(z/4),Y=4/3*d*Q,H=4/3*g*Q,R=[v,x],G=[v+Y*D,x-H*j],J=[M+Y*X,b-H*Z],B=[M,b];if(G[0]=2*R[0]-G[0],G[1]=2*R[1]-G[1],m)return[G,J,B].concat(N);for(var F=[],U=0,$=(N=[G,J,B].concat(N).join().split(",")).length;U<$;U+=1)F[U]=U%2?C(N[U-1],N[U],w).y:C(N[U],N[U+1],w).x;return F}function k(t,r,e,n,a,i){return[1/3*t+2/3*e,1/3*r+2/3*n,1/3*a+2/3*e,1/3*i+2/3*n,a,i]}function q(t,r,e,n,a,i,s,o,u){var m=1-u;return{x:Math.pow(m,3)*t+m*m*3*u*e+3*m*u*u*a+Math.pow(u,3)*s,y:Math.pow(m,3)*r+m*m*3*u*n+3*m*u*u*i+Math.pow(u,3)*o}}function P(t,r,e){var n=t[0],a=t[1];return[n+(r[0]-n)*e,a+(r[1]-a)*e]}function I(t,r,e,n){var a=.5,i=[t,r],s=[e,n],o=P(i,s,a),u=P(s,o,a),m=P(o,u,a),c=P(u,m,a),h=P(m,c,a),l=q.apply(0,i.concat(o,m,h,a)),f=q.apply(0,h.concat(c,u,s,0));return[l.x,l.y,f.x,f.y,e,n]}function T(t,r){"TQ".includes(t[0])||(r.qx=null,r.qy=null);var e=t.slice(1),n=e[0],a=e[1];switch(t[0]){case"M":return r.x=+n,r.y=+a,t;case"A":return["C"].concat(S.apply(0,[r.x1,r.y1].concat(t.slice(1))));case"Q":return r.qx=+n,r.qy=+a,["C"].concat(k.apply(0,[r.x1,r.y1].concat(t.slice(1))));case"L":return["C"].concat(I(r.x1,r.y1,t[1],t[2]));case"Z":return["C"].concat(I(r.x1,r.y1,r.x,r.y))}return t}function V(t,r,e){if(t[e].length>7){t[e].shift();for(var n=t[e],a=e;n.length;)r[e]="A",t.splice(a+=1,0,["C"].concat(n.splice(0,6)));t.splice(e,1)}}function z(t){if(!t.every((function(t){return!Number.isNaN(t)})))throw TypeError('CSSMatrix: "'+t+'" must only have numbers.');var r=new H,e=Array.from(t);if(16===e.length){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],m=e[6],c=e[7],h=e[8],l=e[9],f=e[10],p=e[11],y=e[12],v=e[13],x=e[14],d=e[15];r.m11=n,r.a=n,r.m21=o,r.c=o,r.m31=h,r.m41=y,r.e=y,r.m12=a,r.b=a,r.m22=u,r.d=u,r.m32=l,r.m42=v,r.f=v,r.m13=i,r.m23=m,r.m33=f,r.m43=x,r.m14=s,r.m24=c,r.m34=p,r.m44=d}else{if(6!==e.length)throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");var g=e[0],M=e[1],b=e[2],A=e[3],w=e[4],N=e[5];r.m11=g,r.a=g,r.m12=M,r.b=M,r.m21=b,r.c=b,r.m22=A,r.d=A,r.m41=w,r.e=w,r.m42=N,r.f=N}return r}function L(t){if([H,DOMMatrix].some((function(r){return t instanceof r}))||"object"==typeof t&&["m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44"].every((function(r){return r in t})))return z([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]);throw TypeError('CSSMatrix: "'+t+'" is not a DOMMatrix / CSSMatrix compatible object.')}function O(t){if("string"!=typeof t)throw TypeError('CSSMatrix: "'+t+'" is not a string.');var r=String(t).replace(/\s/g,""),e=new H,n='CSSMatrix: invalid transform string "'+t+'"',a=!0;return r.split(")").filter((function(t){return t})).map((function(t){var r=t.split("("),e=r[0],i=r[1];if(!i)throw TypeError(n);var s=i.split(",").map((function(t){return t.includes("rad")?parseFloat(t)*(180/Math.PI):parseFloat(t)})),o=s[0],u=s[1],m=s[2],c=s[3];return a&&("matrix3d"===e||"rotate3d"===e&&[o,u].every((function(t){return!Number.isNaN(+t)&&0!==t}))&&c||["rotateX","rotateY"].includes(e)&&o||"translate3d"===e&&[o,u,m].every((function(t){return!Number.isNaN(+t)}))&&m||"scale3d"===e&&[o,u,m].every((function(t){return!Number.isNaN(+t)&&t!==o})))&&(a=!1),{prop:e,components:s}})).forEach((function(t){var r=t.prop,i=t.components,s=i[0],o=i[1],u=i[2],m=i[3],c=[s,o,u],h=[s,o,u,m];if("perspective"!==r||a)if(r.includes("matrix")){var l=i.map((function(t){return Math.abs(t)<1e-6?0:t}));[6,16].includes(l.length)&&(e=e.multiply(z(l)))}else if(["translate","translate3d"].some((function(t){return r===t}))&&s)e=e.translate(s,o||0,u||0);else if("rotate3d"===r&&h.every((function(t){return!Number.isNaN(+t)}))&&m)e=e.rotateAxisAngle(s,o,u,m);else if("scale3d"===r&&c.every((function(t){return!Number.isNaN(+t)}))&&c.some((function(t){return 1!==t})))e=e.scale(s,o,u);else if("rotate"===r&&s)e=e.rotate(0,0,s);else if("scale"!==r||Number.isNaN(s)||1===s)if("skew"===r&&(s||o))e=s?e.skewX(s):e,e=o?e.skewY(o):e;else{if(!/[XYZ]/.test(r)||!s)throw TypeError(n);if(r.includes("skew"))e=e[r](s);else{var f=r.replace(/[XYZ]/,""),p=r.replace(f,""),y=["X","Y","Z"].indexOf(p),v=[0===y?s:0,1===y?s:0,2===y?s:0];e=e[f].apply(e,v)}}else{var x=Number.isNaN(+o)?s:o;e=e.scale(s,x,1)}else e.m34=-1/s})),e}function E(t,r,e){var n=new H;return n.m41=t,n.e=t,n.m42=r,n.f=r,n.m43=e,n}function j(t,r,e){var n=new H,a=Math.PI/180,i=t*a,s=r*a,o=e*a,u=Math.cos(i),m=-Math.sin(i),c=Math.cos(s),h=-Math.sin(s),l=Math.cos(o),f=-Math.sin(o),p=c*l,y=-c*f;n.m11=p,n.a=p,n.m12=y,n.b=y,n.m13=h;var v=m*h*l+u*f;n.m21=v,n.c=v;var x=u*l-m*h*f;return n.m22=x,n.d=x,n.m23=-m*c,n.m31=m*f-u*h*l,n.m32=m*l+u*h*f,n.m33=u*c,n}function D(t,r,e,n){var a=new H,i=n*(Math.PI/360),s=Math.sin(i),o=Math.cos(i),u=s*s,m=Math.sqrt(t*t+r*r+e*e),c=t,h=r,l=e;0===m?(c=0,h=0,l=1):(c/=m,h/=m,l/=m);var f=c*c,p=h*h,y=l*l,v=1-2*(p+y)*u;a.m11=v,a.a=v;var x=2*(c*h*u+l*s*o);a.m12=x,a.b=x,a.m13=2*(c*l*u-h*s*o);var d=2*(h*c*u-l*s*o);a.m21=d,a.c=d;var g=1-2*(y+f)*u;return a.m22=g,a.d=g,a.m23=2*(h*l*u+c*s*o),a.m31=2*(l*c*u+h*s*o),a.m32=2*(l*h*u-c*s*o),a.m33=1-2*(f+p)*u,a}function Z(t,r,e){var n=new H;return n.m11=t,n.a=t,n.m22=r,n.d=r,n.m33=e,n}function X(t){var r=new H,e=t*Math.PI/180,n=Math.tan(e);return r.m21=n,r.c=n,r}function Q(t){var r=new H,e=t*Math.PI/180,n=Math.tan(e);return r.m12=n,r.b=n,r}function Y(t,r){return z([r.m11*t.m11+r.m12*t.m21+r.m13*t.m31+r.m14*t.m41,r.m11*t.m12+r.m12*t.m22+r.m13*t.m32+r.m14*t.m42,r.m11*t.m13+r.m12*t.m23+r.m13*t.m33+r.m14*t.m43,r.m11*t.m14+r.m12*t.m24+r.m13*t.m34+r.m14*t.m44,r.m21*t.m11+r.m22*t.m21+r.m23*t.m31+r.m24*t.m41,r.m21*t.m12+r.m22*t.m22+r.m23*t.m32+r.m24*t.m42,r.m21*t.m13+r.m22*t.m23+r.m23*t.m33+r.m24*t.m43,r.m21*t.m14+r.m22*t.m24+r.m23*t.m34+r.m24*t.m44,r.m31*t.m11+r.m32*t.m21+r.m33*t.m31+r.m34*t.m41,r.m31*t.m12+r.m32*t.m22+r.m33*t.m32+r.m34*t.m42,r.m31*t.m13+r.m32*t.m23+r.m33*t.m33+r.m34*t.m43,r.m31*t.m14+r.m32*t.m24+r.m33*t.m34+r.m34*t.m44,r.m41*t.m11+r.m42*t.m21+r.m43*t.m31+r.m44*t.m41,r.m41*t.m12+r.m42*t.m22+r.m43*t.m32+r.m44*t.m42,r.m41*t.m13+r.m42*t.m23+r.m43*t.m33+r.m44*t.m43,r.m41*t.m14+r.m42*t.m24+r.m43*t.m34+r.m44*t.m44])}var H=function t(){for(var r=[],e=arguments.length;e--;)r[e]=arguments[e];var n=this;if(n.a=1,n.b=0,n.c=0,n.d=1,n.e=0,n.f=0,n.m11=1,n.m12=0,n.m13=0,n.m14=0,n.m21=0,n.m22=1,n.m23=0,n.m24=0,n.m31=0,n.m32=0,n.m33=1,n.m34=0,n.m41=0,n.m42=0,n.m43=0,n.m44=1,r&&r.length){var a=r;return r instanceof Array&&(r[0]instanceof Array&&[16,6].includes(r[0].length)||"string"==typeof r[0]||[t,DOMMatrix].some((function(t){return r[0]instanceof t})))&&(a=r[0]),n.setMatrixValue(a)}return n},R={isIdentity:{configurable:!0},is2D:{configurable:!0}};function G(t){var r=new H,e=t.origin,n=e[0],a=e[1],i=t.translate,s=t.rotate,o=t.skew,u=t.scale;return(Array.isArray(i)&&i.some((function(t){return 0!=+t}))||!Number.isNaN(i))&&(r=Array.isArray(i)?r.translate(+i[0]||0,+i[1]||0,+i[2]||0):r.translate(+i||0,0,0)),(s||o||u)&&(r=r.translate(+n,+a),s&&(r=Array.isArray(s)&&s.some((function(t){return 0!=+t}))?r.rotate(+s[0]||0,+s[1]||0,+s[2]||0):r.rotate(0,0,+s||0)),Array.isArray(o)&&o.some((function(t){return 0!=+t}))&&(Array.isArray(o)?(r=o[0]?r.skewX(+o[0]||0):r,r=o[1]?r.skewY(+o[1]||0):r):r=r.skewX(+o||0)),(!Number.isNaN(u)||Array.isArray(u)&&u.some((function(t){return 1!=+t})))&&(r=Array.isArray(u)?r.scale(+u[0]||1,+u[1]||1,+u[2]||1):r.scale(+u||1,+u||1,+u||1)),r=r.translate(-n,-a)),r}function J(t,r,e){var n=t.transformPoint({x:r[0],y:r[1],z:0,w:1}),a=e[0]||0,i=e[1]||0,s=e[2]||0,o=n.x-a,u=n.y-i,m=n.z-s;return[o*(Math.abs(s)/Math.abs(m))+a,u*(Math.abs(s)/Math.abs(m))+i]}function B(t,r){var e,n,a,i,s,o,u,c=0,h=0,l=p(t),f=b(l),y=G(r),v=Object.keys(r),x=r.origin,d=[y.a,y.b,y.c,y.d,y.e,y.f],g={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},M=[],A=0,w="",N=[],C=[],S=[];if(!y.isIdentity){for(e=0,a=l.length;e<a;e+=1)M=l[e],l[e]&&(w=M[0]),C[e]=w,"A"!==w||y.is2D&&["skewX","skewY"].find((function(t){return v.includes(t)}))||(M=T(f[e],g),l[e]=T(f[e],g),V(l,C,e),f[e]=T(f[e],g),V(f,C,e),a=Math.max(l.length,f.length)),A=(M=f[e]).length,g.x1=+M[A-2],g.y1=+M[A-1],g.x2=+M[A-4]||g.x1,g.y2=+M[A-3]||g.y1,S={s:l[e],c:l[e][0]},"Z"!==w&&(S.x=g.x1,S.y=g.y1),N=N.concat(S);return N.map((function(t){var r,e,a;switch(w=t.c,M=t.s,w){case"A":return u=function(t,r,e,n){var a=Math.cos(n*Math.PI/180),i=Math.sin(n*Math.PI/180),s=[r*(t[0]*a+t[2]*i),r*(t[1]*a+t[3]*i),e*(-t[0]*i+t[2]*a),e*(-t[1]*i+t[3]*a)],o=s[0]*s[0]+s[2]*s[2],u=s[1]*s[1]+s[3]*s[3],m=((s[0]-s[3])*(s[0]-s[3])+(s[2]+s[1])*(s[2]+s[1]))*((s[0]+s[3])*(s[0]+s[3])+(s[2]-s[1])*(s[2]-s[1])),c=(o+u)/2;if(m<1e-9*c){var h=Math.sqrt(c);return{rx:h,ry:h,ax:0}}var l,f,p=s[0]*s[1]+s[2]*s[3],y=c+(m=Math.sqrt(m))/2,v=c-m/2,x=Math.abs(p)<1e-9&&Math.abs(y-u)<1e-9?90:Math.atan(Math.abs(p)>Math.abs(y-u)?(y-o)/p:p/(y-u)*180)/Math.PI;return x>=0?(l=Math.sqrt(y),f=Math.sqrt(v)):(x+=90,l=Math.sqrt(v),f=Math.sqrt(y)),{rx:l,ry:f,ax:x}}(d,M[1],M[2],M[3]),d[0]*d[3]-d[1]*d[2]<0&&(M[5]=+M[5]?0:1),r=J(y,[M[6],M[7]],x),s=r[0],o=r[1],M=c===s&&h===o||u.rx<1e-9*u.ry||u.ry<1e-9*u.rx?["L",s,o]:[w,u.rx,u.ry,u.ax,M[4],M[5],s,o],c=s,h=o,M;case"L":case"H":case"V":return e=J(y,[t.x,t.y],x),s=e[0],o=e[1],c!==s&&h!==o?M=["L",s,o]:h===o?M=["H",s]:c===s&&(M=["V",o]),c=s,h=o,M;default:for(n=1,i=M.length;n<i;n+=2)a=J(y,[M[n],M[n+1]],x),c=a[0],h=a[1],M[n]=c,M[n+1]=h;return M}}))}return m(l)}function F(t,r,e,n,a,i,s,o){var u,m=a-2*e+t-(s-2*a+e),c=2*(e-t)-2*(a-e),h=t-e,l=(-c+Math.sqrt(c*c-4*m*h))/2/m,f=(-c-Math.sqrt(c*c-4*m*h))/2/m,p=[r,o],y=[t,s];return Math.abs(l)>"1e12"&&(l=.5),Math.abs(f)>"1e12"&&(f=.5),l>0&&l<1&&(u=q(t,r,e,n,a,i,s,o,l),y.push(u.x),p.push(u.y)),f>0&&f<1&&(u=q(t,r,e,n,a,i,s,o,f),y.push(u.x),p.push(u.y)),m=i-2*n+r-(o-2*i+n),h=r-n,l=(-(c=2*(n-r)-2*(i-n))+Math.sqrt(c*c-4*m*h))/2/m,f=(-c-Math.sqrt(c*c-4*m*h))/2/m,Math.abs(l)>"1e12"&&(l=.5),Math.abs(f)>"1e12"&&(f=.5),l>0&&l<1&&(u=q(t,r,e,n,a,i,s,o,l),y.push(u.x),p.push(u.y)),f>0&&f<1&&(u=q(t,r,e,n,a,i,s,o,f),y.push(u.x),p.push(u.y)),{min:{x:Math.min.apply(0,y),y:Math.min.apply(0,p)},max:{x:Math.max.apply(0,y),y:Math.max.apply(0,p)}}}function U(t){return Array.isArray(t)&&h(t)&&t.slice(1).every((function(t){return"C"===t[0]}))}function $(t){if(U(t))return m(t);for(var r=b(t),e={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",i=r.length,s=0;s<i;s+=1){var o=r[s],u=o.length;o&&(a=o[0]),n[s]=a,r[s]=T(o,e),V(r,n,s),i=r.length,e.x1=+o[u-2],e.y1=+o[u-1],e.x2=+o[u-4]||e.x1,e.y2=+o[u-3]||e.y1}return r}function K(t){if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0};var r=$(t),e=0,n=0,a=[],i=[];r.forEach((function(t){var r=t.slice(-2),s=r[0],o=r[1];if("M"===t[0])e=+s,n=+o,a.push(s),i.push(o);else{var u=F.apply(0,[e,n].concat(t.slice(1)));a=a.concat(u.min.x,u.max.x),i=i.concat(u.min.y,u.max.y),e=+s,n=+o}}));var s=Math.min.apply(0,a),o=Math.min.apply(0,i),u=Math.max.apply(0,a),m=Math.max.apply(0,i),c=u-s,h=m-o;return{width:c,height:h,x:s,y:o,x2:u,y2:m,cx:s+c/2,cy:o+h/2}}function W(t,r,e,n,a,i,s,o){return 3*((o-r)*(e+a)-(s-t)*(n+i)+n*(t-a)-e*(r-i)+o*(a+t/3)-s*(i+r/3))/20}function _(t){var r=0,e=0,n=0,a=0,i=0;return $(t).map((function(t){var s;switch(t[0]){case"M":case"Z":return n="M"===t[0]?t[1]:n,a="M"===t[0]?t[2]:a,r=n,e=a,0;default:return i=W.apply(0,[r,e].concat(t.slice(1))),s=t.slice(-2),r=s[0],e=s[1],i}})).reduce((function(t,r){return t+r}),0)}function tt(t,r,e,n,a){return a*(a*(-3*t+9*r-9*e+3*n)+6*t-12*r+6*e)-3*t+3*r}function rt(t,r,e,n,a,i,s,o,u){var m=u;(null===u||Number.isNaN(+u))&&(m=1),m>1&&(m=1),m<0&&(m=0);var c=m/2,h=0,l=0,f=0,p=0,y=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472];return[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816].forEach((function(u,m){l=tt(t,e,a,s,h=c*u+c),f=tt(r,n,i,o,h),p+=y[m]*Math.sqrt(l*l+f*f)})),c*p}R.isIdentity.set=function(t){this.isIdentity=t},R.isIdentity.get=function(){var t=this;return 1===t.m11&&0===t.m12&&0===t.m13&&0===t.m14&&0===t.m21&&1===t.m22&&0===t.m23&&0===t.m24&&0===t.m31&&0===t.m32&&1===t.m33&&0===t.m34&&0===t.m41&&0===t.m42&&0===t.m43&&1===t.m44},R.is2D.get=function(){var t=this;return 0===t.m31&&0===t.m32&&1===t.m33&&0===t.m34&&0===t.m43&&1===t.m44},R.is2D.set=function(t){this.is2D=t},H.prototype.setMatrixValue=function(t){return[DOMMatrix,H].some((function(r){return t instanceof r}))?L(t):"string"==typeof t&&t.length&&"none"!==t?O(t):Array.isArray(t)?z(t):this},H.prototype.toString=function(){var t=this.toArray().join(",");return(this.is2D?"matrix":"matrix3d")+"("+t+")"},H.prototype.toArray=function(){var t=this,r=Math.pow(10,6);return(t.is2D?[t.a,t.b,t.c,t.d,t.e,t.f]:[t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]).map((function(t){return Math.abs(t)<1e-6?0:(t*r>>0)/r}))},H.prototype.toJSON=function(){return JSON.parse(JSON.stringify(this))},H.prototype.multiply=function(t){return Y(this,t)},H.prototype.translate=function(t,r,e){var n=r,a=e;return null==a&&(a=0),null==n&&(n=0),Y(this,E(t,n,a))},H.prototype.scale=function(t,r,e){var n=r,a=e;return null==n&&(n=t),null==a&&(a=t),Y(this,Z(t,n,a))},H.prototype.rotate=function(t,r,e){var n=t,a=r,i=e;return null==a&&(a=0),null==i&&(i=n,n=0),Y(this,j(n,a,i))},H.prototype.rotateAxisAngle=function(t,r,e,n){if([t,r,e,n].some((function(t){return Number.isNaN(t)})))throw new TypeError("CSSMatrix: expecting 4 values");return Y(this,D(t,r,e,n))},H.prototype.skewX=function(t){return Y(this,X(t))},H.prototype.skewY=function(t){return Y(this,Q(t))},H.prototype.transformPoint=function(t){var r=E(t.x,t.y,t.z);return r.m44=t.w||1,{x:(r=this.multiply(r)).m41,y:r.m42,z:r.m43,w:r.m44}},H.prototype.transform=function(t){var r=this,e=r.m11*t.x+r.m12*t.y+r.m13*t.z+r.m14*t.w,n=r.m21*t.x+r.m22*t.y+r.m23*t.z+r.m24*t.w,a=r.m31*t.x+r.m32*t.y+r.m33*t.z+r.m34*t.w,i=r.m41*t.x+r.m42*t.y+r.m43*t.z+r.m44*t.w;return{x:e/i,y:n/i,z:a/i,w:i}},Object.defineProperties(H.prototype,R),H.Translate=E,H.Rotate=j,H.RotateAxisAngle=D,H.Scale=Z,H.SkewX=X,H.SkewY=Q,H.Multiply=Y,H.fromArray=z,H.fromMatrix=L,H.fromString=O;var et={circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],rect:["width","height","x","y","rx","ry"],polygon:["points"],polyline:["points"],glyph:[]};var nt={CSSMatrix:H,parsePathString:l,isPathArray:h,isCurveArray:U,isAbsoluteArray:f,isRelativeArray:y,isNormalizedArray:M,isValidPath:function(t){if("string"!=typeof t)return!1;var r=new c(t);for(s(r);r.index<r.max&&!r.err.length;)u(r);return!r.err.length&&"mM".includes(r.segments[0][0])},pathToAbsolute:p,pathToRelative:v,pathToCurve:$,pathToString:d,getDrawDirection:function(t){return _($(t))>=0},getPathArea:_,getPathBBox:K,getPathLength:function(t){var r=0;return $(t).forEach((function(t,e,n){r+="M"===t[0]?0:rt.apply(0,n[e-1].slice(-2).concat(t.slice(1)))})),r},getPointAtLength:function(t,r){var e,n,a=0;return $(t).map((function(t,i,s){return n=i?s[i-1].slice(-2).concat(t.slice(1)):t.slice(1),e=i?rt.apply(0,n):0,a+=e,0===i?{x:n[0],y:n[1]}:a>r&&r>a-e?q.apply(0,n.concat(1-(a-r)/e)):null})).filter((function(t){return t})).slice(-1)[0]},clonePath:m,splitPath:w,roundPath:x,optimizePath:N,reverseCurve:function(t){var r=t.slice(1).map((function(r,e,n){return e?n[e-1].slice(-2).concat(r.slice(1)):t[0].slice(1).concat(r.slice(1))})).map((function(t){return t.map((function(r,e){return t[t.length-e-2*(1-e%2)]}))})).reverse();return[["M"].concat(r[0].slice(0,2))].concat(r.map((function(t){return["C"].concat(t.slice(2))})))},reversePath:A,normalizePath:b,transformPath:B,getSVGMatrix:G,shapeToPath:function(r,e){if(!Object.keys(et).concat(["glyph"]).some((function(t){return r.tagName===t})))throw TypeError("shapeToPath: "+r+" is not SVGElement");var n,a=document.createElementNS("http://www.w3.org/2000/svg","path"),i=r.tagName,s=et[i],o={};o.type=i,s.forEach((function(t){o[t]=r.getAttribute(t)})),Object.values(r.attributes).forEach((function(t){var r=t.name,e=t.value;s.includes(r)||a.setAttribute(r,e)}));var u,m,c,h,l=t.decimals,f=t.round&&l?l:null;return"circle"===i?n=d((m=(u=o).cx,c=u.cy,h=u.r,[["M",m-h,c],["a",h,h,0,1,0,2*h,0],["a",h,h,0,1,0,-2*h,0]]),f):"ellipse"===i?n=d(function(t){var r=t.cx,e=t.cy,n=t.rx,a=t.ry;return[["M",r-n,e],["a",n,a,0,1,0,2*n,0],["a",n,a,0,1,0,-2*n,0]]}(o),f):["polyline","polygon"].includes(i)?n=d(function(t){for(var r=[],e=t.points.split(/[\s|,]/).map(Number),n=0;n<e.length;)r.push([n?"L":"M",e[n],e[n+1]]),n+=2;return"polygon"===t.type?r.concat([["z"]]):r}(o),f):"rect"===i?n=d(function(t){var r=+t.x||0,e=+t.y||0,n=+t.width,a=+t.height,i=+t.rx,s=+t.ry;return i||s?(i=i||s,s=s||i,2*i>n&&(i-=(2*i-n)/2),2*s>a&&(s-=(2*s-a)/2),[["M",r+i,e],["h",n-2*i],["s",i,0,i,s],["v",a-2*s],["s",0,s,-i,s],["h",2*i-n],["s",-i,0,-i,-s],["v",2*s-a],["s",0,-s,i,-s]]):[["M",r,e],["h",n],["v",a],["H",r],["Z"]]}(o),f):"line"===i?n=d(function(t){return[["M",+t.x1,+t.y1],["L",+t.x2,+t.y2]]}(o),f):"glyph"===i&&(n=r.getAttribute("d")),n?(a.setAttribute("d",n),e&&(r.before(a,r),r.remove()),a):null},options:t,Version:"0.1.10"},at=function(r,e){var n=e||{},a=t.round,i=n.round;(i&&0==+i||!1===i)&&(a=0);var s=(a?n||t:{decimals:!1}).decimals;return this.round=s,this.segments=l(r),this.pathValue=r,this};return at.prototype.toAbsolute=function(){var t=this.segments;return this.segments=p(t),this},at.prototype.toRelative=function(){var t=this.segments;return this.segments=v(t),this},at.prototype.reverse=function(t){this.toAbsolute();var r=this.segments,e=w(this.toString()),n=e.length>1?e:0,a=n&&m(n).map((function(r,e){return t?e?A(r):l(r):A(r)})),i=[];return i=n?a.flat(1):t?r:A(r),this.segments=m(i),this},at.prototype.normalize=function(){var t=this.segments;return this.segments=b(t),this},at.prototype.optimize=function(){var t=this.segments;return this.segments=N(t,this.round),this},at.prototype.transform=function(t){if(!t||"object"!=typeof t||"object"==typeof t&&!["translate","rotate","skew","scale"].some((function(r){return r in t})))return this;var r=t||{},e=this.segments;if(!r.origin){var n=K(e);r.origin=[+n.cx,+n.cy]}return this.segments=B(e,r),this},at.prototype.flipX=function(){return this.transform({rotate:[180,0,0]}),this},at.prototype.flipY=function(){return this.transform({rotate:[0,180,0]}),this},at.prototype.toString=function(){return d(this.segments,this.round)},Object.keys(nt).forEach((function(t){at[t]=nt[t]})),at}));
